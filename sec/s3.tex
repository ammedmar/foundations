% !TEX root = ../foundations.tex

\section{Orientations and co-orientations}\label{S: orientations and co-orientations}

Manifolds with corners are, in particular, topological manifolds (with boundary), and so they carry the standard notions of orientability and orientation.
As in singular or simplicial homology, orientations carry sign information in geometric versions of homology theory.
For geometric cohomology, however, it turns out that the natural structures to carry sign information are co-orientations, sometimes called orientations of maps.
Unlike orientations, co-orientation can be ``pulled back.''

Co-orientations are less familiar than orientations, so it is helpful to keep the following central example in mind: If $W \to M$ is an immersion of manifolds, a co-orientation is equivalent to an orientation of the normal bundle of the image; see \cref{normal co-or} below.
Notice that this condition does not require the orientability of either $W$ or $M$.
In fact, an important case is when neither $W$ nor $M$ is orientable but the monodromies of their orientation bundles around loops in $W$ are either both orientation-preserving or both orientation-reversing; it is in this sense that we have a \textit{co}-orientation.

The special case of (local) immersions is important both for intuition and in practice; for example, the only geometric cochains which evaluate nontrivially on fixed collections of chains through the intersection homomorphisms of \cite{FMS-flows} are local immersions.
However, for complete definitions that cover all cases of interest, it is critical to co-orient more general maps and to do so in a way that provides key properties when forming pullbacks, such as a Leibniz rule when taking boundaries, graded commutativity of cochains, and a simple expression when the maps are immersions.
While co-orientations can be found in many places in the literature, we could not find a careful treatment that guaranteed these key properties.
Therefore, we develop co-orientations in depth in this (long) section.
Some readers may prefer to skip ahead, either considering geometric cohomology only with mod~2 coefficients in a first reading, or perhaps take orientation of the normal bundle as a temporary partial definition, coming back later to understand the general setting.

\subsection{Orientations}\label{S: orientations}

If $W$ is a manifold with corners then it is a topological manifold with boundary and so in the interior of $W$, i.e.\ on $S^0(W)$, we can consider orientability and orientations of $W$ in the usual sense, from either the topological or smooth manifold points of view, which are equivalent \cite[Theorem VI.7.15]{Bred97}.
Following standard conventions, we typically refer to an oriented manifold with corners $W$ with the orientation tacit.
If an orientation on $W$ is understood, then $-W$ refers to $W$ with the opposite orientation.

When $W$ is orientable, so is its (topological) boundary \cite[Lemma 6.9.1]{Bred97}, and since $S^0(W) \cup S^1(W)$ is a smooth manifold with boundary, we can allow an orientation of $W$ to determine an orientation of $S^1(W)$ using standard smooth manifold conventions.
This gives an orientation for $\bd W$, as we can identify $S^1(W)$ with the interior of $\bd W$.
In particular, we choose the following convention, which agrees with that of Joyce \cite[Convention 7.2.a]{Joy12}:

\begin{convention}\label{Con: oriented boundary}
	For a smooth oriented manifold with boundary $N$, we orient $\bd N$ by stipulating that an outward normal vector followed by an oriented basis of $\bd N$ yields an oriented basis for $N$.

	When $W$ is an oriented manifold with corners, we identify $S^1(W)$ with the interior of $\bd W$, and this convention determines an orientation of $\bd W$.
\end{convention}

When we wish to work with orientations symbolically, the following interpretation will be extremely useful.

\begin{definition}\label{D: det bundle}
	Let $E \to B$ be a rank $d$ real vector bundle.
	Define the \textbf{determinant line bundle}
	$\Or(E)$ to be $\bigwedge^d E$.
	If $d = 0$ this is interpreted to be the trivial rank one ``bundle of coefficients.''
	We call the principal $O(1) \cong C_2$ bundle associated to $\Or(E)$ the \textbf{orientation cover} of $E$.

	An \textbf{orientation} of $E$, if it exists, is then a section of its orientation cover or, equivalently, an equivalence class of non-zero sections of $\Or(E)$ such that two sections are equivalent if they differ by multiplication by an everywhere positive scalar function.
\end{definition}

In particular, we thus think of orientations of a manifold $M^m$ as (equivalence classes of) non-zero sections of $\Or(TM)$.
We typically use the notation $\beta_M$ to stand for such a section, and, as we are only ever interested in such sections to represent orientations, we systematically abuse notation by not distinguishing between a section and its equivalence class.
Thus an expression such as $\beta_M = \beta_V \wedge \beta_W$ should be interpreted as an equality of equivalence classes.
Such formulas are also often meant to be interpreted locally over some particular point or subspace that will be understood from context, and in this context we refer to expressions such as $\beta_V$ as \textbf{local orientations}.
This notation turn out to be extremely useful in working with orientations, and we will use it frequently.
Whenever we form such wedge products, if one of the terms is an element of $\bigwedge^0 TV$ for some $V$ we treat that term as a scalar function and interpret $\wedge$ as the fiberwise scalar product.

Of course, over a point $x \in M$, we identify the oriented basis $(e_1,\ldots, e_m)$ of $T_xM$ with the section $e_1 \wedge \cdots \wedge e_m$ of $\Or(TM)$.
We also use the standard identification $\bigwedge (A\oplus B)=(\bigwedge A )\otimes (\bigwedge B)$, letting $\bigwedge$ always denote the top-dimensional exterior product.
So, for example, if $V$ and $W$ are two submanifolds of a manifold $M$ intersecting transversely at a point $x$, we would have $T_xM = T_xV\oplus T_xW$, and the local orientation formula $\beta_M = \beta_V \wedge \beta_W$ would indicate that concatenating an oriented basis for $T_xV$ with an oriented basis for $T_xW$, in that order, gives an oriented basis for $T_xM$.
More generally, if $E$ is an oriented bundle over $M$, we can write $\beta_E$ for the corresponding local orientation at a point or in the neighborhood of a point.
Any abuses of notation involved in this calculus are very much justified by its extreme usefulness in working with orientations, as we shall see.

\begin{example}
	We have said that for a smooth oriented manifold with boundary $N$, we orient $\bd N$ so that an outward normal vector followed by an oriented basis of $\bd N$ yields an oriented basis for $N$.
	In our notation, we can let $\nu$ denote the normal bundle to the boundary and $\beta_{\nu}$ the section of the normal bundle tangent bundle corresponding to the outward-pointing orientation.
	Then letting $\beta_N$ and $\beta_{\bd N}$ denote the local orientations of $N$ and $\bd N$ at a boundary point, we can write our boundary orientation convention by saying that at each boundary point $\beta_N=\beta_\nu\wedge \beta_{\bd N}$.

	Of course, the normal bundle is technically a quotient bundle, but we can use the splitting of exact sequence of vector bundles \cite[Theorem 3.9.6]{Hus75} to identify it with a subbundle of the tangent bundle of $N$.
	Such choices are not unique, but they are unique up to elements of $T(\bd N)$, so the (equivalence class of the) exterior product $\beta_\nu\wedge \beta_{\bd N}$ does not depend on such choices.
	Such identifications will be used regularly and tacitly when working with normal bundles.
\end{example}

\subsubsection{Orientations of fiber products}\label{S: orientation of fiber products}

If $V$ and $W$ are oriented manifolds, we orient $V \times W$ in the standard way by concatenating oriented bases of tangent spaces of $V$ with those of $W$.
More generally, if $f \colon V \to M$ and $g \colon W \to M$ are transverse maps with $V$, $W$, and $M$ all oriented and $M$ without boundary, Joyce defines an orientation on the pullback $V \times_M W$ as follows \cite[Convention 7.2b]{Joy12}.
Consider the short exact sequence of vector bundles over $P = V \times_M W$ given by
\begin{equation}\label{E: fiber orientation}
	0 \to TP \xr{D\pi_V \oplus D\pi_W} \pi_V^*(TV) \oplus \pi_W^*(TW) \xr{\pi_V^*(Df)-\pi_W^*(Dg)} (f\pi_V)^*TM \to 0.
\end{equation}
Here $\pi_V$ and $\pi_W$ are the projections of $V \times_M W$ to $V$ and $W$, and $D\pi_V$ is being treated as a map $TP \to \pi_V^*(TV)$ and similarly for $D\pi_W$.
Analogously, $\pi_V^*(Df)$ is the pullback of the map $Df \colon TV \to TM$ obtained first by treating it as a map $TV \to f^*(TM)$ and then pulling back functorially by $\pi_V^*$, and similarly for $\pi_W^*(Dg)$; note that $f\pi_V = g\pi_W$ at points of $P$.
By choosing a splitting, this sequence determines an isomorphism
\begin{equation*}
	TP \oplus (f\pi_V)^*TM\cong\pi_V^*(TV) \oplus \pi_W^*(TW).
\end{equation*}
The choices of orientations on $V$, $W$, and $M$ determine orientations on all summands in this expression except $TP$.
The orientation on $TP$ is then chosen so that the two direct sums differ in orientation by a factor of $(-1)^{wm}$, recalling that $w=\dim(W)$, etc.

Much more about the orientations of fiber products can be found in the technical report of Ramshaw and Basch \cite{RamBas09}.
While the focus there is on manifolds without boundary, and sometimes just fiber products of linear maps of vector spaces, the results about orientations extend to manifolds with corners by employing them on the top-dimensional stratum and utilizing their stability property, by which orientation properties of fiber products of linear maps extend to properties of fiber products of transverse manifolds (see \cite[Sections 6.3, 9.1.2, and 9.3]{RamBas09}).
Their orientation of fiber products agrees with Joyce's.
This can be checked directly from the definitions\footnote{Their multiplicative ``fudge factor'' in \cite[Theorem 9.14]{RamBas09} at first appears to be different from Joyce's, but this is only because their conventions utilize what in our notation would be the map $\pi_W^*(Dg)-\pi_V^*(Df)$ rather than $\pi_V^*(Df)-\pi_W^*(Dg)$.} or, as Joyce notes in \cite[Remark 7.6.iii]{Joy12}, axiomatically, as Ramshaw and Basch show that theirs is the unique choice of orientation convention satisfying certain basic expected properties.
It is these properties that determine the sign in the definition.
We state these properties in the following two propositions.

\begin{proposition}\label{P: oriented fiber product basic properties}
	Let $f \colon V \to M$ and $g \colon W \to M$ be transverse maps from oriented manifolds with corners to an oriented manifold without boundary.
	\begin{enumerate}
		\item When $M$ is a point, the oriented fiber product $V \times_M W$ is simply $V \times W$, and in this case the fiber product orientation is consistent with the basic concatenation rule for products.
		\item When one of the maps is the identity $\id_M \colon M \to M$, the projection maps to the other factors are orientation preserving diffeomorphisms
		\begin{equation*}
			M \times_M V = V\quad\text{and}\quad V \times_M M = V.
		\end{equation*}
	\end{enumerate}
\end{proposition}

\begin{proposition}\label{P: oriented fiber mixed associativity}
	Let $V$, $W$, and $Z$ be oriented manifolds with corners, and let $M$ and $N$ be oriented manifolds without boundary.
	Then the ``mixed associativity'' formula for oriented fiber products
	\begin{equation}\label{E: mixed associativity fiber orientation}
		(V \times_M W) \times_N Z = V \times_M (W \times_N Z)
	\end{equation}
	holds when given maps
	$$V \xr{f} M\xleftarrow{g} W \xr{h} N \xl{k} Z$$
	and assuming sufficient transversality for all the fiber products in \eqref{E: mixed associativity fiber orientation} to be well defined (see \cref{R: multiproducts}).
	In this case, the map $V \times_M W \to N$ is given by composing the projection from $V \times_M W$ to $W$ with $h$, and similarly for the map $W \times_N Z \to M$.
\end{proposition}

These propositions are evident at the level of spaces.
When taking orientations into account, the first property in \cref{P: oriented fiber product basic properties} is proven in \cite[Sections 9.3.9]{RamBas09} as the ``concatenation axiom,'' and the second is proven in \cite[Sections 9.3.5 and 9.3.6]{RamBas09} as the ``left and right identity axioms.''
The mixed associativity property is proven in \cite[Sections 9.3.7]{RamBas09}.
An important special case of this associativity that we will need below occurs when $M = N$ and $g = h$, so that our initial data is three maps all to $M$.
In this case we have the ordinary associativity
\begin{equation}\label{E: oriented fiber associativity}
	(V \times_M W) \times_M Z = V \times_M (W \times_M Z).
\end{equation}
That these properties determine the orientation rule for fiber products is the content of \cite[Theorem 9-10]{RamBas09}.
Technically, Ramshaw and Basch require for uniqueness two other properties: an Isomorphism Axiom, which says that the construction is consistent across oriented homeomorphisms, and a Stability Axiom, which implies that the orientation can be determined pointwise in a globally consistent manner.
These properties are both implicit in Joyce's global definition of the fiber product orientation.

There is also a commutativity rule proven in \cite[Sections 9.3.8]{RamBas09} that follows from the other properties:

\begin{proposition}\label{P: commute oriented fiber}
	Let $f \colon V \to M$ and $g \colon W \to M$ be transverse maps from oriented manifolds with corners to an oriented manifold without boundary.
	Then, as oriented manifolds,
	\begin{equation*}
		V \times_M W = (-1)^{(m-v)(m-w)}W \times_M V.
	\end{equation*}
\end{proposition}

Recalling that we write $\dim(M)=m$, etc., this means that the canonical diffeomorphism taking $(x,y) \in V \times_M W \subset V \times W$ to $(y,x) \in W \times_M V \subset W \times V$ takes a positively-oriented basis of the tangent space of $V \times_M W$ to a $(-1)^{(m-v)(m-w)}$-oriented basis of the tangent space of $W \times_M V$.
We note that these signs, while note quite in line with the Koszul conventions, agree with those for the intersection product of homology classes in Dold \cite[Section VIII.13]{Dol72}.

Furthermore, with our convention for oriented boundaries, one obtains the following useful identity; see \cite[Propositions 7.4 and 7.5]{Joy12}

\begin{proposition}\label{P: oriented fiber boundary}
	Let $f \colon V \to M$ and $g \colon W \to M$ be transverse maps from oriented manifolds with corners to an oriented manifold without boundary.
	Then, as oriented manifolds,
	\begin{equation*}
		\bd (V \times_M W) = (\bd V \times_M W) \sqcup (-1)^{m-v}(V \times_M \bd W).
	\end{equation*}
\end{proposition}

\subsubsection{Fiber products of immersions}

The special case of fiber products with $f \colon V \to M$ and $g \colon W \to M$ embeddings or, a bit more generally, immersions, is of particular interest, especially for developing intuition.
Once again, since we are concerned primarily with orientations in this section, it is sufficient to consider $V$ and $W$ to be manifolds without boundary, and then the results we obtain extend directly to manifolds with corners.
In the case of embeddings, $V \times_M W$ is simply the intersection of $V$ and $W$ as submanifolds of $M$ by \cref{L: fiber product of embeddings}, and in the immersed case this is true locally, i.e.\ restricting attention to submanifolds of $V$ and $W$ on which $f$ and $g$ are embeddings.
Let us try to understand the orientation of $V \times_M W$ determined by orientations of $V$, $W$, and $M$ in this setting.

For convenience of notation, let us assume we have transverse embeddings so that $V$ and $W$ are submanifolds of $M$.
Then, by \cref{L: fiber product of embeddings}, we know that $P = V \times_M W$ is just the intersection $V \cap W$.
Consider a point $x \in P$.
As $V$, $W$, and $P$, are all submanifolds, $T_xV$, $T_xW$, and $T_xP$ are all subspaces of $T_xM$. Furthermore, as orientations are defined via the tangent bundles, it suffices to consider the relation among the orientations of $T_x V$, $T_xW$, $T_xM$, and $T_xP$, and, as the tangent space of a fiber product is the fiber product of the tangent spaces by \cref{L: tangent of pullbacks}, we have $T_xP = T_xV \times_{T_xM} T_xW = T_xV \cap T_xW$.
For simplicity of notation in the following, we drop the ``$T_x$'' from the notation and treat the maps $f$ and $g$ as linear embeddings of vector spaces.
We can then work with orientations of vector spaces expressed in our exterior power notation.

So we have a vector space $M$ with subspaces $V$, $W$, and $P = V \times_M W = V \cap W$.
By the transversality assumption, $V$ and $W$ span $M$.
Let $\nu W \subset V$ be a complementary subspace to $P$ in $V$ so that $V = P \oplus \nu W$; the notation is meant to suggest that $\nu W$ is a choice of normal subspace to $W$ in $M$.
Similarly, let $\nu V \subset W$ be a complementary subspace to $P$ in $W$ so that $W = P \oplus \nu V$.
Then we have $M = \nu W \oplus P \oplus \nu V$. \greg{I think this would be a good place for a picture. Maybe have $V$ and $W$ be 2-dimensional subspaces of $\R^3$? In fact, see \cref{Ex: intersection orientation}.}

In our current context, the exact sequence \eqref{E: fiber orientation} becomes a sequence of vector spaces
\begin{equation*}
	0 \to P \to V \oplus W \xr{f-g} M \to 0
\end{equation*}
with the first non-trivial map being the direct sum of inclusions and with $f$ and $g$ the emeddings of $V$ and $W$ into $M$.
Using our direct sum decompositions of the preceding paragraph, we can choose a splitting $M \to V \oplus W$ as
\[
\nu W \oplus P \oplus \nu V \to P \oplus \nu W \oplus P \oplus \nu V,
\]
given by $(x,p,y) \mapsto (0, x, -p, -y)$.
The signs are necessary due to the sign in $f-g$.
With this splitting, our resulting isomorphism $P \oplus M \to V \oplus W$ can be written in block matrix form as
\begin{equation}\label{E: orientation matrix}
	\begin{pmatrix*}[r]
		I&0&0&0\\
		0&I&0&0\\
		I&0&-I&0\\
		0&0&0&-I
	\end{pmatrix*},
\end{equation}
which has determinant $(-1)^{w}$.

By definition, the orientation of $P$ determined by the orientations of $V$, $W$, and $M$ is the orientation so that this matrix takes the concatenation of the orientation of $P$ with an orientation of $M$ (i.e.\ an ordered basis representing this concatenation orientation) to $(-1)^{wm}$ times the concatenation of the orientations of $V$ and $W$ (i.e.\ an ordered basis of $V \oplus W$ that differs from the concatenation orientation by a permutation of sign $(-1)^{wm}$).

This call can be expressed via our calculus of local orientations as follows.

\begin{proposition}\label{P: orient intersection}
	Let $V$ and $W$ be transverse oriented submanifolds of the oriented manifold $M$.
	Let $\beta_V$, $\beta_W$, and $\beta_M$ be local orientations of $V$, $W$, and $M$ at a point of $P = V \times_M W = V \cap W$.
	Then, using our notation established just above, the fiber product orientation of $P$ is the unique orientation $\beta_P$ such that if we choose orientations $\beta_{\nu W}$ and $\beta_{\nu V}$ for $\nu W$ and $\nu V$ such that $\beta_P \wedge \beta_{\nu W} = \beta_V$ and $\beta_P \wedge \beta_{\nu V} = \beta_W$ then $\beta_{\nu W} \wedge \beta_P \wedge \beta_{\nu V} = (-1)^{w(m+1)}\beta_M$ or, alternatively, $$\beta_P \wedge \beta_{\nu V} \wedge \beta_{\nu W} = \beta_M.$$
\end{proposition}

\begin{proof}
	We may work with $V$, $W$, and $P$ as linear subspaces of a vector space $M$ as above. Note that if we replace $\beta_P$ with its opposite orientation, then this must also reverse the orientations $\beta_{\nu W}$ and $\beta_{\nu V}$ and hence altogether we get the opposite orientation for $\beta_P \wedge \beta_{\nu V} \wedge \beta_{\nu W}$.
	Thus there is a unique choice of orientation $\beta_P$ as described in the lemma, and we must show that this is the orientation as defined in \cref{S: orientation of fiber products}.

	It will be more convenient to prove the lemma in the first form, but the second form follows by observing that $$(-1)^{w(m+1)} = (-1)^{wm+w} = (-1)^{wm-w^2} = (-1)^{w(m-w)},$$
	and then
	\[
	\beta_{\nu W} \wedge \beta_P \wedge \beta_{\nu V} =
	(-1)^{w(m-w)} \beta_P \wedge \beta_{\nu V} \wedge \beta_{\nu W}
	\]
	as $\dim(P \oplus \nu V) = \dim(W) = w$ and $\dim(\nu W) = m-w$.

	To prove the first statement, let $(p_1,\cdots,p_a)$ be an ordered basis for $P$ consistent with the orientation described in the lemma; so we can write $\beta_P = p_1 \wedge\cdots\wedge p_a$.
	When we consider each $p_i$ as a vector in $V$, $W$, or $M$, we write $p_i^V$, $p_i^W$, or $p_i^M$.
	We employ a similar convention with the other bases we will consider.
	Let $(x_1,\cdots,x_b)$ and $(y_1,\cdots,y_c)$ be corresponding ordered bases for $\nu W$ and $\nu V$ as described in the lemma, and we can write $\beta_{\nu W}$ and $\beta_{\nu V}$ analogously. Recall that, by assumption, we have $\beta_P \wedge \beta_{\nu W} = \beta_V$, $\beta_P \wedge \beta_{\nu V} = \beta_W$, and $\beta_M = (-1)^{w(m+1)} \beta_{\nu W} \wedge \beta_P \wedge \beta_{\nu V}$, and we must show that this is consistent with the definition of the fiber product orientation for $P$.

	So our orientation of $P \oplus M$ obtained by concatenation is
	$$(-1)^{w(m+1)} p_1 \wedge\cdots\wedge p_a \wedge x^M_1 \wedge\cdots\wedge x^M_b \wedge p^M_1 \wedge\cdots\wedge p^M_a \wedge y^M_1 \wedge\cdots\wedge y^M_c.$$
	When we apply the matrix \eqref{E: orientation matrix}, we obtain the form in $V \oplus W$ given by
	$$(-1)^{w(m+1)} (p^V_1+p^W_1) \wedge\cdots\wedge (p^V_a+p^W_a) \wedge x^V_1 \wedge\cdots\wedge x^V_b \wedge (- p^W_1) \wedge\cdots\wedge (-p^W_a) \wedge (-y^W_1) \wedge\cdots\wedge(- y^W_c).$$
	As the number of terms with a negative sign is $w$, this expression simplifies to
	$$(-1)^{wm} p^V_1 \wedge\cdots\wedge p^V_a \wedge x^V_1 \wedge\cdots\wedge x^V_b \wedge p^W_1 \wedge\cdots\wedge p^W_a \wedge y^W_1 \wedge\cdots\wedge y^W_c.$$
	But this is now precisely $(-1)^{wm}$ times the concatenation orientation of $V \oplus W$ as desired for the definition of the fiber product orientation of $P$.
\end{proof}

\begin{example}\label{Ex: intersection orientation}
	As an example, let $M = \R^3$ oriented by the standard ordered basis $(e_x,e_y,e_z)$.
	Let $V$ be the $z = 0$ plane oriented by the ordered basis vectors $(e_x,e_y)$, and let $W$ be the $x = 0$ plane oriented by the ordered basis vectors $(e_y,e_z)$.
	The intersection $P$ is the $y$ axis.
	We claim that $P$ has the fiber product orientation by $-e_y$.
	Indeed, assuming so we have $\beta_V = e_x \wedge e_y = -e_y \wedge e_x = (-e_y) \wedge e_x$, so $\beta_{\nu W} = e_x$, and $\beta_W = e_y \wedge e_z = (-e_y) \wedge (-e_z)$, so $\beta_{\nu V} = -e_z$.
	And then $$\beta_P \wedge \beta_{\nu V} \wedge \beta_{\nu W} = -e_y \wedge (-e_z) \wedge e_x = e_x \wedge e_y \wedge e_z = \beta_M,$$
	as required.
\end{example}

\begin{corollary}\label{C: orient complementary intersection}
	Suppose $V$ and $W$ have complementary dimensions so that they intersect in a point.
	Then the fiber product orientation of the point is positive if and only if $\beta_{W} \wedge \beta_{V} = \beta_M$.
\end{corollary}

\begin{proof}
	In this case, $\nu W = V$, $\nu V = W$, and $\beta_P = \pm 1 \in \R$.
	If $\beta_P = 1$, then the formula from \cref{P: orient intersection} becomes exactly the formula of the corollary.
\end{proof}

\begin{remark}
The corollary shows that the fiber product orientation is \textit{not} necessarily the expected concatenation orientation in the case of transverse complementary embeddings.
\end{remark}

\begin{example}
	Let $M = \R^2$ with the standard orientation that we can write $e_x \wedge e_y$.
	Let $V$ be the $x$-axis with orientation $e_x$ and $W$ be the $y$-axis oriented by $e_y$.
	Then  $\beta_W \wedge \beta_V = e_y \wedge e_x$, while $\beta_M = e_x \wedge e_y = -e_y \wedge e_x$.
	So the fiber product orientation of the intersection point is the negative one.
	This runs against the standard convention for transverse intersections of manifolds of complementary dimension, but we nonetheless favor this overall convention for orienting fiber products due to the properties and uniqueness result of \cite{RamBas09}.
\end{example}

\subsection{Co-orientations}\label{S: co-orientations}

To define co-orientations, we recall our definition of an orientation of a bundle from \cref{D: det bundle} as an equivalence class, up to positive scalar multiplication, of an everywhere non-zero section of the top exterior power of the bundle.
This motivates the following.

\begin{definition}\label{D: co-orientations}
	A \textbf{co-orientation} $\omega_g$ of a \textit{continuous}\footnote{We will most often be interested in the case of $g$ smooth, but continuous co-orientable maps do come up, for example in \cref{S: basic properties} where we consider covariant functoriality of geometric cohomology with respect to continuous maps.} map $g \colon W \to M$ of manifolds with corners is an equivalence class, up to positive scalar multiplication, of a nowhere zero section of the line bundle $\Hom(\Or(TW), \Or(g^*TM)) \cong \Hom(\Or(TW), g^*\Or(TM))$.
	Equivalently, a co-orientation is a choice of isomorphism between the associated orientation cover $\Or(TW)$ and the pullback of the associated orientation cover $\Or(TM)$.

	In particular, a co-orientation exists if and only if $\Hom(\Or(TW), \Or(g^*TM))$ is a trivial line bundle, in which case we say that $g$ is \textbf{co-orientable}.
\end{definition}

Thus, if $W$ is connected and $g \colon W \to M$ is co-orientable, there are exactly two co-orientations, which are \textbf{opposite} to one another; we write the opposite of $\omega_g$ as $-\omega_g$.
In particular, for connected $W$ a choice of co-orientation at a single point determines a co-orientation globally when $g$ is co-orientable (analogously to orientations).
Also, just as most manifolds do not possess a preferred orientation, most maps $g \colon W \to M$ do not carry a natural choice of co-orientation, with the following notable exception.

\begin{definition}\label{D: tautological co-orientation}
	Suppose $g$ is a diffeomorphism, or more generally a codimension-0 immersion. In this case, the top exterior power of $Dg$,
	$$\textstyle{\bigwedge^w} Dg \colon \textstyle{\bigwedge^w} TW \to \textstyle{\bigwedge^w} g^*(TM),$$
	provides a \textbf{tautological co-orientation}.
\end{definition}

The local triviality of the determinant line bundle of a manifold means being able to choose a consistent basis vector over sufficiently small neighborhoods.
Again, we call such a choice of basis vector around a point in $W$ a \textbf{local orientation}, and, as for global orientations, often denote a local orientation by $\beta_W$.
Again, abusing notation, we also often allow $\beta_W$ to refer to its equivalence class up to multiplication by a positive scalar.
We identify $\beta_W$ with a local choice of (equivalence class of) non-zero section of\footnote{As usual, if $\dim(W) = 0$ we identify $\bigwedge^0 TW$ with the trivial $\R$ bundle, and, when forming exterior products, multiplication by a section is treated as scalar multiplication.} $\bigwedge^w TW$ in a neighborhood of a point $x$ in $W$ or, equivalently, a local smoothly varying ordered basis for the fibers of $TW$.
We typically do not specify the point $x$, though when necessary we write $\beta_{W,x}$.
We then use ordered-pair notation for co-orientation homomorphisms, with $\omega_g = (\beta_W, \beta_M)$ being the \textbf{local co-orientation} that sends the local orientation $\beta_W$ at $x \in W$ to the local orientation $\beta_M$ for $g^*(TM)$.
We will often further abuse notation by neglecting the pullback and treating $\beta_M$ as a local orientation at $g(x)$ in $M$.
We write the opposite co-orientation $(\beta_W,-\beta_M) = (-\beta_W,\beta_M)$ as $-(\beta_W,\beta_M)$.
As a co-orientation at a point completely determines the co-orientation of a co-orientable map for connected $W$, it is useful to cheat further and write $\omega_g = (\beta_W,\beta_M)$ for appropriate $\beta_W$ and $\beta_M$ with the chosen points $x$ implicit.

A manifold is orientable if and only if the orientation cover is trivial.
So if $M$ is orientable, $\Or(g^*(TM))$ is trivial, and co-orientability of $g \colon W \to M$ implies that $W$ is orientable.
Moreover, an orientation on $M$ along with a co-orientation of $g$ gives rise to an \textbf{induced orientation} of $W$.
Explicitly, if $\beta_M$ denotes the global orientation of $M$, then we orient $W$ at each point by the $\beta_W$ such that $\omega_g = (\beta_W,\beta_M)$.
Conversely, if $M$ and $W$ are both oriented, say by $\beta_M$ and $\beta_W$ respectively, we have the \textbf{induced co-orientation} given by $\omega_g = (\beta_W,\beta_M)$ at each point of $W$.
On the other hand, it is not true that if we have an orientation of $W$ and a co-orientation of $g \colon W \to M$ then we obtain an orientation of $M$.
For example, if $W$ is orientable, any constant map to $M$ is co-orientable, regardless of whether or not $M$ is orientable.

More generally, recall that the fundamental group of a manifold acts on classes of local orientations as the deck transformations of the orientation cover.
A map is co-orientable if it holds that a loop in $W$ acts nontrivially on a local orientation of $W$ if and only if its image in $M$ acts nontrivially on a local orientation of $M$.
Explicitly, if $g \colon W \to M$ is co-orientable, following a loop in $W$ may change the local orientation pair
$(\beta_W, \beta_M)$ to $(-\beta_W, -\beta_M)$, but these pairs define equivalent co-orientations.

Similarly, to compare local constructions at different points, it is useful to use paths.
Suppose $\gamma \colon I \to W$ is a path with $\gamma(0) = x$ and $\gamma(1) = y$.
We can choose a lift $\td \gamma$ of $\gamma$ to the complement of the $0$-section of $\Or(TW)$ such that $\td \gamma(0)$ is in the equivalence class of $\beta_{W,x}$.
We then define $\gamma_*\beta_{W}$ to be the equivalence class of $\td \gamma(1)$.
Likewise, we define $(g\gamma)_*\beta_M$ by a lift of $g\gamma$ to the complement of the zero section of $\Or(TM)$.
Then $\gamma_*\beta_{W}$ and $(g\gamma)_*\beta_M$ depend on $\gamma$, but if $g \colon W \to M$ is co-orientable the pair $(\gamma_*\beta_{W}, (g\gamma)_*\beta_M)$ is independent of $\gamma$ as this data also determines a non-vanishing lift of $\gamma$ in $\Hom(\Or(TW),g^*\Or(TM))$, which is trivial if $g$ is co-orientable.
In particular, if $g$ is co-oriented and $(\beta_{W}, \beta_M)$ represents the choice of co-orientation locally at $x$, then $\gamma_*(\beta_W,\beta_M) \defeq (\gamma_*\beta_{W}, (g\gamma)_*\beta_M)$ will represent the same co-orientation locally at $y$.
We refer to this as \textbf{transporting} the co-orientation from $x$ to $y$.

\begin{example}
	Let $g$ be any map $g \colon S^1 \to S^2$.
	As $S^1$ and $S^2$ are orientable, $g$ is co-orientable.
	If we choose a local orientation vector $e_{\theta}$ at any point $x \in S^1$ and latitude/longitude coordinates $\phi,\psi$ at $g(x)$ so that $e_\phi \wedge e_\psi$ is a local orientation in a neighborhood of $g(x)$, then the two possible co-orientations for $g$ can be written $(e_\theta, e_\phi \wedge e_\psi)$ and $-(e_\theta, e_\phi \wedge e_\psi) = (-e_\theta, e_\phi \wedge e_\psi) = (e_\theta,- e_\phi \wedge e_\psi)$.
	While the notation explicitly references a local orientation at a point, this is sufficient to determine the co-orientation globally.
	In what follows we will often demonstrate properties of co-orientations by showing that they hold locally at an arbitrary point but do not depend on the choice of point.

	As another example, consider the standard embedding $g \colon \R P^2 \into \R P^4$.
	Choosing local orientations $e_1 \wedge  e_2$ at some $x \in \R P^2$ and $f_1 \wedge f_2 \wedge f_3 \wedge f_4$ at $g(x)$, the two co-orientations are $(e_1 \wedge e_2, f_1 \wedge f_2 \wedge f_3 \wedge f_4)$ and its opposite.
	If $\gamma$ is a loop that reverses the orientation of $\R P^2$ then it also reverses the orientation of $\R P^4$, so $\gamma_*(e_1 \wedge e_2, f_1 \wedge f_2 \wedge f_3 \wedge f_4) = (-e_1 \wedge e_2,- f_1 \wedge f_2 \wedge f_3 \wedge f_4) = (e_1 \wedge e_2, f_1 \wedge f_2 \wedge f_3 \wedge f_4)$, reflecting that $g$ is co-orientable.

	By contrast, no embedding of the M\"obius strip in $\R^3$ is co-orientable.
\end{example}

\begin{remark}\label{R: cooriented composition}
	Co-oriented maps compose in an immediate way, forming a category.
	Namely, given $V \xr{f} W \xr{g} M$ and co-orientations $\Or(TV) \to \Or(f^*TW)$ and $\Or(TW) \to \Or(g^*TM)$, we simply compose the former with the pullback of the latter via $f^*$, recalling that $f^*(\Or(E)) = \Or(f^*E)$ in a natural way.
	We will refer to this simply as composing co-orientations and write the composition in symbols as $\omega_f*\omega_g$.
	Warning: note that we write the terms in the order $\omega_f*\omega_g$ for the map $g \circ f$.
	This is more convenient when writing out co-orientations using the local orientations as we obtain expressions such as $(\beta_V, \beta_W)*(\beta_W,\beta_M) = (\beta_V,\beta_M)$.
\end{remark}


\begin{notation}\label{N: implicit notation}
	It will be useful in notation to sometimes leave the maps, codomains, and co-orientations all implicit once they have already been established and just write $V$ to represent the co-oriented map $f \colon V \to M$.
	In this, case we write $-V$ to refer to the same map with the opposite co-orientation.
	\greg{Is there a better place to put this?}
\end{notation}

Just as is the case for orientations, when working with co-orientations it suffices to consider the interior of the manifold, in this case of the domain.

\begin{proposition}\label{P: interior co-orientation}
Let $g \colon W \to M$ be a map of manifolds with corners. Then $g$ is co-orientable if and only if its restriction to $S^0(W)$, the interior of $W$, is co-orientable.
\end{proposition}
\begin{proof}
It is clear from the definition that if $g$ is co-orientable then so is its restriction to any open set of $W$.

Conversely, suppose the restriction of $g$ to $S^0(W)$ is co-orientable. As $W$ is a topological manifold with boundary, which we will denote $bd(W)$, the collaring theorem tells us that $bd(W)$ possesses a collar \cite[Theorem 2]{Bro62}. Let $C$ be a closed collar of $bd(W)$. Then $C$ is homeomorphic to $bd(W)\times I$ with $bd (W)$ identified under the homeomorphism with $bd(W) \times 0$. Let $B$ be the image of $bd(W) \times 1$ in $W$, and let $int(C)$ be the image of $bd(W) \times [0,1)$. Since $g|_{S^0(W)}$ is co-orientable, any choice of co-orientation restricts to a bundle isomorphism $\bigwedge TW|_B \to \bigwedge g^*\Or(TM)|_B$. Due to the product structure of the collar, the restriction of $\bigwedge TW$ to $C$ is isomorphic to $\bigwedge TW|_B \times I$ and similarly for $\bigwedge g^*\Or(TM)$ \cite[Theorem 3.4.4]{Hus94}, and so the bundle isomorphism over $B$ can be extended to a bundle isomorphism over $C$. As we chose the bundle isomorphism over $B$ to be the restriction of an isomorphism over $g|_{S^0(W)}$, we can glue together the bundle isomorphisms over $C$ and over $W-int(C)$ to obtain an isomorphism over all of $W$.
\end{proof}

\subsection{Normal co-orientations of immersions and co-orientations of boundaries}\label{S: normal orientation}

Once again, a key example is when $g$ is an immersion, which is co-orientable if and only if its normal bundle is orientable\footnote{Recall that technically all bundles are over $W$, though our convention is to elide that in the notation.
Hence we can consider $W$ to have a normal bundle even if $g$ is merely an immersion and not actually an embedding.
The normal bundle can be identified with $g^*(TM)/TW$ after identifying $TW$ with a sub-bundle of $g^*(TM)$ using the differential.
In any case, locally in the neighborhood of any point of $W$ one has the usual identification of the normal bundle with a tubular neighborhood of the image, which suffices for our purposes here.}.
Specifically, if $g \colon W \to M$ is an immersion, letting $\nu W$ denote the normal bundle, we have $TW \oplus \nu W \cong g^*TM$.
So, taking $w = \dim(W)$ and $m = \dim(M)$, a co-orientation is a nowhere-zero map from $\bigwedge^w TW$ to $\bigwedge^m g^*TM = \bigwedge^m (TW \oplus \nu W) \cong \bigwedge^w TW \otimes \bigwedge^{m-w}\nu W$.
Such a nowhere-zero map exists if and only $\bigwedge^{m-w}\nu W$ is a trivial line bundle, i.e.\ if $\nu W$ is orientable.

Given a specific orientation of $\nu W$, we specify a standard choice of \textbf{normal co-orientation} for the immersion $g \colon W \to M$ by the following local construction:

\begin{definition}\label{normal co-or}
	Let $g \colon W \to M$ be an immersion with normal bundle $\nu$ locally oriented (at some point of $W$) by $\beta_\nu$.
	Define the \textbf{normal co-orientation} associated to $\beta_\nu$ locally by the pair $\omega_{\nu} = (\beta_W, \beta_W \wedge \beta_\nu)$, where $\beta_W$ is any choice of a local orientation of $W$.
\end{definition}

This construction is independent of the choice of $\beta_W$, as reversing the orientation of $\beta_W$ gives
$$(-\beta_W, -\beta_W \wedge \beta_\nu) = (\beta_W, \beta_W \wedge \beta_\nu).$$
If the normal bundle to $W$ is oriented globally on $W$ then the construction is also independent of the point at which it is carried out since if $\gamma$ is a path from $x$ to $y$ with $\beta_W$ and $\beta_\nu$ constructed at $x$ then
\begin{equation*}
	(\gamma_*\beta_{W,x}\, , (g\gamma)_* (\beta_{W,x} \wedge \beta_{\nu,x})) =
	(\gamma_*\beta_{W,x}\, , (\gamma_* \beta_{W,x}) \wedge (g\gamma)_*\beta_{\nu,x}) =
	(\gamma_*\beta_{W,x}\, , (\gamma_* \beta_{W,x}) \wedge \beta_{\nu,y}),
\end{equation*}
using that $\nu$ is assumed oriented and that, via the immersion, we can treat a path in $W$ as a path in $M$ and tangent vectors of $W$ as tangent vectors of $M$.
Now taking $\beta_{W,y}$ to be $\gamma_* \beta_{W,x}$, the expression on the right again has the prescribed form.
So if the normal bundle to $W$ is oriented, these local choices determine a global co-orientation of $W \to M$.
If the normal bundle is orientable, one can conversely orient the normal bundle via this formula if one is given a co-orientation: choose $\beta_\nu$ so that $(\beta_W, \beta_W \wedge \beta_\nu)$ is the co-orientation of the immersion.

As we shall see, signs in the theory of co-orientations are highly dependent on choices.
One such choice in this definition is whether to append the local normal orientation before or after the local tangent orientation.

\subsubsection{Quillen co-orientations}\label{S: Quillen}

There is a useful alternative, though equivalent, definition of co-orientations due to Quillen \cite{Quil71} that only involves orientations of normal bundles as in the preceding section.\footnote{Quillen's context was slightly different.
He assumed the normal bundles to have complex structures and so called these \textit{complex orientations}.}

\begin{lemma}\label{L: Quillen}
	A map $g \colon W \to M$ is co-orientable if and only if for some $N \in \Z_{\geq 0}$ it factors as the composition $W \into M \times \R^N \to M$ of an embedding and a projection such that the image of $W$ in $M \times \R^N$ has an orientable normal bundle.
\end{lemma}

\begin{proof}
	We first note that such a smooth factorization always exists by \cref{C: embed V}.

	Next we observe that $T(M \times \R^N) \cong \pi^*(TM) \oplus \underline{\R}^N$ where $\underline{\R}^N$ is the trivial $\R^N$ bundle over $M \times \R^N$.
	As $\Or( \underline\R^N)$ is a trivial line bundle,
	\begin{equation*}
		\Or(T(M \times \R^N)) \cong \Or(\pi^*(TM)) \otimes \Or(\underline\R^N) \cong \Or(\pi^*TM).
	\end{equation*}
	Thus $\pi$ is always co-orientable.
	Furthermore, we see that
	\begin{equation*}
		\Or(g^*TM) \cong \Or(e^*\pi^*TM) \cong e^*\Or(\pi^*TM) \cong e^*\Or(T(M \times \R^N)) \cong \Or(e^*T(M \times \R^N)).
	\end{equation*}
	So $e$ is co-orientable if and only if $g$ is co-orientable.
	But $e$ is an immersion, and so it is co-orientable if and only if the normal bundle of the image is orientable by the discussion preceding \cref{normal co-or}.
\end{proof}

\begin{definition}\label{D: Quillen normal or}
	If $(e_1, \ldots, e_n)$ is the standard ordered basis of $\R^N$, we denote the corresponding orientation from by $\beta_E = e_1 \wedge \cdots \wedge e_N$.
	Then the projection $\pi \colon M \times \R^N \to M$ has a canonical co-orientation $(\beta_M \wedge \beta_E, \beta_M)$ that is well defined as $\R^N$ is contractible.
	If $g \colon W \to M$ is co-oriented and $e \colon W \into M \times \R^N$ is an immersion with normal bundle $\nu$, we then define the \textbf{compatible normal orientation} or \textbf{Quillen normal orientation} of $\nu$ so that the composition of co-orientations $(\beta_W,\beta_W \wedge \beta_\nu)$ with $(\beta_M \wedge \beta_E,\beta_M)$ is the given co-orientation of $g$.
	In other words, if $(\beta_W,\beta_M)$ is the given co-orientation of $g$, then the compatible normal orientation of $\nu$ is such that $\beta_W \wedge \beta_\nu = \beta_M \wedge \beta_E$.

	We sometimes speak of the entire structure $W \into M \times \R^N \to M$ with an orientation of $\nu$ as a \textbf{Quillen co-orientation} for $W \to M$ or as a ``compatible Quillen co-orientation'' if we have already specified a co-orientation for $W \to M$ and we wish to choose the Quillen co-orientation that agrees with it.
\end{definition}

\begin{remark}\label{R: immersion}
	In particular, if $g \colon W \to M$ is an immersion, then, by taking $N = 0$, a co-orientation of $g$ is equivalent to a Quillen normal orientation of the normal bundle $\nu$ of $W$ in $M$.
	In particular, the co-orientation is given locally by $(\beta_W, \beta_M)$ if and only if $\nu$ is oriented so that $\beta_W \wedge \beta_\nu = \beta_M$.
	If $g$ is a codimension-$0$ immersion, then $\nu$ will be $0$-dimensional, and if the co-orientation is the tautological one then $\beta_\nu$ will be the positive orientation at each point.
\end{remark}

Lipyanskiy's definition of co-orientation in \cite{Lipy14} factors a proper map through a map which is surjective onto $TM$, rather than injective from $TW$ as in the Quillen approach.
We discuss Lipyanskiy's co-orientations in an appendix at the end of this section; see \cref{S: Lipyanskiy co-orientations}.

\subsubsection{Co-orientations of boundaries}

Given a co-oriented map $g \colon W \to M$ where $W$ is a manifold with corners, we can use a normal co-orientation of $\bd W$ in $W$ together with the composition of co-orientations noted in \cref{R: cooriented composition} to define ``boundary co-orientations'':

\begin{definition}\label{D: boundary co-orientation}
	Let $\nu$ be the normal bundle of $\bd W$ as an immersed with corners of $W$.
	The \textbf{standard co-orientation of a boundary immersion} $i_{\bd W} \colon \bd W \into W$ is the normal co-orientation (see \cref{normal co-or}) associated to the \textit{inward}-pointing\footnote{The outward-pointing normal would also work to provide a co-orientation convention for which the Leibniz formula of \cref{S: co-orient pullbacks} holds.
	However, using an outward normal is not consistent with the intersection map $\mc I$ of \cref{S: intersection map} being a chain map with our other conventions, while using the inward normal does make $\mc I$ a chain map.} orientation of $\nu$.

	If $g \colon W \to M$ is co-oriented, the \textbf{induced co-orientation} or \textbf{boundary co-orientation} of the composition $gi_{\bd W}$ is the composition of the standard co-orientation of $i_{\bd W}$ with the given co-orientation of $g \colon W \to M$.
	We write $\bd g \colon \bd W \to M$ to denote $gi_{\bd W}$ with its induced co-orientation.
\end{definition}

In \cref{S: geometric cochains}, we will use induced co-orientations on boundaries to define the differential in the geometric cochain complex.



\begin{example}\label{E: splitting example 1}
	Suppose $g \colon W \into M$ is the embedding of a codimension-$0$ submanifold of $M$.
	In this case $TW$ is the pullback of $TM$, and we have the tautological co-orientation of \cref{D: tautological co-orientation} that, slightly abusing notation, we can write as $(\beta_M,\beta_M)$.
	A particularly important pair of examples is given by the inclusions $g^- \colon (-\infty, 0] \into \R$ and $g^+ \colon [0,\infty) \into \R$, each tautologically co-oriented by $(e_1,e_1)$, where $e_1$ is the standard unit vector in $\R$.

	Next consider the submanifold consisting of the point $0 \in \R$.
	Its tangent space has trivial determinant line bundle, and we can choose the basis element to be the element $1 \in \bigwedge^0 T0 \cong \R$.
    If we give the normal bundle to $0$ in $\R$ the standard orientation in the positive direction, denoted by the standard basis vector $e_1$, then the corresponding normal orientation of the inclusion of $0$ into $\R$ will be $(1, 1 \wedge e_1) = (1, e_1)$.
	By \cref{normal co-or,D: boundary co-orientation}, the standard co-orientation of the boundary inclusion $\{0\} \into (-\infty, 0]$ is $(1, 1 \wedge -e_1) = (1, -e_1)$.
	The boundary co-orientation of the inclusion $\{0\} \to \R$ induced by the tautological co-orientation of the inclusion $g^- \colon (-\infty, 0] \to \R$ is then the composition of $(1, -e_1)$ with $(e_1, e_1)=(-e_1,-e_1)$, which is again $(1,-e_1) = -(1,e_1)$ (all bases interpreted in the appropriate spaces).
	As the inward normal to $[0,\infty)$ at $0$ is $e_1$, the inclusion $g^+ \colon [0,\infty) \to \R$ induces the opposite co-orientation $(1, e_1)$ on the inclusion $\{0\} \to \R$.
	So we see in this case different co-orientations of the same inclusion $0\into \R$ depending on which conventions and which contexts we choose to employ.
\end{example}

The following example will be very important later for breaking geometric chains and cochains into pieces.

\begin{example}\label{E: manifold decomposition}
	Suppose we have a smooth map $\varphi \colon W \to \R$ and that $0$ is a regular value of $\varphi$.
	Consider the spaces $W^0 = (\varphi)^{-1}(0)$, $W^- = (\varphi)^{-1}((-\infty,0])$, and $W^+ = (\varphi)^{-1}([0,\infty))$.
	We can identify $W^0$ with the fiber product $0 \times_{\R} W$ of $\varphi$ with the embedding of $0$ into $\R$, as our canonical realization of this fiber product is
	$$\{(0,x) \in 0 \times W \mid \varphi (x)= 0\}.$$
	Similarly, $W^-$ and $W^+$ are $(-\infty,0] \times_{\R} W$ and $[0,\infty) \times_{\R} W$,  
	as $$[0,\infty) \times_{\R} W = \{(t,x) \in [0,\infty) \times W \mid \varphi(x) = t\},$$
	which is simply the graph of $\varphi$ over $W^+$; 
	so there is a diffeomorphism between the fiber product and $W^+$ determined by the inverse maps $(t,x) \mapsto x$ and $x \mapsto (\varphi(x), x)$.
	The case of $W^-$ is analogous.
	That $0$ is a regular value of $\varphi$ implies that $\varphi$ is transverse to the embedding of $0$ into $\R$, and it follows by \cref{pullback} that $W^0$, $W^+$, and $W^-$ are manifolds with corners.
	In fact, $W^0$ is a submanifold (with corners) of $W$ by \cite[Proposition 4.2.9]{MaDo92}. 
	By the boundary formula of \cref{P: product boundary}, 
	$$\bd (W^-)= \left(0 \times_{\R} W\right) \sqcup \left((-\infty,0] \times_{\R} \bd W\right) = W^0 \sqcup (\bd W)^-,$$
	so $W^0$ is a boundary component of $W^-$ and similarly for $W^+$.

	Now, at least over its interior, the normal bundle of $W^0$ in $W$ is the pullback via $\varphi$ of the normal bundle of $0$ in $\R$ by \cref{L: normal pullback}. Giving the normal bundle of $0$ in $\R$ the standard orientation in the positive direction, denoted by the basis vector $e_1$, this orientation pulls back to a natural orientation of the normal bundle to the interior of $W^0$ in $W$. Applying \cref{normal co-or,P: interior co-orientation}, we obtain a normal co-orientation for $W^0$ in $W$, which we call the \textbf{co-orientation of $W^0$ in $W$ induced by $\varphi$}. This is the co-orientation $(\beta_{W^0}, \beta_{W^0} \wedge (\varphi)^*e_1)$.

	We also have the boundary co-orientations of the inclusions of $W^0$ into $W^{\pm}$.
	Analogously to \cref{E: splitting example 1}, the boundary co-orientation from the composite $W^0 \to W^- \into W$  is the opposite of the co-orientation of $W^0\into W$ induced by $\varphi$, while the boundary co-orientation from the composite $W^0 \to W^+ \into W$  agrees with the co-orientation of $W^0\into W$ induced by $\varphi$

	Next we suppose that $\varphi$ is the composition $\varphi = \phi g$ of two smooth maps $W \xr{g} M \xr{\phi}\R$, where $M$ is a manifold without boundary. 
	This may at first seem a bit artificial, but such a setting will arise in the creasing construction in \cref{S: creasing} for breaking up geometric chains and cochains.
	We further suppose $0$ is a regular value for $\phi$ and for $\phi g$ and note that $0$ being a regular value for $\varphi = \phi g$ is equivalent to $g$ being transverse to $M^0 = \phi^{-1}(0)$, which is a codimension-one submanifold of $M$ by the preceding discussion.
	In fact, by the applying the preceding discussion to $\phi$, we obtain spaces $M^0$ and $M^\pm$, and applying the discussion to $\varphi = \phi g$, we obtain spaces $W^0$ and $W^\pm$. 
	Furthermore, we notice for use later that $W^0$ and $W^\pm$ are diffeomorphic to the respective fiber products $M^0 \times_M W$ and $M^{\pm} \times_M W$ by an argument analogous to that above for the fiber products over $\R$; in particular, these are just the graphs of $g$ over $W^0$ and $W^\pm$.
	
	
	Now suppose that $g$ is co-oriented with local representatives $(\beta_W, \beta_M)$. 
	If we precompose this co-orientation of $g$ with the tautological co-orientations of the inclusions $W^\pm \into W$, we can co-orient $g|_{W^\pm}$ by $(\beta_W, \beta_M)$.
	This is simply the restriction to $W^\pm$ of the co-orientation of $g$.
	Similarly, by composing the co-orientation of $g$ with the $\varphi$-induced co-orientation of $W^0 \into W$, we obtain the \textbf{co-orientation of $g|_{W^0} \colon W^0 \to M$ induced by $\phi$}, which in symbols is just $(\beta_{W^0}, \beta_{W^0} \wedge (\phi g)^*e_1)*(\beta_W,\beta_M)$.
	Furthermore, as in \cref{E: splitting example 1}, the co-orientation of $g|_{W^0} \colon W^0 \to M$ induced by $\phi$ disagrees with its boundary co-orientation as a component of $\bd(g|_{W^-})$, while it agrees with its co-orientation as a component of $\bd(g|_{W^+})$.

	When $g$ is co-oriented, our co-orientation computations here for the restrictions of $g$ to $W^0$ and $W^\pm$ will later be seen to be consistent with the co-orientations we define for fiber products of co-oriented maps; see \cref{E: codim 0 and 1 co-or as fiber products}.
	In \cref{C: co-orient W0}, we will use that technology to see that $\bd (W^0)$ and $(\bd W)^0$ agree as spaces, but their maps to $M$ will have opposite co-orientations under our conventions, i.e.\ ``$\bd (W^0) = -(\bd W)^0$,'' eliding the maps.
\end{example}

\begin{comment}
	\red{TO DO SOMEWHERE: It will be convenient to show that $g \colon W^0 \to M$ with this co-orientation is the pullback of $M^0 \into M$ (co-oriented as defined here) and $g \colon W \to M$ and similarly for $g \colon W^\pm \to M$.
		Also need to rewrite things in other places as $M^0$, $M^\pm$, etc instead of always writing $\varphi^{-1}((\infty,0])$ etc.
		Also need to show that $\bd W^0 = -(\bd W)^0$, which should follow from the Leibniz rule and the first thing the previous sentence.}
\end{comment}

\subsubsection{Co-orientations of boundaries of boundaries}

In order to form a chain complex of geometric cochains in \cref{S: geometric cochains}, we will need a result about co-orientations of $\bd^2 W$.
Recall from \cref{S: boundaries} that Proposition 2.9 of \cite{Joy12} identifies $\bd^2 W$ with the set of points $(x,\bb_1,\bb_2)$ with $x \in W$ and the $\bb_i$ encoding distinct local boundary components.
The map $i_{\bd^2 W} \colon \bd^2 W \to W$ takes $(x,\bb_1,\bb_2)$ to $x$.
The manifold with corners $\bd^2 W$ is equipped with a canonical diffeomorphism $\rho$ defined by $(x,\bb_1,\bb_2) \mapsto (x,\bb_2,\bb_1)$.

\begin{lemma}\label{L: boundary2}
	Suppose $i_{\bd^2 W} \colon \bd^2 W \to W$ is co-oriented via the composition of boundary co-orientations $\bd^2 W \to \bd W \to W$, and suppose $\rho \colon \bd^2 W \to \bd^2 W$ is given its tautological co-orientation (see \cref{D: tautological co-orientation}).
	Then $i_{\bd^2 W}$ and $i_{\bd^2 W}\rho$ have opposite co-orientations.
\end{lemma}

\begin{proof}
	It suffices to consider points $(x,\bb_1,\bb_2) \in \bd^2 W$ with $x \in S^2(W)$, as such points fill out the interior of $\bd^2 W$.
	In $W$, such $x$ have neighborhoods of the form $[0,\infty)^2 \times \R^{w-2}$ with $x$ at the origin.
	We identify $[0,\infty)^2$ with the first quadrant of $\R^2$, letting $X$ and $Y$ denote the non-negative $x$ and $y$ axes.
	We let $\bb_X$ and $\bb_Y$ be the corresponding local boundary components.
	Then the preimage in $\bd^2 W$ of a small neighborhood $U$ of $x$ in $S^2(W)$ consists of two copies of $U$ that we can write $(U,\bb_X,\bb_Y)$ and $(U,\bb_Y,\bb_X)$.
	The notation indicates that we think of the first copy of $U$ as embedding into $X \times \R^{w-2} \subset \bd W$ and the second as embedding into $Y \times \R^{w-2} \subset \bd W$.
	The map $i_{\bd W} \colon \bd W \to W$ then identifies the two copies.
	The map $\rho$ simply interchanges them.\greg{Picture here?}

	Let $\beta_X$ and $\beta_Y$ correspond to the positively-directed tangent vectors in $X$ and $Y$, and let $\beta_U$ be an arbitrary local orientation of $U$.
	Abusing notation, we also write $\beta_U$ for the corresponding local orientations of $(U,\bb_X,\bb_Y)$ and $(U,\bb_Y,\bb_X)$.
	The induced co-orientation on $\rho$ can then be written $(\beta_U,\beta_U)$.
	Up to identifying neighborhoods in $W$ with their local models, the boundary co-orientation of $i_{\bd^2 W}$ on $(U,\bb_X,\bb_Y)$ comes from first mapping it into $X \times \R^{w-2}$ and then into $X \times Y \times \R^{w-2}$.
	So from the definition of boundary co-orientations, this co-orientation is $(\beta_U, \beta_U \wedge \beta_X \wedge \beta_Y)$.
	Analogously, the boundary co-orientation of $i_{\bd^2 W}$ on $(U,\bb_Y,\bb_X)$ is $(\beta_U, \beta_U \wedge \beta_Y \wedge \beta_X)$.
	By composition, the co-orientations of $i_{\bd^2 W}\rho$ on $(U,\bb_X,\bb_Y)$ and $(U,\bb_Y,\bb_X)$ are respectively $(\beta_U, \beta_U \wedge \beta_Y \wedge \beta_X)$ and $(\beta_U, \beta_U \wedge \beta_X \wedge \beta_Y)$ as first we interchange then embed.
	But $\beta_U \wedge \beta_X \wedge \beta_Y = -\beta_U \wedge \beta_Y \wedge \beta_X$, which establishes the lemma.
\end{proof}

\begin{remark}\label{R: bd2 oriented}
	A similar, though more familiar, argument using \cref{Con: oriented boundary} shows that if $W$ is oriented then $\bd^2 W$ possess an orientation reversing diffeomorphism.
	In this case, we observe that of our two copies of $U$, one is oriented by \cref{Con: oriented boundary} so that $\beta_X \wedge \beta_Y \wedge \beta_U$ is the local orientation of $W$ and the other is oriented so that $\beta_Y \wedge \beta_X \wedge \beta_U$ is the orientation of $W$.
	Thus the two copies of $U$ have opposite orientations, and again the diffeomorphism simply interchanges the two copies.
\end{remark}

\subsection{Co-orientation of homotopies}\label{S: co-oriented homotopy}

In this section we develop co-orientations related to homotopies.
As the product of two spaces is the same as their fiber product over a point, we have by \cref{P: product boundary} and rearranging the order of components:
\begin{equation*}
	\bd(W \times I) =
	(\bd W \times I) \sqcup (W \times \bd I) =
	(W \times 1) \sqcup (W \times 0) \sqcup (\bd W \times I).
\end{equation*}

Now recall that in general if we have a map $f \colon V \to M$ then we write $\bd f$ for the composition
$$\bd V \xr{i_{\bd V}} V \xr{f} M.$$
We make the following definition:

\begin{definition}\label{D: co-oriented homotopy}
	If $G \colon W \times I \to M$ is a co-oriented map, we say that $G$ is a \textbf{co-oriented homotopy} (or simply a \textbf{homotopy} when working with co-orientations is understood) from $g_0 \colon W \to M$ to $g_1 \colon W \to M$ if $\bd G = g_1 \amalg -g_0\amalg H$, where $g_1$, $-g_0$, and $H$ correspond respectively to the compositions of $G$ with the inclusions into $W \times I$ of $W \times 1$, $W \times 0$, and $\bd W \times I$, taking each with its boundary co-orientation as in \cref{D: boundary co-orientation}.
	In particular, then, $g_0$ is the composition
	$$W=W \times 0 \into W \times I \xr{G} M$$
	with the opposite of the boundary co-orientation coming from $G$.
\end{definition}

Note that, by analogy with homotopies involving oriented manifolds, a homotopy from $g_0$ to $g_1$ involves the oppositely co-oriented $-g_0$ in the boundary formula.
In the oriented case, this arises because if we orient $W$ by, say, $\beta_W$ then to orient $W \times I$ we consider $\beta_W \wedge \beta_I$.
Then at one end of the cylinder $\beta_W$ agrees with the boundary orientation of $\bd (W \times I)$ while at the other end it disagrees.
The situation for co-orientations is analogous.

Although we will not need it, we note that by employing appropriate smoothing near the boundaries in order to accomplish transitivity, co-oriented homotopy can be shown to be an equivalence relation on maps $W \to M$.

In our most common use of homotopies, we begin with a co-oriented map $g \colon W \to M$ and want to construct a homotopic co-oriented map.
For this the following lemma is useful.

\begin{lemma}\label{L: co-orientable homotopies}
	If $g \colon W \to M$ is co-orientable and $G \colon W \times I \to M$ is a homotopy with $g = G(-,t_0)$ for some $t_0 \in I$, then $G$ is co-orientable.
	Conversely, if $G \colon W \times I \to M$ is co-orientable, then so is $g = G(-,t_0) \colon W \to M$ for any $t_0 \in I$.
\end{lemma}

\begin{proof}
	Over $W \times t_0$, we have $\Or(T(W \times I)) \cong \Or(TW \oplus TI) \cong \Or(TW) \otimes \Or (TI) \cong \Or(TW)$, while the restriction of $G^*\Or(TM)$ over $W \times t_0$ is just $g^*\Or(TM)$.
	If $G$ is co-orientable then there is a nowhere-vanishing map of line bundles $\Or(T(W \times I)) \to G^*\Or(TM))$, so restricting to $W \times t_0$ and using the above identifications we obtain a nowhere-vanishing map of line bundles $\Or(TW) \to g^*\Or(TM))$ over $W \times t_0$, hence $g$ is co-orientable.
	Conversely,
	if $g$ is co-orientable, there is a nowhere-vanishing map of line bundles $\Or(TW) \to g^*\Or(TM)$ over $W \times t_0$.
	By general bundle theory \cite[Theorem 3.4.4]{Hus94}, any vector bundle $E$ over $W \times I$ is isomorphic to $E_{t_0} \times I$, where $E_{t_0}$ is the restriction of $E$ to $W \times \{t_0\}$.
	So our nowhere-vanishing map of line bundles over $W \times t_0$ extends to a nowhere vanishing map of line bundles $\Or(T(W \times I)) \to G^*\Or(TM))$ over $W \times I$.
	This implies the co-orientability of $G$.
\end{proof}

\begin{definition}\label{D: homotopy co-orientation}
	Suppose $g_0 \colon W \to M$ is co-oriented and $G \colon W \times I \to M$ is a smooth homotopy with $G(-,0) = g_0$.
	Then, by the above lemma, $G$ is co-orientable and clearly there is exactly one choice of co-orientation for $G$ for which the $W \times 0$ component of $\bd G$ is $-g_0$.
	We call this co-orientation the \textbf{co-orientation on $G$ induced by $g_0$}.
	The map $G$ then determines a co-oriented homotopy from $g_0$ to a co-oriented map $g_1 \colon W \to M$.
	We call this co-orientation on $g_1 = G(-,1)$ the \textbf{induced co-orientation on $g_1$.}
\end{definition}

\begin{remark}\label{R: stationary homotopy}
	In the above scenario, if $g_0$ is co-oriented locally at $x \in W$ by $(\beta_W,\beta_M)$, then at $(x,0) \in W \times I$, the corresponding local co-orientation of $G$ that yields $-g_0$ as a boundary component of $G$ is $(\beta_W \wedge -\beta_I, \beta_M)$, where $\beta_I$ corresponds to the standard orientation of $I$.
	This follows from $(\beta_W,\beta_W \wedge \beta_I)$ being the boundary co-orientation of $W \times 0 \into W \times I$ as $\beta_I$ corresponds to the inward pointing normal at $0 \in I$.
	As we can take $\beta_W \wedge -\beta_I$ to be a consistent orientation along the path given by $\gamma(t) = (x,t)$, we have, recalling the notation from \cref{S: co-orientations}, that $\gamma_*(\beta_W \wedge -\beta_I, \beta_M) = (\beta_W \wedge -\beta_I,\gamma_*\beta_M)$, and at this end of the homotopy the induced local co-orientation of $g_1$ at $x$ is $(\beta_W,\gamma_*\beta_M)$.
	If $G$ is stationary along $x \times I$, then the co-orientation for $g_1$ at $x$ is again $(\beta_W,\beta_M)$ so that the co-orientations of $g_0$ and $g_1$ agree at $x$.
	This observation will be useful below in showing that pullback co-orientations are well defined.
\end{remark}

\begin{comment}
	If $\beta_{W,x}$ is a local orientation of $W$ at a point $x \in W$ and $\gamma$ is a path in $W$ with $\gamma(0) = x$, then $\gamma$ determines a local orientation $\gamma_*\beta_{W,x}$ of $W$ at $\gamma(1)$ via any lift of $\gamma$ to the complement of the zero section of $\Or(TW)$.
	Similarly, given a map $g \colon W \to M$ and a local orientation $\beta_{M,g(x)}$ of $M$ at $g(x)$, the path $g\gamma$ determines a local orientation $(g\gamma)_*\beta_{M,g(x)}$ at $g\gamma(1)$.
	Of course $\gamma_*\beta_{W,x}$ and $(g\gamma)_*\beta_{M,g(x)}$ depend on $\gamma$, but the condition that $g$ be co-orientable is precisely the condition that the pair $(\gamma_*\beta_{W,x}, (g\gamma)_*\beta_{M,g(x)})$ be independent of $\gamma$.

	We use an analogous construction when we have a homotopy $G: W \times I \to M$ and a co-orientation of $g_0 = G(-,0) \colon W \to M$ and wish to define a co-orientation of $g_1 = G(-,1) \colon W \to M$.
	Explicitly, if the pair $(\beta_{W,x},\beta_{M,g(x)})$ is a local co-orientation for $g_0$ at $x \in W$, then we define the \emph{induced co-orientation} for $g_1$ at $x$ to be $(\beta_{W,x},G(x,-)_*\beta_M)$.
	Any $g_t = G(-,t)$ can be co-oriented analogously.

	\begin{definition}
		If $g \colon W \to M$ is co-oriented and $G \colon W \times I \to M$ is a homotopy with $G|_{W \times \{t_0\}} = g$, we define the \textbf{homotopy co-orientation on $G \colon W \times I \to M$ induced by $g$} so that if $(\beta_W,\beta_M)$ is a local co-orientation of $g$ at $x \in W$ then $(\beta_W \wedge \beta_{e_1},\beta_M)$ co-orients $G$ at $(x,t_0)$, where $\beta_{e_1}$ is the local orientation of $I$ corresponding to the standard positively-oriented tangent vector.
		As $G$ is co-orientable, this determines a co-orientation for the whole map $G$.
	\end{definition}

	\begin{lemma}
		Let $g_0 \colon W \to M$ be co-oriented, and let $G \colon W \times I \to M$ be a homotopy with $G(-,0) = g_0$.
		Let $G$ and $g_1 = G(-,1)$ have the induced co-orientations.
		Furthermore, let $G_\bd:(\bd W) \times I \to M$ be the composition $(\bd W) \times I \xr{i_{\bd W} \times \id_I} W \times I \xr{G}M$, co-oriented by taking the homotopy orientation induced from $g_0i_{\bd W} \colon \bd W \to M$ with its standard boundary co-orientation obtained from the co-orientation of $g_0$.
		Then $$\bd G = g_1-g_0-G_\bd.$$
	\end{lemma}
\end{comment}

\begin{lemma}\label{L: co-oriented homotopy}
	Suppose $G \colon W \times I \to M$ is a co-oriented homotopy from $g_0$ to $g_1$ so that $\bd G = g_1 \amalg -g_0\amalg H$ as in \cref{D: co-oriented homotopy}.
	Then $H$ is a homotopy from $-\bd g_0$ to $-\bd g_1$.
\end{lemma}

\begin{proof}
	By definition, $H$ is co-oriented as a boundary component of the co-oriented map $G$, so it remains to check that the induced co-orientations of the ends of $H$ have the expected signs.
	This could be done directly, but rather we use \cref{L: boundary2}, noting that each copy of $\bd W$ (at the top and bottom of the cylinder) can be considered to be a piece of $\bd^2(W \times I)$.
	In particular, applying \cref{L: boundary2} we see the maps $\bd W \to M$ take opposite co-orientations depending on whether we think of them as first mapping $\bd W$ into $W$ and then identifying $W$ as one end of the cylinder versus first including $\bd W$ into $(\bd W) \times I$ and then mapping this to $W \times I$.
	In both cases, we follow with the map $G$.
	As we think of $g_1$ as defined on $W \subset W \times I$ and let $\bd g_1$ denote its boundary, we see that the corresponding map from the top of the cylinder $(\bd W) \times I$ must be $-\bd g_1$.
	Similarly, the map at the bottom of the cylinder is $\bd g_0$.
	The lemma now follows from \cref{D: co-oriented homotopy}.
\end{proof}

\begin{comment}
	\begin{proof}
		We will always denote the local co-orientation of $g_0$ by $(\beta_W,\beta_M)$.
		Recall that the standard co-orientation for the boundary inclusion $i_{\bd V} \colon \bd V \to V$ of a manifold with corners $V$ is $(\beta_{\bd V},\beta_{\bd V} \wedge \beta_\nu)$, where $\nu$ is an outward pointing normal vector.
		If $f \colon V \to M$ is co-oriented, then the composite $\bd V \xr{i_{\bd V}}V \xr{f}M$ is co-oriented by composing the co-orientations of the component maps.

		Now consider $W \times 1 \subset W \times I$.
		At $(x,1)$, the induced homotopy orientation is $(\beta_W \wedge \beta_{e_1},\gamma_*\beta_M)$, where $\gamma$ is the path $I \to G(x,-)$.
		Composing with the standard boundary co-orientation $(\beta_W,\beta_W \wedge \beta_\nu)$ gives $(\beta_W,\gamma_*\beta_M)$, as we can take $\beta_\nu = \beta_{e_1}$.
		This is the the induced co-orientation for $g_1$.

		On the other hand, as the positively-oriented tangent vector to $I$ points inward at $0$, the standard boundary co-orientation of $W \times 0 \to W \times I \to M$ is the composition of $(\beta_W, \beta_W \wedge \beta_\nu) = -(\beta_W, \beta_W \wedge \beta_{e_1})$ with $(\beta_W \wedge \beta_{e_1},\beta_M)$.
		Thus as a piece of the boundary, $G \circ i_{W \times 0} = -g_0$.

		Finally, consider a point $(x,0) \in (\bd W) \times I$ and let $\nu_\bd$ be an outward pointing normal to $W$ at $i_{\bd W}(x)$.
		Then the standard co-orientation of $\bd W$ in $W$ is $(\beta_{\bd W},\beta_{\bd W} \wedge \beta_\nu)$ and the standard co-orientation of the composite $\bd g_0 = g_0i_{\bd W} \colon \bd W \to M$ is the composite of $(\beta_{\bd W},\beta_{\bd W} \wedge \beta_\nu)$ with $(\beta_W,\beta_M)$.
		If $\beta_W = \beta_{\bd W} \wedge \beta_{\nu_\bd}$, this composite co-orientation is $(\beta_{\bd W},\beta_M)$, and otherwise it is
		$-(\beta_{\bd W},\beta_M)$.
		The induced homotopy co-orientation of $G_\bd \colon \bd W \times I \xr{i_{\bd W} \times \id}W \times I \to M$ is then $\pm(\beta_{\bd W} \wedge \beta_{e_1},\beta_M)$, as $\beta_W = \beta_{\bd W} \wedge \beta_{\nu_\bd}$ or not.

		On the other hand, consider $(\bd W) \times I$ as part of the boundary of $W \times I$.
		The standard boundary co-orientation for $(\bd W) \times I$ in $W \times I$ is $(\beta_{(\bd W) \times I},\beta_{(\bd W) \times I}\wedge\beta_{\nu_\bd})$.
		This is independent of the choice of $\beta_{(\bd W) \times I}$, so we may take $\beta_{(\bd W) \times I} = \beta_W \wedge \beta_{e_1}$, where $\beta_{e_1}$ is positively-directed in $I$.
		Then
		$$(\beta_{(\bd W) \times I},\beta_{(\bd W) \times I}\wedge\beta_{\nu_\bd}) = (\beta_{\bd W} \wedge \beta_{e_1},\beta_{\bd W} \wedge \beta_{e_1}\wedge\beta_{\nu_\bd}) = -(\beta_{\bd W} \wedge \beta_{e_1},\beta_{\bd W} \wedge \beta_{\nu_\bd}\wedge\beta_{\nu_I}).$$
		Composing with the induced co-orientation $(\beta_W \wedge \beta_{e_1},\beta_M)$ of $G$ gives the composite $(\bd W) \times I \xr{i_{(\bd W) \times I}}W \times I \xr{G} M$ the co-orientation $-(\beta_{\bd W} \wedge \beta_{e_1},\beta_M)$ if $\beta_W = \beta_{\bd W} \wedge \beta_{\nu_\bd}$ and $(\beta_{\bd W} \wedge \beta_{e_1},\beta_M)$ otherwise.
		Thus, altogether, the $(\bd W) \times I$ boundary component of $W \times I$ with its boundary co-orientation is $-G_\bd$.
	\end{proof}
\end{comment}

\subsection{Co-orientations of pullbacks and fiber products}\label{S: co-orient pullbacks}

In this section, we define a convention for co-orientations of pullbacks and fiber products.
More specifically, if $f \colon V \to M$ and $g \colon W \to M$ are transverse smooth maps from manifolds with corners to a manifold without boundary and $f$ is co-oriented, we define a co-orientation of the pullback $f^* \colon V \times_M W \to W$.
This does not require $g$ to be co-oriented, but if it is, we can compose with $g$ to also get a co-orientation of the fiber product $V \times_M W \to M$.
Ultimately, this will allow us to define cup products of geometric cochains, and the various properties we will demonstrate for co-orientations of fiber products will be reflected in the standard properties for cup products. 

Recall that our canonical realization of the topological pullback $P = V \times_M W$ is defined to be $P = \{(x,y) \in V \times W \mid f(x) = g(y)\}$.
By Joyce \cite[Section 6]{Joy12}, the projections $P \to V$ and $P \to W$ are smooth, and hence so is $f \times_M g \colon P \to M$ given by $(x,y) \to f(x) = g(y)$.
It is not obvious how to define the co-orientations of pullbacks and fiber products, and any such definition will depend on choices of convention.
Our goal in this section is to provide a definition such that co-orientations of fiber products of co-oriented maps possess the following desirable properties:

\begin{enumerate}
	\item Embedding property: If $f \colon V \to M$ and $g \colon W \to M$ are transverse co-oriented embeddings, then their fiber product is just the (embedding of the) intersection of the images of $V$ and $W$ in $M$.\greg{Is this always an embedding? Do we care?}
	If $f$ and $g$ are normally co-oriented (see \cref{normal co-or}), then the intersection should be normally co-oriented with the orientation of the normal bundle of the intersection given by concatenating the orientation for the normal bundle of $V$ followed by the orientation for the normal bundle of $W$.

	\item Associativity: If $V$, $W$, and $X$ are all manifolds with corners mapping to the manifold without boundary $M$ and if all the required transversality assumptions hold for the following statement to involve only well-defined fiber products, then, using Notation \ref{N: implicit notation} to allow the domain to represent also the co-oriented map, we should have 
	$$(V \times_M W) \times_M X = V \times_M (W \times_M X).$$

	\item Graded commutativity: We should have 
	$$V \times_M W = (-1)^{(m-v)(m-w)}W \times_M V$$
	as fiber products, using Notation \ref{N: implicit notation}.
	See \cref{R: precise commutativity}, below, for further remarks on how to interpret this formula.

	\item Leibniz rule: We should have
	$$\bd (V \times_M W) = (\bd V \times_M W)\amalg (-1)^{m-v}(V \times_M \bd W),$$
	 again using Notation \ref{N: implicit notation}.
	This formula will hold for pullbacks as well as fiber products.
\end{enumerate}
Of course the latter two properties will later correspond to the graded commutativity and boundary formulas for geometric cup products.

Before getting into the specifics of the construction, we conclude this introductory section with some important general observations.
In the following subsections, we first show that pullbacks of co-orientable maps are co-orientable; the proof will then become the roadmap for defining a specific pullback co-orientation convention.
We then demonstrate that our convention yields pullback and fiber product co-orientations satisfying a number of desireable properties, including the above Leibniz rule.
Further properties of co-orientations of fiber products, including associativity and graded commutativity, will be proven in \cref{S: exterior products}, using a co-orientation we will define there for direct (exterior) products of co-oriented maps.

\begin{remark}\label{R: pullback representative}
	While our canonical pullback $P$ has been defined as $V \times_M W = \{(x,y) \in V \times W \mid f(x) = g(y)\}$, categorically the pullback $P$ is technically only well defined up to canonical diffeomorphisms.
	In particular, if $P$ and $P'$ are two specific representatives of the pullback categorically, we have commutative diagrams
	\begin{equation*}
		\begin{tikzcd}[column sep=small]
			P \arrow[rr, "\cong"] \arrow[dr] & & P' \arrow[dl] \\
			& W. &
		\end{tikzcd}
	\end{equation*}
	But, as we have observed in \cref{D: tautological co-orientation}, diffeomorphisms come equipped with tautological co-orientations, and so a co-orientation of $P \to M$ determines a unique co-orientation of $P' \to M$ by composition and vice versa.
	Thus, when working with co-orientations of pullbacks, we typically think of selecting a fixed representative $P \to W$ to work with for computations, though not always the canonical one.
	This observation shows that we are free to do so, and typically we will do so tacitly.
	This foreshadows the notion of isomorphic representatives of geometric chains and cochains; see \cref{D: equiv triv and small}.
\end{remark}

\begin{remark}\label{R: precise commutativity}
	This is also a good place to point out exactly what we mean by writing $V \times_M W = (-1)^{(m-v)(m-w)}W \times_M V$ in our graded commutativity statement, as, using the canonical pullbacks, $V \times_M W \subset V \times W$ and $W \times_M V \subset W \times V$ are different spaces, though canonically identified via the map $\tau \colon V \times W \to W \times V$ that switches the coordinates.
	This map fits into a commutative diagram of fiber products
	\[
	\begin{tikzcd}[column sep=tiny]
		V \times_M W \arrow[rr, "\tau"] \arrow[dr] & & W \times_M V \arrow[dl] \\
		& M. &
	\end{tikzcd}
	\]
	Again, $\tau$ has a tautological co-orientation from being a diffeomorphism, and so the statement means that co-orientation of the fiber product $V \times_M W \to M$ and the composite co-orientation of $\tau$ and then the fiber product co-orientation of $W \times_M V \to M$ should differ by the sign $(-1)^{(m-v)(m-w)}$.
\end{remark}

\begin{comment}
	Achieving all of these properties requires a number of non-obvious choices of conventions, as we shall see.
	We begin by providing some general perspective before proceeding to dive in to the general definition of induced co-orientation of a fiber product.

	At a high level, induced co-orientations of fiber products of transverse co-oriented maps will arise from a common alternative description of $P = V \times_M W$ as the preimage of the diagonal $\Delta M = \{(x,x) \in M \times M\}$ under the product map $f \times g \colon V \times W \to M \times M$.
	In other words, $P = (f \times g)^{-1}(\Delta M)$; the reader can easily verify that this is equivalent to the preceding definition.
	Such an
	identification gives rise to the following exact sequences of bundles over $P$, leaving the pullbacks of the bottom row to $P$ implicit in the notation:

	\begin{equation}\label{pullback exact}
		\begin{tikzcd}
			0 \arrow[r] & TP \arrow[r] \arrow[d] & T (V \times W) \arrow[r] \arrow[d] & \nu_{P \subset V \times W} \arrow[r] \arrow[d,"\cong", "i"'] & 0 \\
			0 \arrow[r] & TM \arrow[r,"D\Delta"] & T (M \times M) \arrow[r] & \nu_{\Delta M \subset M \times M} \arrow[r] & 0.
		\end{tikzcd}
	\end{equation}
	Here the two bundles labeled with $\nu$ are normal bundles, and we use the general fact that, given a smooth map of manifolds $h \colon A \to B$ with $C$ immersed in $B$ and $h$ transverse to $C$, the normal bundle of $h^{-1}(C)$ in $A$ is the pullback of the normal bundle of $C$ in $B$.
	In the case at hand, $P = (f \times g)^{-1}(\Delta M) \subset V \times W$ and the transversality of $f$ and $g$ implies that $f \times g$ is transverse to $\Delta M$, and so $\nu_{P \subset V \times W}$ is the pullback of $\nu_{\Delta M \subset M \times M}$; we label this isomorphism $i$.

	\red{D: we should have some more extensive differential topology discussion, pulling from Joyce's oeuvre.
		In particular, the general fact above
		should be developed in the manifolds with corners section, having a ``differential topology'' subsection.
	}
	\red{GBF: Should we do this????}

	Next we recall that if the sequence of vector bundles $0 \to K \to A \to C \to 0$ 	is exact, then we have a splitting $A \cong K \oplus C$ so that $\Or(A) \cong \Or(K) \otimes \Or(C)$.
	Such an
	isomorphism is not canonical, though it can be made concrete by, for example, taking the image in $A$ of an oriented basis of $K$ and following it by the
	preimage in $A$ of an oriented basis of $C$ to choose a representative oriented basis of $A$.
	But in our present development we will not fix an isomorphism in such a way, using only that they are isomorphic and
	later defining such isomorphisms implicitly.

	Applying these ideas to the exact sequences of Equation~\eqref{pullback exact},
	we have an isomorphism
	$\Or(TP) \otimes \Or(\nu_{P \subset V \times W}) \cong \Or (T(V \times W)) \cong \Or(TV) \otimes \Or(TW)$ and similarly for the second exact sequence.
	These fit into a not-necessarily-commutative square
	\begin{equation}\label{co-or stuff}
		\begin{tikzcd}
			\Or (TP) \otimes \Or(\nu_{P \subset V \times W}) \arrow[r, "\cong"] \arrow[d, "\gamma \otimes \Or(i)"] & \Or (T V) \otimes \Or (TW) \arrow[d] \\
			\Or (TM) \otimes \Or( \nu_{\Delta M \subset M \times M}) \arrow[r, "\cong"] & \Or (T M) \otimes \Or (TM).
		\end{tikzcd}
	\end{equation}
	%where $\gamma$ is induced by the standard map from the pullback to $M$
	%\red{[GBF: I do not think we can say this - isn't the whole point of this section is to define $\gamma$ - if there were a standard way to induce this we wouldn't need this whole diagram.]}.
	Note that the vertical maps of this diagram are not in general induced by the maps in Diagram \eqref{pullback exact}, just as in general a map $W \to M$ does not determine its co-orientation.
	However, we can choose the horizontal isomorphisms by our choices of splittings of the short exact sequences, we can let the vertical map on the right be the tensor product of the co-orientations of $V$ and $W$, and we can let
	$\Or(i)$ be determined by the canonical identification of $\nu_{P \subset V \times W}$ with the pullback of $\nu_{\Delta M \subset M \times M}$.
	Such choices will then determine a $\gamma$ making the diagram commute, and this will be our co-orientation of $P \to M$.
	Our choices of horizontal isomorphisms are essentially ``sign conventions.''
	We could for example set the top and bottom isomorphisms
	by the sort of ``basis of kernel followed by basis of cokernel'' convention mentioned above, but
	these ``obvious'' choices would not result in our three desired properties.

	BCOMMENT
	\red{Again, isn't the point that we do not know $\gamma$, so how can we fix the diagram to commute and then use that to determine $\gamma$? I think the idea is that we really need to say that the first diagram somehow determines this diagram via some conventions (what are those?).
		Then we know what the maps on the right are because that's just the tensor product of co-orientations of $V$ and $W$.
		On the left we know $i$ since that's canonical somehow (we still need to look up a good reference for that), and then all these other things determine a unique $\gamma$ so that the diagram commutes.
		This $\gamma$ is our co-orientation for $P$.
		So I think this all needs to be clarified.}
	Any such set of choices then yields
	a definition of pullback co-orientation through a diagram chase.
	In concrete terms, fix a local orientation $\beta_M$ of $M$, and then
	use the co-orientations of $f$ and $g$ to identify compatible local orientations $\beta_V$ of $V$ and $\beta_W$ of $W$.
	A fixed identification
	of the normal bundle of $\Delta M$ with the tangent bundle of $M$ then gives a $\beta_{\nu P \subset V \times W}$ which corresponds to $\beta_M$.
	The pullback co-orientation of the map $P \to M$ can then be defined pair $\beta_M$ with a
	local orientation $\beta_P$ of $P$ so that $\beta_P \otimes \beta_{\nu P \subset V \times W}$ maps to $\beta_V \otimes \beta_W$ under
	the top horizontal isomorphism of Equation~\ref{co-or stuff}.
	ECOMMENT

	In order to obtain these properties we will develop additional structure to control the
	isomorphisms in Diagram~\eqref{co-or stuff}.
	We do this first by working at the level of vector spaces and linear maps over a point before expanding to local definitions and then
	back to the global level.
\end{comment}

\subsubsection{Co-orientability of pullbacks and fiber products}

Before defining pullback and fiber product co-orientations, we first want to ensure that pullbacks and fiber products of co-orientable maps are themselves co-orientable.
The following argument about co-orientability will also provide a roadmap to defining such co-orientations.
We also take the opportunity to observe that pullbacks of proper maps are proper.

\begin{lemma}\label{L: co-orientable pullback}
	Suppose $f \colon V \to M$ and $g \colon W \to M$ are transverse maps of manifolds with corners to a manifold without boundary.
	Then:
	\begin{enumerate}
		\item If $f$ is co-orientable, the pullback $f^* \colon P = V \times_M W \to W$ is co-orientable.
		\item If $f$ is proper, the pullback $f^* \colon P = V \times_M W \to W$ is proper.
	\end{enumerate}
\end{lemma}

Note that $g$ need not be co-orientable or proper for this lemma to apply.

\begin{proof}
	We first show that the pullback of a proper map is proper.
	Recall that if we use the canonical version of $V \times_M W$ as $P = \{(x,y) \mid f(x) = g(y )\}$ then the pullback map $f^*:V\times_MW\to W$ can be identified with the restriction to $V \times_M W$ of the projection $\pi_W: V\times W\to W$. Let us write $f^*=\pi_W$ so that we label our maps
	\[
	\begin{tikzcd}
		P \arrow[r, "\pi_V"] \arrow[d, "\pi_W"] & V \arrow[d, "f"] \\
		W \arrow[r, "g"] & M.
	\end{tikzcd}
	\]
	Suppose $K \subset W$ is compact.
	We have
	\begin{align*}
		\pi_W^{-1}(K)& = \{z \in P \mid \pi_W(z) \in K\}\\
		& \subset \{z \in P \mid g\pi_W(z) \in g(K)\} \\
		& = \{z \in P \mid f\pi_V(z) \in g(K)\} \\
		& = \{z \in P \mid \pi_V(z) \in f^{-1}(g(K))\}.
	\end{align*}
	So $\pi_W^{-1}(K) \subset K \times f^{-1}(g(K)) \subset V \times W$.
	But this is a product of compact sets as $f$ is proper.
	So $\pi_W$ is proper.

	For co-orientability, it suffices by \cref{P: interior co-orientation} to consider the restriction to the interior of $V \times_M W$. Equivalently, we assume that $V$ and $W$ are manifolds without boundary for the remainder of the argument.
	By \cref{L: Quillen}, it suffices to utilize Quillen's approach to co-orientability as discussed in \cref{S: Quillen}.
	We factor $f$ as $V \xhookrightarrow{e} M \times \R^N \to M$, and then we have the pullback diagram
	\begin{equation}\label{D: pullback}
		\begin{tikzcd}
			P \arrow[r, "\pi_V"] \arrow[d] & V \arrow[hookrightarrow, d, "e"] \\
			W \times \R^N \arrow[r, "g \times \id"] \arrow[d] & M \times \R^N \arrow[d, "\pi_M"] \\
			W \arrow[r, "g"] & M.
		\end{tikzcd}
	\end{equation}

	The bottom square is evidently a pullback.
	Thus by elementary topology the top square is a pullback diagram if and only if the composite rectangle is a pullback diagram.
	So by choosing $P$ so that the top square is a pullback diagram, we obtain also the pullback of $W \xr{g} M\xleftarrow{f} V$.

	Since $f$ is transverse to $g$, we have $g \times \id$ transverse to $e$ by \cref{L: all transversality is wrt embeddings}.
	As $e$ is an embedding, it follows that $P = (g \times \id)^{-1}(e(V))$ is a submanifold of $W \times \R^N$ by \cite[Proposition IV.1.4]{Kos93}.
	Furthermore, by \cref{L: Quillen}, $e(V)$ has an orientable normal bundle in $M \times \R^N$, and since the pullback of the normal bundle is the normal bundle of the pullback, again by \cite[Proposition IV.1.4]{Kos93}, it follows that the normal bundle of $P$ in $W \times \R^N$ is also orientable.
	Applying \cref{L: Quillen} again, the map $f^* = \pi_W \colon P \to W$ is co-orientable.
\end{proof}

\begin{remark}\label{R: pullback representative 2}
	As foreshadowed in \cref{R: pullback representative}, we here use a different realization of $P = V \times_M W$.
	Thinking of the top square of the diagram as a pullback square, this $P$ is concretely the subset $\{(v,(w,z)) \in V \times (W \times \R^N) \mid e(v) = (g(w),z)\}$.
	If $\pi_1 \colon M \times \R^N \to M$ and $\pi_2 \colon M \times \R^N \to \R^N$ are the projections, we know by definition that $\pi_1(e(v)) = f(v)$, and this is also $g(w)$, so the points in this realization of $P$ also satisfy $f(v) = g(w)$.
	In fact, there is a canonical diffeomorphism between this realization of $P$ and our standard realization $\{(v,w) \in V \times W \mid f(v) = g(w)\}$ given by $(v,(w,z)) \mapsto (v,w)$ with inverse given by $(v,w) \mapsto (v,(w,\pi_2(e(v))))$.

	We also already observed in the above proof that $P$ can be identified with $(g \times \id)^{-1}(e(V)) \subset W \times \R^N$, though here we need to be a bit more careful as it is not completely clear that $(g \times \id)^{-1}(e(V))$ has the structure of an embedded submanifold with corners.
	In fact, the notions of immersion and embedding are complex when working with manifolds with corners; for example, see \cite[Chapter 3]{MaDo92}.
	However, we know by \cref{L: normal pullback} that $(g|_{S^0(W)} \times \id)^{-1}(e(S^0(V)))$ will be an embedded submanifolds in $S^0(W)\times \R^N$, and due to \cref{pullback,P: interior co-orientation} this will generally suffice for working with co-orientations.
	So, unless noted otherwise, we will below assume such restrictions, or simply that we are working with manifolds without boundary in the first place, whenever we identify $P$ with $(g \times \id)^{-1}(e(V))$.
	Otherwise, we assume that $P$ has its structure as a manifold with corners as a pullback as given in \cite{Joy12}.
	Of course when we do identify $P$ with $(g \times \id)^{-1}(e(V))$, it is via the map $\{(v,(w,z)) \in V \times (W \times \R^N) \mid e(v) = (g(w),z)\} \to W \times \R^N$ given by $(v,(w,z)) \mapsto (w,z)$.
\end{remark}

\begin{corollary}
	If $f \colon V \to M$ and $g \colon W \to M$ are transverse and co-orientable, their fiber product $V \times_M W \to M$ is also co-orientable.
\end{corollary}

\begin{proof}
	By the preceding lemma, the pullback $V \times_M W \to W$ is co-orientable, and the map $g \colon W \to M$ is co-orientable by assumption.
	Now choose co-orientations and compose to get a co-orientation of $P \to M$.
\end{proof}

\subsubsection{Co-orientations of pullbacks and fiber products}\label{S: co-orientation of pullbacks}

The construction in the proof of \cref{L: co-orientable pullback} provides a roadmap to define the co-orientations of pullbacks and fiber products.
For the following definition, refer again to Diagram \eqref{D: pullback}. Again thanks to \cref{P: interior co-orientation}, we can assume that our spaces are all smooth manifolds.

\begin{definition}\label{D: pullback coorient}
	Suppose $f \colon V \to M$ and $g \colon W \to M$ are transverse maps from manifolds without boundary to a manifold without boundary such that $f$ is co-oriented and the normal bundle $\nu V$ of $e(V) \subset M \times \R^N$ is given its Quillen normal orientation as defined in \cref{D: Quillen normal or}.
	Then the pullback $P = V \times_M W = (g \times \id_{\R^N})^{-1}(e(V)) \subset W \times \R^N$ has an oriented normal bundle that is the pullback of $\nu V$, which, by abuse of notation, we also label $\nu V$.
	Let $\beta_P$ and $\beta_W$ be local orientations of $P$ and $W$, and let $\beta_E$ be the standard orientation of $\R^N$.
	Define the \textbf{pullback co-orientation} on $P \to W$ to be the composition of the normal co-orientation $(\beta_P,\beta_P \wedge \beta_{\nu V})$ with the canonical co-orientation $(\beta_W \wedge \beta_E,\beta_W)$.
	In other words, the pullback co-orientation is $(\beta_P,\beta_W)$ if $\beta_P \wedge \beta_{\nu V} = \beta_W \wedge \beta_E$ and $-(\beta_P,\beta_W)$ otherwise.
  Equivalently, the co-orientation of the pullback is the one for which $\beta_{\nu V}$ is the compatible Quillen normal orientation.

	If $V$ and $W$ are manifolds with corners, then we define the \textbf{pullback co-orientation} on $P \to W$ by applying the above construction to the restrictions of $f$ and $g$ to $S^0(V)$ and $S^0(W)$; this is sufficient to determine the co-orientation by \cref{pullback,P: interior co-orientation}.

	Following \cref{D: top pullback}, we sometimes write $f^* \colon P \to W$.
	We also sometimes write $P = g^*V$ to emphasize that $P$ is the pullback of $V$ by $g$ to a manifold over $W$.

	If $g$ is co-oriented, define the \textbf{fiber product co-orientation} on $P \to M$ as the composition of the pullback co-orientation with the co-orientation of $g \colon W \to M$.
\end{definition}

In the definition, note that the Quillen orientation of $\nu V$ is determined by the co-orientation of $f$, and the orientation $\beta_E$ of $\R^N$ is taken to be canonically fixed across all instances.
The other orientations appearing in the definition are $\beta_P$ and $\beta_W$, but the co-orientation of the pullback $f^* \colon P \to W$ does not depend on the particular choices.
For example, suppose we choose $\beta_P$ and $\beta_W$ so that $\beta_P \wedge \beta_{\nu V} = \beta_W \wedge \beta_E$ and hence the pullback co-orientation is $(\beta_P,\beta_W)$.
If we replace $\beta_P$ with $\beta_P' = -\beta_P$, then
$\beta_P' \wedge \beta_{\nu V} = -\beta_P \wedge \beta_{\nu V} = -\beta_W \wedge \beta_E$, so the co-orientation is $-(\beta_P',\beta_W) = -(-\beta_P,\beta_W) = (\beta_P,\beta_W)$.
So the co-orientation is unchanged.
Similarly, the definition is independent of our choice of $\beta_W$.
We will show just below that the definition is independent of $N$ and $e$, as well.

\begin{remark}\label{R: co-or restriction or switch}
	It follows from the definition that reversing the co-orientation of $f \colon V \to M$ reverses the co-orientation of $f^* \colon V \times_M W \to W$.
	Furthermore, if $g \colon W \to M$ is co-oriented, then reversing the co-orientation of either $f$ or $g$ reverses the co-orientation of the fiber product $f \times_M g \colon V \times_M W \to M$.

	It is also clear that the definition is consistent under restrictions to open sets.
	In other words if $x \in V$, $y \in W$ with $f(x) = g(y)$, then replacing $V$, $W$, and $M$ with neighborhoods of $x$, $y$, and $f(x) = g(y)$ yields a co-orientation of the restriction of $f^*$ to a neighborhood of $(x,y) \in V \times_M W$ that is consistent with the co-orientation of all of $f^*$, at least so long as we use the same $N$ and a restriction of $e$, though we will now show independence of these choices as well.
\end{remark}

\begin{lemma}\label{L: pullback co well defined}
	The pullback and fiber product co-orientations do not depend on the choices of $N$, $e$, or the choices of local orientations of $P$, $V$, $W$, or $M$ used in the definition (note that local orientations of $V$ and $M$ are implicit in choosing a Quillen normal orientation for $\nu V$).
\end{lemma}

\begin{remark}
	The pullback co-orientations \textit{do} depend on such choices as the choice to use the standard orientation for $\R^N$ and the choice for the co-orientation of the projection $M \times \R^N \to M$ to be $(\beta_M \wedge \beta_E, \beta_M)$, but these are universal choices that we make once and for all.
	The point is that the pullback and fiber product co-orientations only depend on $f$, $g$, and their co-orientations, after fixing such universal choices that do not depend on $f$ or $g$.
\end{remark}

\begin{comment}
\greg{I've significantly updated the proof of this lemma. The first part of the proof is the same, but the old ending didn't make sense to me anymore, so I wrote a new ending, split off into its own second lemma below. It makes sense to me, and I think it's correct, but it was hard to get the ideas down concretely. So someone else should read through the whole proof and double check it, both for correctness and perhaps to improve the exposition. One very good thing about the new proof is that it's completely organic here - the old version made a forward reference to the Leibniz formula, whose proof can be taken to be independent to this by using a fixed map $e$, but it wasn't a great way to proceed. On the other hand, there was a certain elegance to using a higher level result instead of the hands-on mucking around that's in the proof now.}
\end{comment}

\begin{proof}[Proof of \cref{L: pullback co well defined}]
	It suffices to assume that $P$, $V$, $W$, and $M$ are all manifolds without boundary.
	As the local orientations of $P$, $V$, $W$, and $M$ used in the construction all come in pairs (e.g.\ $\beta_P$ in $(\beta_P,\beta_P \wedge \beta_{\nu V}))$, the construction is independent of those choices.

	Next, suppose we are given an embedding $e \colon V \into M \times \R^N$ and extend it to $e' = (e,0) \colon V \into M \times \R^N \times \R^n$.
	In the construction involving $e$, if we choose $\beta_V$, $\beta_M$ so that $(\beta_V,\beta_M)$ is the co-orientation for $f$, then by the definition of the Quillen orientation, $\nu V$ will be such that $\beta_V \wedge \beta_{\nu V} = \beta_M \wedge \beta_E$.
	If we now increase the dimension of the Euclidean factor to $\R^{N+n}$ and write its canonical local orientation as $\beta_{E^N} \wedge \beta_{E^n}$ while extending $e$ to $e'$, we see that $\nu V$ becomes $\nu V \oplus \underline{\R}^n$ so that $\beta_{\nu V}$ becomes $\beta_{\nu V} \wedge \beta_{E^n}$.
	Pulling back over $W$ we obtain the pullback co-orientation $(\beta_P,\beta_P \wedge \beta_{\nu V} \wedge \beta_{E^n})*(\beta_W \wedge \beta_{E^N} \wedge \beta_{E^n},\beta_W)$.
	This is $(\beta_P,\beta_W)$ if and only if $\beta_P \wedge \beta_{\nu V} \wedge \beta_{E^n} = \beta_W \wedge \beta_{E^N} \wedge \beta_{E^n}$, but this condition is equivalent to having $\beta_P \wedge \beta_{\nu V} = \beta_W \wedge \beta_{E^N}$.
	So the pullback co-orientation is unchanged.

	Now suppose that $e_0 \colon V \to M \times R^{N_0}$ and $e_1 \colon V \to M \times R^{N_1}$ are any two embeddings over $f$.
	By the preceding paragraph, by adding Euclidean factors we can assume $N_0 = N_1 = N$ for some sufficiently large $N$ without changing the pullback co-orientations associated to $e_0$ and $e_1$.
	Let $\pi \colon M \times \R^N \to M$ be the projection to $M$.
	As $\pi e_0 = \pi e_1$ by assumption, the maps $e_0$ and $e_1$ are homotopic over $f$, say by linear homotopies in the Euclidean fibers.
	Let $H \colon V \times I \to M \times \R^N$ be the chosen homotopy.
	Next, by the same argument by which embeddings such as $e_0$ and $e_1$ exist (see the proof of \cref{L: Quillen}), there is an embedding $\td H \colon V \times I \into M \times \R^N \times \R^Q$ for some $Q \geq 0$ so that if $\td \pi \colon M \times \R^N \times \R^Q \to M \times \R^N$ is the projection then $\td \pi \td H = H$.
	If we let $\td e_0, \td e_1$ denote respectively $\td H(-,0), \td H(-,1) \colon V \to M \times \R^N \times \R^Q$, then $\td \pi \td e_0 = e_0$, $\td \pi \td e_1 = e_1$, and $\td H$ is a homotopy from $\td e_0$ to $\td e_1$.
	If then $(e_0,0) \colon V \to M \times \R^N \times \R^Q$ denotes the map $x \mapsto (e_0(x),0)$, then there is also a homotopy from $\td e_0$ to $(e_0,0)$; in fact as $e_0$ is an embedding and $\td \pi \td e_0 = e_0$, we can let these homotopies be linear in the $\R^Q$ factor and constant in the other factors and this homotopy will be an embedding of $V \times I$ into $M\times \R^N \times \R^Q$.
	We can define $\td e_1$, $(e_1,0)$, and an embedded homotopy between them similarly.

	So we have a sequence of three embedded homotopies, say $F_0$, $\td H$, and $F_1$, respectively from $(e_0,0)$ to $\td e_0$, from $\td e_0$ to $\td e_1$, and from $\td e_1$ to $(e_1,0)$.
	Additionally, as for $\td H$, we have $\pi \td \pi F_j(x,t) = f(x)$, so each of the three homotopies is constant in $I$ when projected down to $M$, and in particular each of $(e_0,0)$, $(e_1,0)$, $\td e_0$, and $\td e_1$ is an embedding $V \into M \times \R^{N+Q}$ over $f \colon V \to M$.
	We know from above that the pullback co-orientation obtained from using $(e_0,0)$ and $(e_1,0)$ agree with those obtained from $e_0$ and $e_1$.
	So it suffices to use these homotopies to show successively that $(e_0,0)$, $\td e_0$, $\td e_1$, and $(e_1,1)$ all provide the same pullback co-orientation of $f^*$. This is the content of the following lemma.
\end{proof}

\begin{lemma}\label{L: homotopy pullback independence}
	Suppose that $f \colon V \to M$ and $g \colon W \to M$ are transverse with $f$ co-oriented.
	Let $\pi \colon M \times \R^N \to M$ be the projection, and let $h \colon V \times I \to M \times \R^N$ be an embedding such that $\pi h(x,t) = f(x)$.
	Say that $h$ is a homotopy between the embedding $h_0$ and $h_1$.
	Then the co-orientations of $V \times_M W$ obtained from the above pullback co-orientation construction, using $h_0$ and $h_1$ as the embeddings of $V$, are the same.
\end{lemma}

\begin{proof}
	The composition $\pi h \colon V \times I \to M$ is the constant homotopy with $\pi h(x,t) = f(x)$, so $\pi h$ is also transverse to $g$, and
	\begin{align*}
		(V \times I) \times_M W
		&= \{ (x,t,y)\in V \times I \times M \mid \pi h(x,t) = g(y) \} \\
		&= \{ (x,t,y)\in V \times I \times M \mid f(x) = g(y) \} \\
		&= (V \times_M W) \times I.
	\end{align*}
	So, within the setup of the lemma, we have $V \times I$ embedded in $M \times \R^N$ and $(V \times_M W) \times I$ embedded in $W \times \R^N$ with $g \times \id_{\R^N}$ mapping the latter to the former.
	Let us fix through the proof a particular pair $(x,y)$ with $f(x) = g(y)$.
	Then identifying the spaces with their embeddings, the map $g \times \id$ takes $(x,y,t) \subset (V \times_M W) \times I$ to $(x,t) \subset V$; in fact, as $\pi h$ is a constant homotopy, these correspond to the same path in the fiber $\R^N$.
	To simplify notation, we write $x_0 = (x,0) \in V_0= V \times 0$ and $x_1 = (x,1) \in V_1 = V \times 1$ and identify these points and spaces also with their images under $h$.

	Suppose $\beta_V$ is a local orientation at $x$ and $\beta_M$ is a local orientation at $f(x)$ such that $(\beta_V,\beta_M)$ is the given co-orientation of $f$.
	We can also think of these as co-orientations of the restrictions of $\pi h$ to each $V \times t \subset V \times I$.
	We co-orient the composite $\pi h \colon V \times I \to M$ with the co-orientation $(\beta_V \wedge \beta_I, \beta_M)$ at each $(x,t)$, with $\beta_I$ corresponding to the standard positive orientation of the interval.
	So then if we give each inclusion $V \to V \times t \subset V \times I$ the normal co-orientation $(\beta_V, \beta_V \wedge \beta_I)$ at $x$, the composition of this normal co-orientation with the co-orientation of $\pi h$ is the co-orientation of $f$.

	Now, considering $V \times I$ as embedded via $h$ in $M \times I$, we have the Quillen orientation $\beta_{\nu(V \times I)}$ of the normal bundle $\nu(V \times I)$.
	If we let $\beta_{V \times I} = \beta_V \wedge \beta_I$ at some $(x,t)$, then by definition the Quillen orientation of the normal bundle is the one such that
	\[
	(\beta_V \wedge \beta_I, \beta_V \wedge \beta_I \wedge \beta_{\nu(V \times I)}) * (\beta_M\wedge \beta_E,\beta_M) =
	(\beta_V\wedge \beta_I,\beta_M),
	\]
	i.e.\ such that $\beta_V \wedge \beta_I \wedge \beta_{\nu(V \times I)} = \beta_M \wedge \beta_E$.
	Similarly, if $\nu V_0$ is the normal bundle to $V_0$ at $x_0$, then its Quillen orientation is such that
	\[
	(\beta_V, \beta_V \wedge \beta_{\nu V_0})*(\beta_M \wedge \beta_E,\beta_M) =
	(\beta_V, \beta_M),
	\]
	i.e.\  $\beta_V \wedge \beta_{\nu V_0} = \beta_M \wedge \beta_E$.
	But on $V_0$, the normal bundle $\nu V_0$ is just the sum of $\nu(V \times I)$ and a line bundle tangent to $V \times I$ in the $I$ direction, which we write as $\nu V_0 = \nu(V \times I) \oplus TI$.
	And since the above computations imply $\beta_V \wedge \beta_I \wedge \beta_{\nu(V \times I)} = \beta_V \wedge \beta_{\nu V_0}$ at $x_0$, the relation among the orientations is that $\beta_I \wedge \beta_{\nu(V \times I)} = \beta_{\nu V_0}$.
	By the same argument, we have the equivalent relation at $x_1 \in V_1$.
	The point of all this is that we have now related the orientations of the Quillen normal bundles at $x_0 \in V_0$ and $x_1 \in V_1$ to the orientations there of the single oriented bundle $\nu(V \times I)$.

	Now, following the recipe for the pullback co-orientation of $(V \times I) \times_M W \cong (V \times_M W) \times I$, we pull $V \times I \subset M \times \R^N$ back by $g \times \id$, and the oriented normal bundles of $(V \times_M W) \times I$, $V_0 \times_M W$, and $V_1 \times_M W$ will be the pullbacks of the normal bundles of $V \times I$, $V_0$, and $V_1$.
	Again, we abuse notation and use the same notations for the pulled back bundles and their orientations.
	As we have noted that the path $(x,y) \times I \in (V \times_M W) \times I$ maps to the path $x \times I \in V \times I$, preserving the orientation of $I$, the identification $\nu V_0 = \nu(V \times I) \oplus TI$ continues to hold under the pullback, and similarly at the other end of the homotopy.

	At $(x_0,y) \in (V \times_M W) \times I$, let us now choose a local orientation of the form $\beta_P \wedge \beta_I$ with $\beta_P$ a local orientation of $V \times_M W$.
	By definition, the pullback co-orientation of the projection $(V \times I) \times_M W \to W$ at this point will be $(\beta_P \wedge \beta_I, \beta_P \wedge \beta_I \wedge \beta_{\nu(V \times I)})* (\beta_W \wedge \beta_E,\beta_W)$.
	For convenience, let use suppose we choose $\beta_W$ so that $\beta_P \wedge \beta_I \wedge \beta_{\nu(V \times I)} = \beta_W \wedge \beta_E$, in which case the co-orientation of $(V \times I) \times_M W \to W$ is $(\beta_P \wedge \beta_I, \beta_W)$.
	Similarly, continuing to use the same $\beta_P$ for $V \times_M W$, the co-orientation at $(x_0,y)$ of $V_0 \times_M W \to W$ will be $(\beta_P,\beta_P \wedge \beta_{\nu V_0})* (\beta_W \wedge \beta_E,\beta_W)$.
	As the relationship $\beta_I \wedge \beta_{\nu(V \times I)} = \beta_{\nu V_0}$ is maintained under the pullback, this latter co-orientation is
	$(\beta_P,\beta_P \wedge \beta_I \wedge \beta_{\nu(V \times I)}) * (\beta_W \wedge \beta_E, \beta_W)$, which is then $(\beta_P,\beta_W)$ by our preceding assumption that $\beta_P \wedge \beta_I \wedge \beta_{\nu(V \times I)} = \beta_W \wedge \beta_E$.
	So the pullback co-orientation of $V_0 \times_M W \to W$ is just $(\beta_P, \beta_W)$.
	But now the computations concerning $V_1$ are equivalent.
	Furthermore, as the pullback map $(V \times_M W) \times I \to W$ is also a constant homotopy, the choice of $\beta_W$ so that $\beta_P \wedge \beta_I \wedge \beta_{\nu(V \times I)} = \beta_W \wedge \beta_E$ will be the same: as we transport the orientations $\beta_P$, $\beta_I$, and $\beta_{\nu(V \times I)}$ along $(x,y) \times I$ in $(V \times_M W) \times I$, the corresponding $\beta_W$ will stay constant.
	In particular, the entire equality $\beta_P \wedge \beta_I \wedge \beta_{\nu(V \times I)} = \beta_W \wedge \beta_E$ transports along the image of $(x,y) \times I$ in $(V \times_M W) \times I$, so the co-orientation of $V_1 \times_M W$ at $(x_1,y)$ is also $(\beta_P, \beta_W)$.
\end{proof}

\begin{comment}
	%By \cref{L: co-orientable homotopies,D: homotopy co-orientation}, we can use the embeddings $F_j$ to %co-orient each of our constant homotopies.
	Now, using $F_0$, $\td H$, and $F_1$ respectively in place of $e$ in \cref{D: pullback coorient}, we obtain three co-orientations of the pullbacks $(V \times I) \times_M W \to W$ with the map $V\times I \to M$ being given by $(x,t) \mapsto f(x)$ in all three cases.
	Note that such a map is certainly transverse to $g \colon W \to M$ if $f$ is.
	For specificity, let us focus on the homotopy $F_0$. As we know that the restrictions of $F_0$ to $V \times 0$ and $V \times 1$ are co-orientable, so is $F_0$ by \cref{L: co-orientable homotopies}. If we choose any co-orientation for $F_0$, then by

	We will see below in \cref{leibniz}, whose proof is independent of this one, that when accounting for co-orientations, pullback co-orientations satisfy a Leibniz rule of the following form, again allowing spaces to stand also for their maps:
	$$\bd (V \times_M W) = (\bd V) \times_M W \bigsqcup (-1)^{m-v} V \times_M (\bd W).$$
	Applying this in our current setting, each of our three homotopies will include boundary components of the form $\left(\bd (V\times I) \right)\times_M W$, which by   and, in particular, two of the signed boundary components of each co-oriented $(V \times I) \times_M W \to W$ will be $(V \times \{0\}) \times_M W \to W$ and $(V \times \{1\}) \times_M W \to W$, occurring with opposite signs.
	In other words, with appropriate choices on the co-orientations of the homotopies, by \cref{D: co-oriented homotopy}, we obtain three sequential co-oriented (constant) homotopies from $f$ to itself.
	It now follows by applying \cref{R: stationary homotopy} sequentially that all four copies of $f$ must have the same co-orientation.
	In particular, this is the case for the co-orientations of $f$ obtained from the embeddings $e_0$ and $e_1$.
\end{comment}

\begin{remark}\label{R: local pullback co-orientations}
	The pullback co-orientation is determined locally in the sense that if $U$ is an open subset of $M$ then the pullback co-orientation of $f^{-1}(U) \times_U g^{-1}(U) \to g^{-1}(U)$ will just be the restriction of the pullback co-orientation of $V \times_M W \to W$.
	This is clear from the construction if we co-orient the local pullback using the Quillen co-orientation of $f^{-1}(U) \to U$ obtained from $f^{-1}(U) \xhookrightarrow{e|_{f^{-1}(U)}} U \times \R^N \to U$, the restriction of the Quillen co-orientation for $f$  obtained using the map $V\xhookrightarrow{e}M \times \R^N \times M$.
	But \cref{L: pullback co well defined} says that we are free to make such a choice.
\end{remark}

\begin{remark}\label{R: what products exist}
	We have just shown that, after choosing conventions, the fiber product of two transverse co-oriented maps is co-oriented, and this will eventually lead us to the cup product of geometric cochains.
	Analogously, if $f \colon V \to M$ is co-oriented and $W$ is oriented, then the pullback co-orientation $f^* \colon P = V \times_M W \to W$ provides a way to orient $P$, namely if $\beta_W$ is the given globally-defined orientation of $W$ then we can choose $\beta_P$ so that $(\beta_P, \beta_W)$ is the co-orientation of $f^*$ (this is just the induced orientation discussed in \cref{S: co-orientations}).
	This observation will be utilized below in our construction of the cap product.
	However, somewhat surprisingly, the fiber product of two maps with oriented domains cannot necessarily be oriented, and so there is in general no product of geometric chains and hence, in general, no homology product.
	Such oriented fiber products can be formed if the the codomain $M$ is oriented, as in this case there is an equivalence between orientations of domains and co-orientations of maps.
	But this is not always possible when $M$ is not orientable.
	For example, we recall that the intersection of two orientable $\R P^3$s in the non-orientable $\R P^4$ can be a non-orientable $\R P^2$.
\end{remark}

\subsubsection{Functoriality of pullbacks}

The co-oriented pullback construction is functorial in the following sense.

\begin{proposition}\label{P: pullback functoriality}
	Suppose $f \colon V \to M$ is a co-oriented map from a manifold with corners to a manifold without boundary.
	Then the pullback of $f$ by the identity $\id_M \colon M \to M$ is (diffeomorphic to) $f \colon V \to M$ with the same co-orientation.

	Suppose further that $X$ is a manifold with corners, that $W$ is a manifold without boundary, that $g \colon W \to M$ is transverse to $f$ and that $h \colon X \to W$ is transverse to $V \times_M W \to W$ (or, equivalently by \cref{L: transverse to pullback}, that $gh$ is transverse to $f$).
	Then $(gh)^*V \cong h^*g^*V$ as co-oriented manifolds over $X$.
\end{proposition}

\begin{proof}
	By \cref{pullback,P: interior co-orientation} it suffices to assume that all manifolds are without boundary.

	We first note that there is a diffeomorphism between $V$ and $V \times_M M = \{(v,x) \in V \times M \mid f(v) = x\}$ given by $v \mapsto (v,f(v))$ with inverse $(v,x) \mapsto v$.
	Then, given a compatible Quillen co-orientation of $f$, we can form the pullback diagram as
	\[
	\begin{tikzcd}[column sep=large]
		V \arrow[r, "\id_V"] \arrow[d,"e"] & V \arrow[d,"e"] \\
		M \times \R^N \arrow[r, "\id_{M \times \R^N}"] \arrow[d,"\pi_M"] & M \times \R^N \arrow[d,"\pi_M"] \\
		M \arrow[r, "\id_M"] & M,
	\end{tikzcd}
	\]
	and the conclusion is evident.

	For the second claim, there is a diffeomorphism between $V \times_M X = \{(v,x) \in V \times X \mid f(v) = g(h(x))\}$ and $(V \times_M W) \times_W X = \{((v,w),x) \in (V \times_M W) \times X \mid w = h(x)\}$ given by $(v,x) \mapsto (v,h(x),x)$ and $((v,w),x) \mapsto (v,x)$.
	To see that the last map is well defined notice that $f(v) = g(h(x))$ as $h(x) = w$, and $f(v) = g(w)$ from the assumption $(v,w) \in V \times_M W$.
	Alternatively, these two pullbacks must be diffeomorphic by general category theory, as our pullbacks are pullbacks in the category of manifolds with corners by \cite[Section 6]{Joy12}.

	Compatibility of the co-orientations now follows by considering the following diagram.
	We may assume $V$ and $W$ are manifolds without boundary by \cref{P: interior co-orientation}, and then the map labeled $e^*$ is an embedding, as recalled in the proof of \cref{L: co-orientable pullback}.
	We then note that it is equivalent to pull back the normal bundle $\nu V$ to $X \times \R^N$ either in two steps or all at once.
	\[
	\begin{tikzcd}[column sep=large]
		(V \times_M W) \times_W X \arrow[r, "\pi_{V \times_M W}"] \arrow[d] & V \times_M W \arrow[r, "\pi_V"] \arrow[d,"e^*"] & V \arrow[d, "e"] \\
		X \times \R^N \arrow[r, "h \times \id"] \arrow[d] & W \times \R^N \arrow[r, "g \times \id"] \arrow[d] & M \times \R^N \arrow[d, "\pi_M"] \\
		X \arrow[r, "h"] & W \arrow[r, "g"] & M.
	\end{tikzcd}
	\]
\end{proof}

\subsubsection{Fiber products of immersions}\label{S: co-or product immersion}

Pullbacks have particularly nice descriptions when one or both of the maps are embeddings or immersions.
In addition, these special cases are good for building intuition about the more general situation.

\begin{example}\label{E: V embedded}
	When $f \colon V \to M$ is a co-oriented embedding, the pullback co-orientation is particularly easy to describe. Again, for co-orientation purposes, we can restrict to considering the case where $V$ and $W$ are manifolds without boundary.

	We know from \cref{S: normal orientation} that in this case a co-orientation is equivalent to an orientation $\beta_{\nu V}$ of the normal bundle to $V$ in $M$.
	Then, as $f$ is already an embedding, we can take $N = 0$ in \cref{D: pullback coorient}.
	So the pullback $V \times_M W$ is just the submanifold $g^{-1}(V) \subset W$, co-oriented by $(\beta_P,\beta_W)$, where $\beta_P \wedge \beta_{\nu V} = \beta_W$, the $\nu V$ here being the pullback of the normal bundle to $g^{-1}(V)$ in $W$.
	In other words, the co-orientation of the pullback is just the normal co-orientation corresponding to the pulled back orientation of $\nu V$.

	The case where $g$ is an embedding instead also has a nice description but requires some more technology.
	We will discuss that case below in \cref{E: embedded}.
\end{example}

In the key example when both $f \colon V \to M$ and $g \colon W \to M$ are immersions, we know by \cref{L: fiber product of embeddings,S: normal orientation} that the co-orientations correspond locally to orientations of the normal bundles $\nu V$ and $\nu W$ and the fiber product $V \times_M W \to M$ corresponds locally to the intersection of the images of $V$ and $W$.
In this case our fiber product co-orientation of $V \times_M W \subset M$ is easily determined in terms of the orientations of $\nu V$ and $\nu W$. 
Again, \cref{pullback,P: interior co-orientation} allow us to focus on the case where $V$ and $W$ lack boundaries.

\begin{proposition}\label{P: normal pullback}
	Let $f \colon V \to M$ and $g \colon W \to M$ be transverse co-oriented immersions from manifolds without boundary to a manifold without boundary.
	Let $\nu V$ and $\nu W$ denote the respective normal bundles.
	Choose local Quillen orientations $\beta_{\nu V}$ and $\beta_{\nu W}$ so that the normal co-orientations $(\beta_V, \beta_V \wedge \beta_{\nu V})$ and $(\beta_W, \beta_W \wedge \beta_{\nu W})$ agree with the given co-orientations of $f$ and $g$.
	Then, decomposing the normal bundle of the fiber product $P = V \times_M W \to M$ at any point as $\nu V \oplus \nu W$ and giving it the orientation $\beta_{\nu V} \wedge \beta_{\nu W}$, the fiber product co-orientation agrees with the normal co-orientation, i.e.\
	$$\omega_{f \times_M g} = (\beta_P,\beta_P \wedge \beta_{\nu V} \wedge \beta_{\nu W}).$$
\end{proposition}

That is, if one orients the normal bundle of the intersection by following an oriented basis of the normal bundle of $V$ with an oriented basis of the normal bundle of $W$, the associated normal co-orientation is the fiber product co-orientation.

\begin{proof}
	It suffices to demonstrate this property in the neighborhood of any intersection point, so we may assume that $f$ and $g$ are embeddings of manifolds without corners and consider $x \in V$, $y \in W$ with $f(x) = g(y) = z \in M$.
	Locally, for our Quillen co-orientation of $f$ we can apply the definition of the pullback co-orientation with $N = 0$ and the embedding $e \colon V \into M \times \R^N$ being simply $f$ itself.
	As $N = 0$, in this case $\nu V$ is itself the oriented normal bundle of $e(V) = f(V)$ in $M \times \R^N = M$.
	Pulling back via $g$ to $W$, we obtain the oriented pullback of $\nu V$ (which we also call $\nu V$) as the normal bundle of $P = g^{-1}(V)$ in $W$.
	By definition, the co-orientation of $P \to W$ is then the composition of $(\beta_P,\beta_P \wedge \beta_{\nu V})$ with the standard co-orientation of the projection $W \times \R^N$ to $W$, which in this case is the identity.
	The co-orientation of the fiber product is thus the composition of $(\beta_P,\beta_P \wedge \beta_{\nu V})$ with the co-orientation $(\beta_W, \beta_W \wedge \beta_{\nu W})$ of $g$.
	But this last co-orientation is independent of the choice of $\beta_W$, so we can take $\beta_W = \beta_P \wedge \beta_{\nu V}$.
	Thus we see that the fiber product co-orientation of $P \to M$ is $(\beta_P, \beta_P \wedge \beta_{\nu V} \wedge \beta_{\nu W})$, as desired.
\end{proof}

\subsubsection{The Leibniz rule}

We now verify the Leibniz rule.
We recall from \cref{D: boundary co-orientation} that if $g \colon W \to M$ is co-oriented, then the boundary co-orientation of the composite $\bd W \xr{i_{\bd W}} W \xr{g} M$ is the composite of the boundary co-orientation $(\beta_{\bd W}, \beta_{\bd W} \wedge \beta_{\nu \bd W})$, with $\beta_{\nu \bd W}$ corresponding to the inward pointing normal vector, and the co-orientation of $g$.
Recall also that we often abuse notation by letting $W$ stand for the co-oriented map $g$, and in this case we write $\bd W$ to stand for the co-oriented composite.
We also write $-W$ for $g$ with the opposite co-orientation.
This notation makes the statement of the Leibniz rule, stated just below, comprehensible.
Establishing the rule directly for immersions, for which we can use the normal co-orientations, is a quick exercise; the general case requires more care.


\begin{proposition}[Leibniz rule]\label{leibniz}
	Let $f \colon V \to M$ and $g \colon W \to M$ be transverse maps from manifolds with corners to a manifold without boundary, and suppose $f$ co-oriented.
	Let $V \times_M W \to W$ be the co-oriented pullback.
	Then
	$$\bd (V \times_M W) = \left((\bd V) \times_M W\right) \bigsqcup (-1)^{m-v} \left(V \times_M (\bd W)\right),$$
	interpreting each of these pullback spaces as representing its co-oriented map to $W$; see Notation \ref{N: implicit notation}. Here we interpret $V \times \bd W \to W$ as the composition of the co-oriented pullback $V \times \bd W \to \bd W$ with the boundary immersion $\bd W \to W$ with its boundary co-orientation. 

	If $g$ is also co-oriented then this formula also holds as fiber products mapping to $M$.
\end{proposition}


We first need a lemma.

\begin{lemma}\label{L: pullback boundary normal}
	Let $V$ be a smooth manifold with boundary embedded in a manifold without boundary $M$, and suppose $g \colon W \to M$ is a map from a manifold without boundary and transverse to $V$.
	In this case we know by \cref{L: immersion pullback} that $V \times_M W \to W$ is a local embedding onto $g^{-1}(V)$ and the pullback of the normal bundle $\nu V$ of $V$ in $M$ is the normal bundle of $g^{-1}(V)$ in $W$, and similarly replacing $\bd V$ with $V$.
	Let $w\in \bd (V \times_M W) = (\bd V) \times_M W$, which we identify as a subset of $W$.
	Then there is a vector $b \in T_w(V \times_M W)$, not contained in $T_w((\bd V) \times_M W)$, such that $Dg(b) \in T_{g(w)}V$ but $Dg(b) \notin T_{g(w)}(\bd V)$. Furthermore, both $b$ and $Dg(b)$ can be taken to be inward pointing, toward $V \times_M W$ and $V$, respectively.
	So, roughly speaking, there is a correspondence between the normal direction to $(\bd V) \times_M W$ in $V \times_M W$ and the normal direction to $\bd V$ in $V$ (up to the usual ambiguities in the choices of splittings for normal bundles).
\end{lemma}
\begin{proof}
Let $v = g(w)$, and let $a \in T_v V \subset T_v M$ such that $a \notin T_v (\bd V)$.
As $g$ is transverse to $\bd V$, there are vectors $b \in T_w W$ and $c \in T_v(\bd V)$ such that $a= Dg(b) + c$.
Now rewriting as $Dg(b) = a - c$, the righthand side is contained in $T_v(V)$, but not in $T_v(\bd V)$ or else $a$ would be in $T_v(\bd V)$.
As the tangent space of the pullback at $w$ is the pullback of the tangent spaces of $T_v V$ and $T_w W$ mapping to $T_v M$ by \cref{L: tangent of pullbacks}, we see that the pair $(a-c, b) \in T_v V \times_{T_v M} T_w W$ is in the tangent space of the pullback, and as the derivative of the pullback map $\pi_W \colon V \times_M W \to W$ is just projection in the $W$ co-ordinate, we see that $b$ must be a tangent vector to at $w$ mapping to $Dg(b)$ via $Dg$ as desired.
Note that $b$ cannot be in $T_w((\bd V) \times_M W)$ as such a vector would map to $T_v (\bd V)$.
It is clear that $Dg$ must take inward pointing vectors to inward pointing vectors.
\end{proof}

The lemma will let us identify a normal direction to $\bd V$ in $V$ with a normal direction to $(\bd V) \times_M W$ in $V \times_M W$ in the following argument.

\begin{proof}[Proof of \cref{leibniz}]
	The statement at the level of underlying manifolds with corners is \cite[Proposition 6.7]{Joy12}, so we focus on co-orientations.
	The second statement follows from the first by composing each map with the co-oriented map $g \colon W \to M$ and taking the composite co-orientations.
	We will write $\bd P$ when considering the boundary of the pullback map $P = V \times_M W \to W$ with its boundary co-orientation, and we write $(\bd V) \times_M W$ or $V \times_M (\bd W)$ when considering the maps from these boundary components with their pullback co-orientations, and in general we speak respectively of the ``boundary''  and ``pullback'' co-orientations.
	However, in both cases we write $\beta_{\bd P}$ when speaking of local orientations to simplify the notation.
	In the following arguments, it suffices to consider points in the interiors of $\bd V$ or $\bd W$, as knowing a co-orientation at one such point of each component determines it globally; in other words, we can avoid corners.
	So working locally and separating the two cases, we can assume for each case that only one of $V$ or $W$ has a boundary.

	We first consider the boundary co-orientation.
	By \cref{D: pullback coorient}, at a point of $P = V \times_M W$, the co-orientation $\omega_{f^*}$ of $P \to W$ is $(\beta_P,\beta_W)$ if and only if $\beta_P$ and $\beta_W$ are chosen so that $\beta_P \wedge \beta_{\nu V} = \beta_W \wedge \beta_E$, where $\nu V$ is the pullback to $P$ of the Quillen-oriented normal bundle of $e(V)$ in $M \times \R^N$ for some appropriate embedding $e$ that we fix throughout the following.
	The normal bundle $\nu V$ is given its Quillen orientation corresponding to the co-orientation of $f$.
	By \cref{D: boundary co-orientation}, if $\nu (\bd P)$ is an inward pointing normal of $\bd P$ in $P$ then the boundary co-orientation $\bd P \to W$ is obtained by composing the normal co-orientation of the boundary immersion $(\beta_{\bd P},\beta_{\bd P} \wedge \beta_{\nu (\bd P})$ with $\omega_{f^*}$.
	If we choose $\beta_W$ and $\beta_P$ to satisfy the condition above that  $\beta_P \wedge \beta_{\nu V} = \beta_W \wedge \beta_E$ and then choose $\beta_{\bd P}$ so that $\beta_P = \beta_{\bd P} \wedge \beta_{\nu(\bd P)}$, then we have that $\omega_{\bd P \to W}$ is $(\beta_{\bd P},\beta_W)$.
	We assume in what follows that we have made such choices.

	Now, consider a point in the interior of $(\bd V) \times_M W \subset V \times_M W = P$.
	In the construction of the pullback co-orientation for $(\bd V) \times_M W$, we can take $e \colon \bd V \to M \times \R^N$ to be the restriction to $\bd V$ of our fixed embedding $e$.
	As there are two objects we could reasonable notate $\nu (\bd V)$, throughout the proof we will use $\nu (\bd V)$ for the normal bundle of $\bd V$ in $V$, and we will write $\nu^s(\bd V)$ ($s$ for stable) for the normal bundle of $e(\bd V)$ in $M \times \R^N$.
	Analogously, $\nu(\bd W)$ and $\nu(\bd P)$ will be the normal bundles as submanifolds of $W$ and $P$, respectively.
	Note that $\nu^s(\bd V) \cong \nu(\bd V) \oplus \nu V$.
	Furthermore, by employing \cref{L: pullback boundary normal}, when we pull back $\nu^s(\bd V)$ to the normal bundle of $(\bd V) \times_M W$ in $W \times \R^N$, we maintain this decomposition, identifying the pullback of $\nu V$ with the normal bundle to $V \times_M W$, as usual, and the pullback of $\nu(\bd V)$ with $\nu (\bd P)$, the normal to $\bd P$ in $P$ at our point.
	Employing our standard abuses of notation, we thus write $\beta_{\nu(\bd P)} =  \beta_{\nu(\bd V)}$, identifying the inward pointing normal orientations.

	Next, recall the Quillen orientation $\beta_{\nu V}$ was chosen so that if $(\beta_V, \beta_M)$ is the co-orientation of $V$ (at an appropriate point) then $\beta_V \wedge \beta_{\nu V} = \beta_{M} \wedge \beta_E$.
	Let us fix such $\beta_V$ and $\beta_M$.
	Then if we choose $\beta_{\bd V}$ so that $\beta_V = \beta_{\bd V} \wedge \beta_{\nu(\bd V)}$ then the boundary co-orientation of $\bd V \to M$ will be $(\beta_{\bd V}, \beta_{\bd V} \wedge \beta_{\nu(\bd V)}) * (\beta_V, \beta_M) = (\beta_{\bd V},\beta_M)$, so we can then perform the pullback co-orientation construction of \cref{D: pullback coorient} using this co-orientation of $\bd V$.
	Note that as $\beta_{\nu V}$ is chosen so that $\beta_V \wedge \beta_{\nu V} = \beta_M \wedge \beta_E$, we will have also $\beta_M \wedge \beta_E = \beta_{\bd V} \wedge \beta_{\nu(\bd V)} \wedge \beta_{\nu V}$ and so the corresponding Quillen orientation of $\nu^s(\bd V)$ is $\beta_{\nu^s(\bd V)} = \beta_{\nu(\bd V)} \wedge \beta_{\nu V}$.

	So now applying \cref{D: pullback coorient}, the pullback co-orientation of $(\bd V) \times_M W \to W$ is $(\beta_{\bd P},\beta_W)$ (for our previously chosen $\beta_{\bd P}, \beta_W$) if and only if $\beta_{\bd P} \wedge \beta_{\nu^s(\bd V)} = \beta_W \wedge \beta_E$.
	But $\beta_{\bd P} \wedge \beta_{\nu^s(\bd V)} = \beta_{\bd P} \wedge \beta_{\nu(\bd V)} \wedge \beta_{\nu V}$.
	So the pullback co-orientation is $(\beta_{\bd P},\beta_W)$ if and only if $\beta_{\bd P} \wedge \beta_{\nu(\bd V)} \wedge \beta_{\nu V} = \beta_W \wedge \beta_E$.
	But we have previously identified $\beta_{\nu(\bd V)}$ with $\beta_{\nu(\bd P)}$, and $\beta_{\bd P} \wedge \beta_{\nu(\bd P)} = \beta_P$ by assumption.
	So this condition reduces to $\beta_P \wedge \beta_{\nu V} = \beta_W \wedge \beta_E$, which also holds by previous assumption.
	So the boundar and pullback co-orientations agree at points of $(\bd V) \times_M W$.

	Next, consider a point $x$ in $V \times_M \bd W$.
	As our pullback $V \times_M W$ is embedded neatly in $W \times \R^N$ \cite[Proposition IV.1.4]{Kos93}, it is immediate that, at $x$, the normal bundle of $V \times_M \bd W = (g \times \id)|_{(\bd W) \times \R^N}^{-1}(V)$ in $W \times \R^N$ can be decomposed into the direct sum of the pullback of $\nu V$, which can be identified with a subbundle of $T_x((\bd W) \times \R^N)$, and a 1-dimensional summand that is normal to $(\bd W) \times \R^N$. By projection, we can identify this summand with a normal direction to $\bd W$ in $W$ and again write $\beta_{\nu(\bd P)}=\beta_{\nu(\bd W)}$ for the orientation determined by these inward pointing normals.


	Now, we continue to assume that $(\beta_P, \beta_W)$ is the co-orientation of $V \times_M W \to W$ (and so $\beta_P \wedge \beta_{\nu V} = \beta_W \wedge \beta_E$).
	We choose $\beta_M$ so that $(\beta_W,\beta_M)$ is the co-orientation of $g$ and $\beta_{\bd W}$ so that $(\beta_{\bd W},\beta_W)$ co-orients $i_{\bd W}$, which implies $\beta_W = \beta_{\bd W} \wedge \beta_{\nu(\bd W)}$.
	We also continue to choose $\beta_{\bd P}$ so that $\beta_P = \beta_{\bd P} \wedge \beta_{\nu(\bd P)} = \beta_{\bd P} \wedge \beta_{\nu(\bd W)}$ and hence the boundary co-orientation of $\bd P \to W$ is $(\beta_{\bd P}, \beta_W)$.

	Using these local orientations and applying \cref{D: pullback coorient} to $\bd g \colon \bd W \to M$, the co-orientation of the pullback $V \times_M \bd W \to \bd W$ is $(\beta_{\bd P},\beta_{\bd W})$ (and so the composite co-orientation to $W$ is $(\beta_{\bd P}, \beta_W)$) if and only if $\beta_{\bd P} \wedge \beta_{\nu V} = \beta_{\bd W} \wedge \beta_E$ as local orientations at the image of $x$ in $\bd W \times \R^N$.
	Considering $\bd W \times \R^N \subset W \times \R^N$, this condition holds if and only if $\beta_{\bd P} \wedge \beta_{\nu V} \wedge \beta_{\nu(\bd W)} = \beta_{\bd W} \wedge \beta_E \wedge \beta_{\nu(\bd W)}$ in $W \times \R^N$.
	But as the dimensions as bundles are $\dim(\nu(\bd W)) = 1$ and $\dim(\nu V) = m+N-v$,
	$$\beta_{\bd P} \wedge \beta_{\nu V} \wedge \beta_{\nu(\bd W)} = (-1)^{m+N-v}\beta_{\bd P} \wedge \beta_{\nu(\bd W)} \wedge \beta_{\nu V} = (-1)^{m+N-v}\beta_{\bd P} \wedge \beta_{\nu(\bd P)} \wedge \beta_{\nu V} = (-1)^{m+N-v}\beta_P \wedge \beta_{\nu V} ,$$
	and
	$$\beta_{\bd W} \wedge \beta_E \wedge \beta_{\nu(\bd W)} = (-1)^N\beta_{\bd W} \wedge \beta_{\nu(\bd W)} \wedge \beta_E = (-1)^N\beta_{W} \wedge \beta_E.$$
	So the pullback co-orientation of $V \times_M \bd W \to W$ is $(\beta_{\bd P},\beta_W)$ if and only if $\beta_P \wedge \beta_{\nu V} = (-1)^{m-v}\beta_{W} \wedge \beta_E$.
	But in defining the boundary co-orientation we assumed that $\beta_P \wedge \beta_{\nu V} = \beta_{W} \wedge \beta_E$, so two co-orientations agree or disagree according to the sign $(-1)^{m-v}$ as claimed.
\end{proof}


\begin{comment}
\subsubsection{Graded commutativity}

We demonstrate here graded commutativity of fiber product co-orientations.
We do so only for proper maps, but this will suffice for the purposes of geometric chains and cochains below.
The reader should recall \cref{R: precise commutativity} for a precise explanation of the statement of the proposition.

\begin{proposition}\label{P: graded comm}
	Suppose $f \colon V \to M$ and $g \colon W \to M$ are transverse proper co-oriented maps from manifolds with corners to a manifold without boundary.
	Then as co-oriented fiber products over $M$ we have $\omega_{g \times_M f} = (-1)^{(m-v)(m-w)} \omega_{f \times_M g}$, or, using Notation \ref{R: precise commutativity},
	$$V \times_M W = (-1)^{(m-v)(m-w)} W \times_M V.$$
\end{proposition}
\greg{Can we remore the proper assumption?}

Before proving the proposition, we put it to use in the following example.

\begin{example}\label{E: embedded}
	In \cref{E: V embedded}, we considered pullback co-orientations $V \times_M W \to W$ when $V \into M$ was embedded.
	In this example, we discuss the case where $W$ is embedded, assuming both maps are proper.

	Let $f \colon V \to M$ and $g \colon W \to M$ be transverse proper maps from manifolds with corners to a manifold without boundary.
	Suppose $f$ is co-oriented and $g \colon W \to M$ is an embedding, which we use throughout the example to identify $W$ with its image.
	Let $(x,y) \in V \times_M W$.
	For the remainder of the argument, we fix a local orientation $\beta_M$ at $f(x) \in M$, and we choose $\beta_V$ at $x$ so that $(\beta_V,\beta_M)$ is the co-orientation of $V$ at $x$.
	Furthermore, even though $g$ might not be co-oriented, let us choose a Euclidean neighborhood $U$ of $y$ in $W$ and an arbitrary co-orientation $(\beta_U,\beta_M)$ on the restriction of $g$ to $U$.
	This can be done as $U$ is contractible and so $g|_U$ is co-orientable.


	Although we are interested in $V \times_M U$, the definition of the pullback co-orientation makes it easier to work with $U \times_M V$ when $U$ is embedded; see \cref{E: V embedded}.
	As we have chosen a co-orientation for $U \into M$ and as $V \to M$ comes with a co-orientation, we can consider the fiber product $P_U = U \times_M V \to M$.
	As $U$ is embedded in $M$, we have $P_U = f^{-1}(U) \subset V$.
	If we choose an orientation $\beta_{\nu U}$ of the normal bundle to $U$ in $M$ at $y$ so that $\beta_U \wedge \beta_{\nu U} = \beta_M$, then by \cref{E: V embedded} and the definition of fiber product co-orientation, the map $P_U \xr{f} M$ is co-oriented by $(\beta_P,\beta_M)$, where $\beta_P$ is chosen so that $\beta_P \wedge \beta_{\nu U} = \beta_V$, as usual letting $\nu U$ here also stand for its pullback as a normal bundle of $P_U$ in $V$.
	We note that if we had chosen the opposite co-orientation for $U \into M$ then, as we have fixed $\beta_V$ and $\beta_M$, the result would be to replace our current $\beta_U$ with $-\beta_U$, which would result in also reversing the signs of $\beta_{\nu U}$ and $\beta_P$.
	In particular, the fiber product would have the opposite co-orientation.

	Next, we will apply \cref{P: graded comm}.
	Technically we need $g|_U$ to be proper, but as $W$ is embedded in $M$, we can achieve this by assuming that $U$ is the intersection of $W$ with some Euclidean neighborhood $\mc U$ of $y$ in $M$.
	Then we can replace the co-oriented embedding $U \into M$ with the proper co-oriented embedding $U \into \mc U$ and $f$ with its restriction to $f^{-1}(\mc U)$.
	As pullback co-orientations are determined locally, as noted in \cref{R: local pullback co-orientations}, this will suffice.
	For simplicity, though, we maintain our original notations.

	By \cref{P: graded comm}, we have $U \times_M V = (-1)^{(m-v)(m-w)}V \times_M U$ as co-oriented fiber products over $M$.
	By \cref{R: precise commutativity}, this means that the fiber product $V \times_M U \to M$ with its fiber product co-orientation corresponds to the fiber product $U \times_M V = f^{-1}(U) \xr{f} M$ with co-orientation at $(x,y)$ given by $(-1)^{(m-v)(m-w)}(\beta_P, \beta_M)$.
	But decomposing the fiber product as the pullback $V \times_M U \to U$ and the inclusion $U \into M$, we write $(-1)^{(m-v)(m-w)}(\beta_P, \beta_M)$ as the composite co-orientation
	$$(-1)^{(m-v)(m-w)}(\beta_P, \beta_M) = (-1)^{(m-v)(m-w)}(\beta_P, \beta_U)*(\beta_U, \beta_M).$$
	As $(\beta_U, \beta_M)$ is our chosen co-orientation for $g|_U$, the pullback co-orientation of $V \times_M U \to U$ must be $(-1)^{(m-v)(m-w)}(\beta_P, \beta_U)$.
	But we have already observed that if we had chosen the opposite co-orientation for $g|_U$, that would reverse the signs of both $\beta_U$ and $\beta_P$, so in either case we obtain the same pullback co-orientation for $V \times_M U \to U$.
	In other words, this description of the co-oriented pullback $V \times_M U \to U$ is independent of our choice of co-orientation for $g|_U$, and so it extends globally to give our pullback co-orientation of $V \times_M W \to W$.

	Summarizing then, as a space we have $P = V \times_M W = f^{-1}(W)$, and the pullback and fiber product are the first map and composite of $f^{-1}(W) \xr{f} W \into M$ (analogously to the case where $f$ was an embedding in \cref{E: V embedded}).
	Furthermore, fixing the co-orientation of $f$ as $(\beta_V, \beta_M)$, the co-orientation of the pullback $V \times_M W \to W$ is by $(-1)^{(m-v)(m-w)}(\beta_P, \beta_W)$, where, if we choose any local orientation $\beta_{\nu W}$ for the normal bundle of $W$ in $M$, then $\beta_P \wedge \beta_{\nu W} = \beta_V$ and $\beta_W \wedge \beta_{\nu W} = \beta_M$.

	It is a nice exercise to confirm that this agrees with the computation of \cref{P: normal pullback} when $V$ and $W$ are both embedded.
\end{example}

\cref{P: graded comm} will be proven through a sequence of lemmas.
One common theme is to first show that the statement will be true if it is true at any one point in each connected component of $P$.
As fiber product co-orientations are well defined globally, if they agree or disagree at any one point then they must agree or disagree on the entire connected component.
By \cref{R: precise commutativity} we can also generally identify $V \times_M W$ with $W \times_M V$ as spaces in what follows and focus only on how the two constructions specify co-orientations.

Again, by applying \cref{pullback,P: interior co-orientation}, we may typically focus on interior points of $V$ and $W$, though we cannot assume that the interiors of $V$ and $W$ map properly to $M$, so we will need to be careful at the point where properness comes in.

\begin{lemma}\label{L: im/im}
	If there exists $x \in S^0(V)$ and $y \in S^0(W)$ such that $f(x) = g(y)$ and $f$ and $g$ are respectively immersions at $x$ and $y$, then the theorem holds for the connected component containing $(x,y) \in V \times_M W$.
\end{lemma}

\begin{proof}
	As observed just above, it suffices to prove the desired identity at $(x,y)$.
	By \cref{P: normal pullback}, we have $\omega_{f \times_M g} = (\beta_P, \beta_P \wedge \beta_{\nu V} \wedge \beta_{\nu W})$, noting in the second term that $\beta_P$ is technically the image of the local orientation $\beta_P$ of $P$ now considered as a submanifold of $M$ via the embedding.
	Similarly, \cref{P: normal pullback} gives
	$\omega_{g \times_M f} = (\beta_P,\beta_P \wedge \beta_{\nu W} \wedge \beta_{\nu V})$.
	So the two fiber products differ by $(-1)^{\dim(\nu W)\dim(\nu V)} = (-1)^{(m-v)(m-w)}$ as required.
\end{proof}

\begin{lemma}\label{L: im/sub}
	If there exists $x \in S^0(V)$ and $y \in S^0(W)$ such that $f(x) = g(y)$, $f$ is a submersion at $x$, and $g$ is an immersion at $y$, then the theorem holds for the connected component containing $(x,y) \in V \times_M W$.
\end{lemma}

\begin{proof}
	By \cref{R: co-or restriction or switch} and the above observations, it suffices to consider a neighborhood of $x$ and a chart $U$ around $f(x)$ with respect to which $f$ agrees locally with the projection $U \times \R^N \to U$.
	For simplicity of notation, we can take all of $M$ to be this chart and replace $V$ and $W$ by $f^{-1}(U)$ and $g^{-1}(U)$, respectively.
	For the remainder of the proof, we assume we have done so and return to writing $W$, $M$, and $V = M \times \R^N$.
	We can choose the ordering of the coordinates in $\R^N$ so that $(\beta_M \wedge \beta_E,\beta_M)$ agrees with the co-orientation for $f$.

	We first consider the fiber product co-orientation for $V \times_M W$.
	In this case, we can let our usual embedding $e \colon V \into M \times \R^N$ be the diffeomorphism realizing $V$ as $M \times \R^N$.
	Then as we have written the co-orientation of $f$ as $(\beta_M \wedge \beta_E,\beta_M)$, the normal bundle $\nu V$ is $0$-dimensional and positively oriented.
	The pullback $(g \times \id)^{-1}(V)$ is then all of $W \times \R^N$, and if we also choose $\beta_W$ at $y$ so that $\omega_g = (\beta_W,\beta_M)$, then by \cref{D: pullback coorient} the fiber product co-orientation for $f \times_M g$ is $(\beta_P,\beta_M)$ if and only if $\beta_P = \beta_W \wedge \beta_E$.

	Now consider instead the fiber product co-orientation construction for $W \times_M V$.
	In this case we take $e = g \colon W \to M \times \R^0$.
	The map $f$ is still our projection $M \times \R^N \to M$, and so the pullback is again $f^{-1}(W) = W \times \R^N$, as expected.
	We identify this $W \times \R^N$ with the copy from the preceding paragraph and assign it the same local orientation $\beta_P$ at the corresponding points.
	Note that we can assume the identification to be the identity on the $\R^N$ factors.
	In fact, in both constructions we obtain an embedding of $W \times \R^N$ into $M \times \R^N$ that is the identity on the $\R^N$ factors, and the fiber product is the composition of this embedding with the projection to $M$.
	As usual we let $\nu W$ denote the normal bundle of $W$ in $M$ and its pullback normal bundle to $W \times \R^N$ in $M \times \R^N$.
	We continue to assume coordinates so that $f$ is co-oriented by $(\beta_M \wedge \beta_E, \beta_M)$.
	By \cref{D: pullback coorient} the fiber product co-orientation for $g \times_M f$ is $(\beta_P,\beta_M)$ if and only if $\beta_P \wedge \beta_{\nu W} = \beta_V$.
	But if we continue to let $\beta_P = \beta_W \wedge \beta_E$ and $\beta_V = \beta_M \wedge \beta_E$ as above, then we compute in $M \times \R^N$ that
	\begin{multline*}
		\beta_P \wedge \beta_{\nu W} =
		\beta_W \wedge \beta_E \wedge \beta_{\nu W} =
		(-1)^{N\dim(\nu W)} \beta_W \wedge \beta_{\nu W} \wedge \beta_E \\ =
		(-1)^{N\dim(\nu W)} \beta_M \wedge \beta_E =
		(-1)^{N\dim(\nu W)} \beta_V.
	\end{multline*}
	Here we have used that $\beta_M = \beta_W \wedge \beta_{\nu W}$ by the choice of Quillen local orientation for $\nu W$ in \cref{D: pullback coorient}, taking into account $N = 0$.
	As $\dim(\nu W) = m-w$ and $N = v-m$, the lemma is follows.
\end{proof}

\begin{lemma}\label{L: sub/sub}
	If there exist $x \in S^0(V)$ and $y \in S^0(W)$ such that $f(x) = g(y)$ and $f$ and $g$ are respective submersions at $x$ and $y$, then the theorem holds for the connected component containing $(x,y) \in V \times_M W$.
\end{lemma}

\begin{proof}
	As in the proof of the preceding lemma, we can restrict to a small neighborhood of $f(x) = g(y)$ and relabel to assume that $f$ is the projection $M \times \R^N \to M$ and $g$ is the projection $M \times \R^n \to M$.
	Let $\beta_E$ and $\beta_F$ be local orientations of $\R^N$ and $\R^n$ such that $\omega_f = (\beta_V,\beta_M) = (\beta_M \wedge \beta_E, \beta_M)$ and $\omega_g = (\beta_W,\beta_M) = (\beta_M \wedge \beta_F, \beta_M)$.
	To compute $\omega_{f \times_M g}$, we identify $V$ and $M \times \R^N$ as in the proof of the preceding lemma, so the Quillen normal bundle is trivial and positive.
	The pullback is $W \times \R^N \cong M \times \R^n \times \R^N$.
	And by \cref{D: pullback coorient}, taking $\beta_P = \beta_W \wedge \beta_E$, we have $\omega_{f \times_M g} = (\beta_W \wedge \beta_E, \beta_M) = (\beta_M \wedge \beta_F \wedge \beta_E, \beta_M)$.
	Analogously, $\omega_{g \times_M f} = (\beta_V \wedge \beta_F, \beta_M) = (\beta_M \wedge \beta_E \wedge \beta_F, \beta_M)$.
	The lemma follows as $N = v-m$ and $n = w-m$.
\end{proof}

\begin{corollary}\label{C: if full}
	If there exists $x \in S^0(V)$ and $y \in S^0(W)$ such that $f(x) = g(y)$ and if $f$ and $g$ are of full rank at $x$ and $y$ then \cref{P: graded comm} holds for the connected component containing $(x,y) \in V \times_M W$.
\end{corollary}

\begin{proof}
	If $f \colon V \to M$ is of maximal rank at $x \in V$, it is an immersion or submersion at that point, and similarly for $g$.
	Thus the corollary follows directly from \cref{L: im/im,L: im/sub,L: sub/sub}.
	Note that while the statement of \cref{L: im/sub} assumes $f$ is the submersion and $g$ the immersion, we obtain the opposite case by reversing the roles of $g$ and $f$ in the statement of \cref{P: graded comm}.
\end{proof}

BEGIN OLD COMMENT
	If they are both immersions, apply Lemma \ref{L: im/im}.
	If $f$ is a submersion, it is also a submersion in a neighborhood of $U$ and so it is a submersion on a neighborhood $U$ of $x$.
	Let $A$ be the intersection of $U$ with the interior of $V$.
	By the transversality of $f$ and $g$, if $g(y) = f(x)$, there must be points in a neighborhood of $B$ of $y$ in $W$ that map to $f(A)$, and as a map is a submersion or immersion on an open set, there is a $y'$ in the interior of $B$ that maps to $f(A)$.
	Taking $x'$ in $f^{-1}(y')$, if $g$ is an immersion we apply Lemma \ref{L: im/sub} to $x', y'$, and if $g$ is a submersion we apply Lemma \ref{L: sub/sub}.
	If $f$ is an immersion and $g$ a submersion, we reverse the roles in the argument.
END OLD COMMENT

We now show that for arbitrary proper transverse intersecting $f$ and $g$ there are always homotopies that maintain these properties while taking $f$ and $g$ each to maps of full rank at a given intersection point.
Note that this is where we use the properness assumption in \cref{P: graded comm}.

\begin{lemma}\label{L: make full}
	Let $f \colon V \to M$ and $g \colon W \to M$ be transverse proper maps from manifolds with corners to a manifold without boundary.
	Suppose $x \in S^0(V)$ and $y \in S^0(W)$ such that $f(x) = g(y)$.
	Then there is a smooth homotopy $F \colon V \times I \to M$ such that $F(-,0) = f$, $F(x,t) = f(x)$ for all $t \in I$, $F(-,t)$ is transverse to $g$ for all $t \in I$, and $D(F(-,1))$ has maximal rank at $x$.
\end{lemma}

\begin{proof}
	If $Df$ already has maximal rank at $x$ we can take $F(-,t) = f(-)$.
	So suppose $Df$ does not have maximal rank at $x$.
	We will construct a homotopy fixed outside a small neighborhood of $x$, so we work in local charts, identifying neighborhoods of $x$ and $f(x)$ with $\R^v$ and $\R^m$ so that $x$ and $f(x)$ are at the respective origins.
	By \cite[Sections 1.3-1.4]{GuPo74}, we may also choose the charts so that $D_xf(e_i) = e_i$ for $1 \leq i \leq k$ for some $k<\dim(V) = v$ and $D_xf(e_i) = 0$ for $i>k$.
	Let $\eta \colon \R^v \to \R$ be a smooth function that is $0$ outside a compact neighborhood of the origin and $1$ on a neighborhood of the origin.
	Let $z = (z_1,\ldots,z_v)$ be the coordinates of $\R^v$ and $(z_1, \ldots, z_m)$ the coordinates for $\R^m$.
	Using the charts to identify these Euclidean spaces with their corresponding subsets of $V$ and $M$, we define a homotopy $H \colon \R^v \times I \to \R^m$ by
	$$H(z_1,\ldots,z_v,t) = f(z) + t\eta(z)\left(\sum_{i = k+1}^{\min(v,m)} z_i\right).$$
	Then $H(z,t) = f(z)$ outside a compact neighborhood of the origin in $\R^v$, and so $H$ extends to a homotopy defined on all of $V \times I$.
	Furthermore, $H(0,t) = f(0)$, i.e.\ $H(x,t) = f(x)$.
	Also, for each fixed $t > 0$, we have that
	$(DH(-,t))_0e_i = e_i$ for $i \leq k$ and $(DH(-,t))_0e_i = te_i$ for $k<i \leq \min(v,m)$.
	Thus $DH(-,t)$ has full rank at $x$ for all $t>0$.
	Finally, as $f$ and $g$ are proper and transverse, there is an $\epsilon$ so that $H(-,t)$ and $g$ will be transverse for $0 \leq t \leq \epsilon$ by stability of transversality\footnote{See \cite[Theorem 1.6]{GuPo74} for the case where one manifold is compact and the other is embedded as a closed submanifold. A proof for the current situation is given within our proof of \cref{P: perturb transverse to map}, below.}.\greg{Note to self: Pull this out as a corollary of the proof to refer back to when I get there in proofreading.\label{stability pageref}}
	Now define $F(-,t) = H(-,\epsilon t)$.
\end{proof}

\begin{proof}[Proof of \cref{P: graded comm}]
	As noted above, it suffices to verify the claim at one point of each connected component of $P$.
	As $f$ and $g$ are transverse, if a component $P_0$ of $V \times_M W$ is nonempty, by \cref{pullback} we can find $x \in S^0(V)$ and $y \in S^0(W)$ so that $(x,y) \in P_0$.
	By \cref{L: make full}, we can first perform a homotopy $F \colon V \times I \to M$ of $f$ to $f' \colon V \to M$ and then a homotopy $G \colon W \times I \to M$ of $g$ to $g' \colon W \to M$ so that $f'$ and $g'$ have full rank at $x$ and $y$ respectively and the images of $x$ and $y$ are fixed throughout the homotopies.

	First consider $F$.
	As $f$ is co-oriented, $F$ is co-orientable by \cref{L: co-orientable homotopies}, and we co-orient it via \cref{D: homotopy co-orientation}.
	Then $(V \times I) \times_M W$ will have its fiber product co-orientation, and by \cref{P: product boundary} two of its boundary components will be (topologically) $f \times_M g \colon (V \times 0) \times_M W \to M$ and
	$f' \times_M g \colon (V \times 1) \times_M W \to M$ with appropriate boundary co-orientations.
	Similarly, two of the boundary components of $W \times_M (V \times I)$ will be $g \times_M f: W \times_M (V \times 0) \to M$ and
	$g \times_M f' \colon W \times_M (V \times 1) \to M$ with appropriate co-orientations.
	But now we note that $(V \times I) \times_M W$ and $W \times_M (V \times I)$ are diffeomorphic as spaces mapping to $M$ (see \cref{R: pullback representative}), and so their co-orientations either agree or disagree, but the relations between the co-orientations of these spaces and the co-orientations of their boundary components will be the same, and so the co-orientations of the boundary components will agree or disagree as the co-orientations of $(V \times I) \times_M W$ and $W \times_M (V \times I)$ agree or disagree.
	In other words, identifying these fiber products as in Diagram \eqref{D: comm triangle}, we see that regardless of the actual co-orientations of $F \times_M g$ and $g \times_M F$ we have $\omega_{f \times_M g} = (-1)^{(m-v)(m-w)}\omega_{g \times_M f}$ if and only if $\omega_{f' \times_M g} = (-1)^{(m-v)(m-w)}\omega_{g \times_M f'}$.
	Analogously, using $G$, we have $\omega_{f' \times_M g} = (-1)^{(m-v)(m-w)}\omega_{g \times_M f'}$ if and only if $\omega_{f' \times_M g'} = (-1)^{(m-v)(m-w)}\omega_{g' \times_M f'}$.
	But this last equality is true by \cref{C: if full}.
\end{proof}

BEGIN OLD COMMENT
	OLD PROOF
	As noted, it suffices to verify the claim at one point of each connected component of $P$.
	As $f$ and $g$ are transverse, if a component $P_0$ of $V \times_M W$ is nonempty, by Theorem \ref{pullback} we can find $x \in V$, $y \in W$, each point in the interior, so that $(x,y) \in P_0$.
	By Lemma \ref{L: make full}, we can first perform a homotopy $F \times I \colon V \times I \to M$ of $f$ to $f' \colon V \to M$ and then a homotopy of $G \colon W \times I \to M$ of $g$ to $g' \colon W \to M$ so that $f'$ and $g'$ have full rank at $x$ and $y$ respectively.
	By the construction of Lemma \ref{L: make full}, these properties will continue to hold if we take the homotopies constructed there to be of arbitrarily short duration, and we can assume the homotopies are constant outside of compact neighborhoods of $x$ and $y$ in the interiors of $V$ and $W$.
	Considering $F$ first, by doing so, we can assure that, as spaces but ignoring co-orientations, the pullback $(V \times I) \times_M W$ will have the form of a cylinder $P \times I$ with $F \times_M g$ being a homotopy from $f \times_M g$ to $f' \times_M g$.
	As $f \times_M g$ is co-orientable, so is this homotopy, and, now considering co-orientations, there is a co-orientation for this homotopy making it a co-oriented homotopy from $f \times_M g$ to $f' \times_M g$ (recall Definition \ref{D: co-oriented homotopy} and Section\label{S: co-oriented homotopy} in general).
	Similarly, $g \times_M F$ can be co-oriented as a co-oriented homotopy from $g \times_M f$ to $g \times_M f'$.
	Identifying these pullback as in Diagram \eqref{D: comm triangle}, we see that $\omega_{f \times_M g} = (-1)^{(m-v)(m-w)}\omega_{g \times_M f}$ if and only if $\omega_{f' \times_M g} = (-1)^{(m-v)(m-w)}\omega_{g \times_M f'}$.
	Analogously, this holds if and only if $\omega_{f' \times_M g'} = (-1)^{(m-v)(m-w)}\omega_{g' \times_M f'}$, which holds by Corollary \ref{C: if full}.
END OLD COMMENT

BEGIN OLD COMMENT
	\begin{corollary}
		Let $f \colon V \to M$ and $g \colon W \to M$ be transverse proper maps from manifolds with corners to a manifold without boundary.
		Suppose $x \in V$ and $y \in W$ such that $f(x) = g(y)$.
		Then there are smooth homotopies $F \colon V \times I \to M$ and $G \colon W \times I \to M$ such that $F(-,0) = f$, $G(-,0) = g$, $F(x,t) = f(x) = g(y) = G(y,t)$ for all $t \in I$, $DF(-,1)$ and $DG(0,1)$ have maximal rank at $x$ and $y$ respectively, and $F(-,t)$ is transverse to $G(-,t)$ for all $t \in I$.
	\end{corollary}
	\begin{proof}
		We can apply Lemma \ref{L: make full} twice in succession with time rescalings, once with a homotopy of $f$ that holds $g$ fixed for $t\in[0,1/2]$ and then with a homotopy of $g$.
	\end{proof}

END OLD COMMENT

\end{comment}

\subsubsection{Codimension $0$ and $1$ pullbacks}\label{S: codim 0 and 1 co-or}

The results in this section should be compared with, and justify, the discussion and choices in \cref{E: splitting example 1,E: manifold decomposition}.
They will be useful when working with the creasing construction for geometric cochains introduced in \cref{S: creasing}.

\begin{proposition}\label{P: codim 0 pullback}
	Let $V$ be an embedded codimension $0$ submanifold with corners in the manifold without boundary $M$, and let $f \colon V \to M$ be the embedding, co-oriented by the tautological co-orientation.
	Let $W$ be a manifold with corners and suppose $g \colon W \to M$ is transverse to $f$.
	Then the co-oriented pullback $V \times_M W \to W$ is the inclusion of the codimension $0$ manifold with corners $g^{-1}(V) \into W$, co-oriented by the tautological co-orientation.
	Consequently, if $g$ is co-oriented, the co-oriented fiber product $V \times_M W \to M$ is just the restriction of the co-oriented map $g$ to $g^{-1}(V)$.
\end{proposition}

\begin{proof}
	It is clear topologically that the pullback is $g^{-1}(V)$, and it must be a codimension $0$ manifold with corners in $W$ by Joyce \cite[Theorem 6.4]{Joy12}.
	So we consider co-orientations, for which we can assume $V$ and $W$ are without boundary by  \cref{pullback,P: interior co-orientation}.
	As $f$ is an embedding we may choose $N = 0$ and $e = f$ in \cref{D: pullback coorient}.
	As $V \to M$ is tautologically co-oriented, we can identify $\beta_V$ with $\beta_M$ at any point via the embedding.
	The Quillen normal bundle of $V$ in $M$ is then the positively oriented $\R^0$-bundle.
	So then the definition says that the pullback co-orientation at any point is $(\beta_P, \beta_W)$ when $\beta_P = \beta_W$, i.e.\ the pullback co-orientation is $(\beta_P, \beta_P)$, the tautological co-orientation.
\end{proof}

\begin{corollary}\label{C: cup with identity}
	Let $f \colon V \to M$ be a co-oriented map from a manifold with corners to a manifold without boundary, and let $\id_M \colon M \to M$ be the identity.
	Then both co-oriented fiber products $V \times_M M \to M$ and $M \times_M V \to M$ are again $f \colon V \to M$ with the given co-orientation.
\end{corollary}

\begin{proof}
	The case of $M \times_M V \to M$ follows from the preceding lemma, and the other is the first statement of \cref{P: pullback functoriality}.
\end{proof}

\begin{example}\label{E: codim 0 and 1 co-or as fiber products}
	Let $\phi \colon M \to \R$ be a smooth function from a manifold without boundary to $\R$ that is transverse to $0$.
	Then, as $[0, \infty)$, $(-\infty, 0]$ and $0$ are all embedded manifolds with corners in $\R$, we know (ignoring co-orientations for the moment) that $[0,\infty) \times_\R M = \phi^{-1}([0,\infty))$, that $(-\infty,0] \times_\R M = \phi^{-1}((-\infty,0])$, and that $0 \times_\R M = \phi^{-1}(0)$.
	As in \cref{E: manifold decomposition}, we denote these respectively as $M^+$, $M^-$, and $M^0$.
	By \cite[Proposition 4.2.9]{MaDo92}, the inclusion of $M^0$ into $M$ is a closed embedding and by \cite[Proposition 6.7]{Joy12}, we have $\bd M^\pm = M^0$.

	Suppose the embeddings $M^\pm \into M$ are given the tautological co-orientations of \cref{D: tautological co-orientation}, and let $g \colon W \to M$ be transverse to $M^\pm$, which in this case is equivalent to being transverse to $M^0$, which is also equivalent to $\phi g$ being transverse to $0$ in $\R$.
	Then let $W^\pm = M^\pm \times_M W$, which map onto $g^{-1}(M^\pm)$, diffeomorphically on their interiors.
	By \cref{P: codim 0 pullback}, the pullback co-orientations of $W^\pm \into W$ are again the tautological co-orientations of the embeddings.
	If $g$ is co-oriented, the compositions $W^\pm \into W \to M$ are then the fiber products $M^\pm \times_M W \to M$, and by \cref{P: codim 0 pullback} their co-orientations are just the restrictions of the co-orientation of $g$ to $W^\pm$.
	This agrees with the co-orientations in \cref{E: manifold decomposition}.
\end{example}

\begin{proposition}\label{P: codim 1 co-orient}
	Suppose $V \subset M$ is a closed codimension $1$ submanifold without boundary in the manifold without boundary $M$.
	Further suppose $V$ has oriented normal bundle $\nu$.
	Let the embedding $f \colon V \into M$ be co-oriented by the normal co-orientation $(\beta_V, \beta_V \wedge \beta_\nu)$.
	Let $W$ be a manifold without corners and suppose $g \colon W \to M$ is transverse to $f$.
	Then $W^0 \defeq g^{-1}(V)$ is a codimension $1$ submanifold with corners with oriented pullback normal vector bundle $\nu_0$, and the co-oriented pullback $V \times_M W \to W$ is the embedding $W^0 \into W$, co-oriented by $(\beta_P, \beta_P \wedge \beta_{\nu_0})$.
\end{proposition}

\begin{proof}
	Since the normal bundle of $V$ is $1$-dimensional and oriented, it is the trivial line bundle.
	Embedding the normal bundle as a tubular neighborhood, we can then construct a map $\phi: M \to \R$ so that $V = \phi^{-1}(0)$.
	Then $g$ being transverse to $V$ is equivalent to $\phi g$ being transverse to $0$, so by  \cite[Proposition 4.2.9]{MaDo92} the pullback $g^{-1}(V) = W^0$ is a codimension $1$ submanifold with corners of $W$.
	For the co-orientation, if we take $N = 0$ and $e = f$ in \cref{D: pullback coorient}, then $\nu$ is just our normal bundle $\nu V$ and $\nu_0$ is simply the pullback.
	Then, by definition, the pullback co-orientation is $(\beta_P, \beta_W)$ (at interior points) if and only if $\beta_P \wedge \beta_{\nu_0} = \beta_W$, as claimed.
\end{proof}

\begin{example}\label{E: codim 1 pullbacks}
	We continue with the assumptions and notation of \cref{E: codim 0 and 1 co-or as fiber products}, but now let $V = M^0 = \phi^{-1}(0)$ with normal bundle oriented by the pullback of the standard (positive-direction) orientation of the normal bundle of $0 \in \R$.
	This determines the normal co-orientation of the embedding $M^0 \to M$.
	Then, by \cref{P: codim 1 co-orient}, the pullback co-orientation of $W^0 = M^0 \times_M W \into W$ agrees with the $\phi$-induced co-orientation of $W^0$ defined in \cref{E: manifold decomposition}.
	We can also confirm now, using the Leibniz rule and that the codimension of $M^-$ in $M$ is $0$, that as spaces with co-oriented maps to $W$ we have
	\begin{multline*}
		\bd(W^-) = \bd(M^- \times_M W) = \left( (\bd (M^-)) \times_M W \right) \bigsqcup \left( M^- \times_M \bd W \right)\\
		= \left( -(M^0) \times_M W \right) \bigsqcup \left( M^- \times_M \bd W \right)= -(W^0) \bigsqcup (\bd W)^-.
	\end{multline*}
	Here we also use that the orientation of the normal bundle to $M^0$ is outward pointing from $M^-$ and so disagrees with the inward-pointing normal used to co-orient the boundary inclusion; hence $\bd(M^-) = -(M^0)$.
	We also note that, by the preceding, $(\bd W)^- \to W$ is co-oriented by the tautological co-orientation $(\bd W)^- \to \bd W$ followed by the boundary co-orientation of $i_{\bd W} \colon \bd W \to W$.

	Analogously,
	$$\bd (W^+) = W^0 \bigsqcup (\bd W)^+,$$
	using that the orientation of the normal bundle to $M^0$ is inward pointing for $M^+$.
\end{example}

\begin{comment}
	\begin{proof}
		Again it is clear that $f \times_M g = g|_{W^0}$ as maps.
		Suppose given structural co-orientations.
		As $f$ is an embedding, we have $K_f = 0$, while $V^\perp$ is spanned by $\nu$; note that as $\nu_0$ maps to $\nu$, we write simply $\nu$ in the local decomposition of $TW$.
		The structural co-orientation of $f$ is $(\beta_{W^\perp} \wedge \beta_I, \beta_{W^\perp} \wedge \beta_I \wedge \beta_\nu)$, which agrees with the assumed co-orientation for $f$.
		So the co-orientation of the pullback will be the structural orientation or not according to whether the structural co-orientation of $g$ agrees with the given co-orientation of $g$ or not.
		The structural co-orientation of $g$ is $(\beta_{K_g} \wedge \beta_I \wedge \beta_\nu, \beta_{W^\perp} \wedge \beta_I \wedge \beta_\nu)$, while the structural co-orientation of the pullback is $(\beta_{K_g} \wedge \beta_I, \beta_{W^\perp} \wedge \beta_I \wedge \beta_\nu)$.
		If the given co-orientation for $g$ agrees with the structural orientation, then the claimed co-orientation for $g|_{W^0}$ is the composition of the structural co-orientation for $g$ with $(\beta_{W^0},\beta_{W^0} \wedge \beta_{\nu})$.
		In this last expression we are free to choose any $\beta_{W^0}$ we like, so we can let $\beta_{W^0} = \beta_{K_g} \wedge \beta_I$.
		Then the claimed composite co-orientation is $(\beta_{K_g} \wedge \beta_I, \beta_{W^\perp} \wedge \beta_I \wedge \beta_\nu)$, which agrees with the pullback co-orientation as claimed.
		If the given co-orientation of $g$ disagrees with the structural co-orientation, this changes the sign of both the pullback co-orientation and of the representative of the co-orientation of $g$ used in our composite but not the sign of $(\beta_{W^0},\beta_{W^0} \wedge \beta_{\nu})$.
		So again the pullback co-orientation agrees with the claimed composite.
	\end{proof}
\end{comment}

We can now prove the claim from the end of \cref{E: manifold decomposition}.
We express the following corollary using Notation \ref{N: implicit notation}.

\begin{corollary}\label{C: co-orient W0}
	Suppose the hypotheses and notation of \cref{P: codim 1 co-orient} and suppose $V$ is without boundary.
	Then $(\bd W)^0 = -\bd (W^0)$ as co-oriented maps to $W$, with $W^0$ and $(\bd W)^0 = (gi_{\bd W})^{-1}(V)$ co-oriented as in \cref{P: codim 1 co-orient} as the pullbacks $V \times_M W \to W$ and $V \times_M \bd W \to W$.
\end{corollary}

\begin{proof}
	By \cref{leibniz} and the preceding examples, we have that
	$$\bd (W^0) = \bd (V \times_M W) = (-1)^{m-v} V \times_M \bd W = -V \times_M \bd W = -(\bd W)^0$$
	as spaces mapping to $W$.
\end{proof}

\subsection{Exterior products and their relations with fiber products}\label{S: exterior products}
In this section we consider products of maps that will eventually become the exterior products in geometric homology and cohomology, as well as their relations to fiber products.
While fiber products, which will eventually be used to define cup and intersection products, require special transversality conditions in order to be defined, exterior products are always fully defined.
Of course products of oriented manifolds are familiar objects, so we treat them only briefly in the next section.
Then we consider products of co-oriented maps of manifolds.
In \cref{S: product relations}, we show that the co-oriented fiber product is the pullback by the diagonal map of the co-oriented exterior product, foreshadowing the classical cohomology relation between exterior products and cup products.
This will also allow us to prove associativity of fiber products.

\subsubsection{Exterior products of oriented manifolds}

Recall that we defined the oriented fiber product of oriented manifolds with corners in \cref{S: orientation of fiber products}.
In particular, if $V$ and $W$ are oriented manifolds, we saw in \cref{P: oriented fiber product basic properties} that the oriented fiber product of the maps from $V$ and $W$ to a point is just the standard product $V \times W$ oriented with the usual concatenation convention.
In other words, if $V$ and $W$ are oriented by $\beta_V$ and $\beta_W$, then $V \times W$ is oriented at any point by $\beta_V \wedge \beta_W$.

We observe the following interplay between fibered and exterior products of maps of oriented manifolds more generally.
In our notational shorthand (see \cref{N: implicit notation}), if $f \colon V \to M$ and $h \colon X \to N$, then we let $V \times X$ represent the product map $f \times h \colon M \times N$.

\begin{proposition}\label{P: oriented interchange}
	Suppose $f \colon V \to M$ and $g \colon W \to M$ are transverse maps of oriented manifolds with corners to an oriented manifold without boundary and similarly for $h \colon X \to N$ and $k \colon Y \to N$.
	Then
	$$(V \times X)\times_{M \times N} (W \times Y) = (-1)^{(m-w)(n-y)}(V \times_M W) \times (X \times_N Y)$$
	as oriented manifolds.
\end{proposition}

\begin{proof}
	We first note that the transversality assumptions ensure also that $f \times h$ will be transverse to $g \times k$.
	It is straightforward to verify that these are diffeomorphic spaces, so we focus on the orientations.
	For simplicity, let us write
	$P = (V \times X)\times_{M \times N} (W \times Y)$ and $P' = (V \times_M W) \times (X \times_N Y)$ as oriented manifolds.
	We then write local orientations symbolically as $\beta_P$, etc.
	By the construction of fiber product orientations in \cref{S: orientation of fiber products}, and omitting the pullbacks from the notation, $P$ is oriented so that
	$$\beta_P \wedge \beta_{M \times N} = (-1)^{(w+y)(m+n)}\beta_{V \times X} \wedge \beta_{W \times Y},$$
	or, as (non-fiber) products are oriented by concatenation, we have
	$$\beta_P \wedge \beta_M\wedge\beta_N = (-1)^{(w+y)(m+n)}\beta_V \wedge \beta_X \wedge \beta_W \wedge \beta_Y.$$
	Recall that here we identify $T(M \times N)$ as a summand of $T(V \times X \times W \times Y)$ over $P$ by splitting the derivative $D(f \times h) - D(g \times k)$.
	Similarly, for $V \times_M W$ and $X \times_N Y$ we have
	\begin{align*}
		\beta_{V \times_M W} \wedge \beta_M & = (-1)^{wm}\beta_V \wedge \beta_W \\
		\beta_{X \times_N Y} \wedge \beta_N & = (-1)^{yn}\beta_X \wedge \beta_Y,
	\end{align*}
	using the splittings of $Df-Dg$ and $Dh-Dk$.
	We note that the signs of $Df$, $Dg$, $Dh$, and $Dk$ in all the splitting formulas are consistent in computing the orientations for $P$ and $P'$.

	As $\beta_{P'} = \beta_{V \times_M W} \wedge \beta_{X \times_N Y}$, we have
	\begin{align*}
		\beta_{P'} \wedge \beta_M \wedge \beta_N
		&= \beta_{V \times_M W} \wedge \beta_{X \times_N Y} \wedge \beta_M \wedge \beta_N\\
		& = (-1)^{m(x+y-n)}\beta_{V \times_M W} \wedge \beta_M \wedge \beta_{X \times_N Y} \wedge \beta_N\\
		& = (-1)^{m(x+y-n)+wm+ny}\beta_V \wedge \beta_W \wedge \beta_X \wedge \beta_Y \\
		& = (-1)^{m(x+y-n)+wm+ny+xw}\beta_V \wedge \beta_X \wedge \beta_W \wedge \beta_Y.
	\end{align*}
	So $\beta_P$ differs from $\beta_{P'}$ by $-1$ to the power
	$$m(x+y-n) + wm + ny + xw - (w+y)(m+n).$$
	An elementary computation now shows that this is $(m-w)(n-x)$ as desired.
\end{proof}

\subsubsection{Exterior products of co-oriented maps}

Next we define and study a co-oriented exterior product for co-oriented maps.
In the next subsection, we will see that such products are intimately related to fiber products, and this will allow us to easily prove some properties about fiber products that we have delayed.

\begin{comment}
Before getting to co-orientations, we first show that a product of proper maps is proper.

\begin{lemma}\label{L: proper product}
	If $f \colon V \to M$ and $g \colon W \to N$ are proper maps of spaces then the product map $f \times g \colon V \times W \to M \times N$ is proper.
\end{lemma}

\begin{proof}
	Let $\pi_M,\pi_N$ be the projections of $M \times N$ to $M$ and $N$, and similarly for $\pi_V, \pi_W$.
	Let $K$ be a compact subspace of $M \times N$.
	Then $\pi_M(K)$ and $\pi_N(K)$ are compact, and hence so is $\pi_M(K) \times \pi_N(K) \subset M \times N$, and this set contains $K$.
	So
	$$(f \times g)^{-1}(K) \subset (f \times g)^{-1}(\pi_M(K) \times \pi_N(K)) = f^{-1}(\pi_M(K)) \times g^{-1}(\pi_N(K)).$$
	But now $f^{-1}(\pi_M(K))$ and $g^{-1}(\pi_N(K))$ are compact as $f$ and $g$ are proper and so $(f \times g)^{-1}(K)$ is a closed subset of a compact set, hence compact.
\end{proof}

\end{comment}

\begin{lemma}
	If $f \colon V \to M$ and $g \colon W \to N$ are co-orientable maps of manifolds with corners then the product map $f \times g \colon V \times W \to M \times N$ is co-orientable.
\end{lemma}

\begin{proof}
	We recall that, by definition, a co-orientation of $f$ is equivalent to a choice of isomorphism between the orientation cover $\Or(TV)$ and the pullback $f^*\Or(TM)$ of the orientation cover $\Or(TM)$, and similarly for $g$.

	If we let $\pi_V, \pi_W$ denote the projections of $V \times W$ to $V$ and $W$, then $T(V \times W) \cong \pi_V^*(TV) \oplus \pi_W^*(TW)$, and so $$\Or(T(V \times W)) \cong \Or(\pi_V^*(TV))\otimes\Or(\pi_W^*(TW)) \cong \pi_V^*\Or(TV)\otimes\pi_W^*\Or(TW).$$ Similarly
	\begin{multline*}(f \times g)^*T(M \times N) \cong (f \times g)^*(\pi_M^*(TM) \oplus \pi_N^*(TN))\\
		 \cong (f \times g)^*\pi_M^*(TM) \oplus (f \times g)^*\pi_N^*(TN)) \cong \pi_V^*f^*(TM) \oplus \pi_W^*g^*(TN),
	\end{multline*}
	using that $\pi_M(f \times g) = f\pi_V \colon V \times W \to M$ and $\pi_N(f \times g) = g\pi_W \colon V \times W \to N$.
	So
	\begin{multline*}
		(f \times g)^*\Or(T(M \times N)) \cong \Or((f \times g)^*T(M \times N))\\ \cong \Or(\pi_V^*f^*TM) \otimes \Or(\pi_W^*g^*TN) \cong \pi_V^*f^*\Or(TM) \otimes \pi_W^*g^*\Or(TN).
	\end{multline*}
	Thus if $\Or(TV) \cong f^*\Or(TM)$ and $\Or(TW) \cong g^*\Or(TN)$, we can construct an isomorphism $\Or(T(V \times W)) \cong (f \times g)^*\Or(T(M \times N))$.
\end{proof}

\begin{definition}\label{D: co-oriented exterior}
	If $f \colon V \to M$ and $g \colon W \to N$ are co-oriented maps of manifolds with corners with co-orientations given by isomorphisms $\phi \colon \Or(TV) \to f^*\Or(TM)$ and $\psi \colon \Or(TW) \to g^*\Or(TN)$, we define the \textbf{product co-orientation} of $f \times g \colon V \times W \to M \times N$ by the isomorphism $(-1)^{(m-v)w}\pi_V^*\phi \otimes \pi_W^*\psi$.
	In particular, if at $x \in V$ the co-orientation of $f$ is given locally by $(\beta_V,\beta_M)$ and at $y \in W$ the co-orientation of $g$ is given locally by $(\beta_W,\beta_N)$, then the product co-orientation is locally represented at $(x,y)$ by $$(-1)^{(m-v)w}(\beta_V \wedge \beta_W,\beta_M \wedge \beta_N).$$

	Following our standard convention from \cref{N: implicit notation}, we often write simply $V \times W$ to represent the co-oriented product. 
\end{definition}

\begin{remark}
	The sign in the definition is not at first obvious, though it will be justified in the following lemmas.
	One way to think of it is as follows: If we we take $V$ and $W$ as immersed submanifolds co-oriented by orienting their normal bundles as in \cref{normal co-or}, then $V \times W$ is also immersed, and at an image point we have $T(M \times N) \cong TV \oplus \nu V \oplus TW \oplus \nu W$, letting $\nu V$ and $\nu W$ stand for the normal bundles of $V$ and $W$ in $M$ and $N$, respectively.
	The sign $(-1)^{(m-v)w}$ is the sign needed in the local orientation to permute this to $TV \oplus TW \oplus \nu V \oplus \nu W$ so that we can properly utilize the normal co-orientation for $\nu(V \times W) \cong \nu V \oplus \nu W$.
	While this argument is essentially heuristic, it is borne out in the computations below.
\end{remark}

The following example will be useful in the proof of \cref{T: intersection is cup product}.

\begin{example}\label{E: sphere product}
	Let $S^p$ and $S^q$ be oriented spheres with $p,q>0$.
	Let $V = W = pt$, and let $f \colon V \to S^p$ and $g \colon W \to S^q$ be embeddings to points $x \in S^p$, $y \in S^q$.
	Let $f$ be co-oriented by $(1,\beta_{S^p})$; in other words $V$ is normally co-oriented by the orientation of its normal bundle that agrees with the orientation of $S^p$.
	Let $g$ be co-oriented similarly.
	Then $V \times W$ is represented by the embedding of the point to $(x,y) \in S^p \times S^q$ with normal bundle oriented consistently with the product orientation of $S^p \times S^q$.
	There is no extra sign in this case as $\dim(W) = 0$.
\end{example}

\begin{proposition}\label{P: co-oriented exterior unit}
	Let $f \colon V \to M$ be a co-oriented map of manifolds with corners, and let $g:pt \to pt$ be the unique map with the canonical co-orientation.
	Then $f \times g \colon V \times pt \to M \times pt$ and $g \times f:pt \times V \to pt \times M$ are each isomorphic as co-oriented maps of manifolds with corners to $f \colon V \to M$.
\end{proposition}

\begin{proof}
	This is obvious ignoring co-orientations.
	Considering co-orientations, if $f$ is co-oriented at a point by $(\beta_V,\beta_M)$, then the co-orientation of $f \times g$ is simply $(\beta_V \wedge 1,\beta_M \wedge 1) = (\beta_V,\beta_M)$, noting that
	the sign $(-1)^{(m-v)\cdot 0} = 1$ in this case.
	The case $g \times f$ is similar, though due to the transposition the sign is now $(-1)^{(0-0)v}$, which is again $1$.
\end{proof}

\begin{proposition}\label{P: boundary of exterior product}
	Let $f \colon V \to M$ and $g \colon W \to N$ be co-oriented maps of manifolds with corners and suppose $f \times g \colon V \times W \to M \times N$ is given the product co-orientation.
	Then the boundary co-orientation of $V \times W$ as co-oriented maps to $M \times N$ is $$\bd(V \times W) = (\bd V) \times W \bigsqcup (-1)^{m-v}V \times \bd W.$$
\end{proposition}

\begin{proof}
	We know that this expression is an identity ignoring co-orientations, so we must establish the agreement of the co-orientations for each component.
	As usual, it suffices to consider points in the top dimensional strata of $\bd(V \times W)$.
	In what follows, we fix $\beta_V$, $\beta_W$, $\beta_M$, and $\beta_N$, so that $(\beta_V,\beta_M)$, $(\beta_W,\beta_N)$, and $(-1)^{(m-v)w}(\beta_V \wedge \beta_W,\beta_M \wedge \beta_N)$ denote the co-orientations of $V$, $W$, and $V \times W$ at the point under consideration.

	Let $\nu$ denote an inward pointing normal to $V \times W$ at such a point.
	Then the inclusion $\bd(V \times W) \to V \times W$ is co-oriented at that point by $(\beta_{\bd(V \times W)},\beta_{\bd(V \times W)} \wedge \beta_\nu)$ for any $\beta_{\bd(V \times W)}$.
	If we choose $\beta_{\bd(V \times W)}$ so that $(\beta_{\bd(V \times W)}\wedge\beta_\nu,\beta_M \wedge \beta_N)$ represents the co-orientation of $V \times W \to M \times N$, then from the definition of the boundary co-orientation, the boundary $\bd(V \times W) \to M \times N$ is co-oriented by $(\beta_{\bd(V \times W)},\beta_M \wedge \beta_N)$.
	We fix such a choice in what follows.

	Now suppose our point is more specifically in the top-dimensional stratum of $(\bd V) \times W$.
	If we choose $\beta_{\bd V}$ so that $\beta_{\bd V} \wedge \beta_\nu = \beta_V$, then $\bd V \to M$ is co-oriented by $(\beta_{\bd V},\beta_M)$ and so $(\bd V) \times W \to M \times N$ is co-oriented by $(-1)^{(m-v+1)w}(\beta_{\bd V} \wedge \beta_W,\beta_M \wedge \beta_N)$.
	On the other hand, the co-orientation of $V \times W$ can then be written $(-1)^{(m-v)w}(\beta_{\bd V} \wedge \beta_\nu \wedge \beta_W,\beta_M \wedge \beta_N) = (-1)^{(m-v)w+w}(\beta_{\bd V} \wedge \beta_W \wedge \beta_\nu,\beta_M \wedge \beta_N)$, so the boundary co-orientation of $\bd(V \times W)$ is $$(\beta_{\bd V} \wedge \beta_W,\beta_{\bd V} \wedge \beta_W \wedge \beta_\nu)*(-1)^{(m-v)w+w}(\beta_{\bd V} \wedge \beta_W \wedge \beta_\nu,\beta_M \wedge \beta_N) = (-1)^{(m-v)w+w}(\beta_{\bd V} \wedge \beta_W,\beta_M \wedge \beta_N),$$ 
	which agrees with our co-orientation for $(\bd V) \times W$.

	Next consider a point in the top-dimensional stratum of $V \times \bd W$.
	If we choose $\beta_{\bd W}$ so that $\beta_{\bd W} \wedge \beta_\nu = \beta_W$ then we have $\bd W$ co-oriented by $(\beta_{\bd W},\beta_N)$ and so $V \times \bd W$ is co-oriented by $(-1)^{(m-v)(w-1)}(\beta_{V} \wedge \beta_{\bd W},\beta_M \wedge \beta_N)$.
	On the other hand, the co-orientation of $V \times W$ can now be written $(-1)^{(m-v)w}(\beta_{V} \wedge \beta_{\bd W} \wedge \beta_\nu,\beta_M \wedge \beta_N)$, so the boundary co-orientation of $\bd(V \times W)$ is $(-1)^{(m-v)w}(\beta_{V} \wedge \beta_{\bd W},\beta_{M} \wedge \beta_N)$, which differs from that of $V \times \bd W$ by a factor of $(-1)^{m-v}$.
\end{proof}

\begin{proposition}\label{P: exterior associativity}
	Let $f \colon V \to M$, $g \colon W \to N$, and $h \colon X \to Q$ be co-oriented maps of manifolds with corners.
	Then the co-orientations of $(V \times W) \times X \to M \times N \times Q$ and $V \times (W \times X) \to M \times N \times Q$ agree.
	In other words, forming co-oriented products is associative.
\end{proposition}

\begin{proof}
	If $f,g,h$ are co-oriented by $(\beta_V,\beta_M)$, etc., then both products are co-oriented up to sign by $(\beta_V \wedge \beta_W \wedge \beta_X,\beta_M \wedge \beta_N \wedge \beta_P)$.
	In forming $(V \times W) \times X$ we first have the sign $(-1)^{(m-v)w}$ from $V \times W$, then taking the product with $X$ on the right multiplies by $(-1)^{(m+n-v-w)x}$.
	So the total sign is $(-1)^{(m-v)w+(m+n-v-w)x}$.
	Alternatively, forming $W \times X$ has the sign $(-1)^{(n-w)x}$ and then taking the product with $V$ on the left contributes $(-1)^{(m-v)(w+x)}$.
	So the total sign is $(-1)^{(n-w)x+(m-v)(w+x)}$.
	One readily verifies that these signs agree.
\end{proof}

\begin{comment}
	Dev and Anibal, please check the following arguments carefully as I'm not 100\% confident in it.
	It gives the ``right'' answer but I'm a little uncomfortable divorcing the order of the orientation terms from the order of the manifold terms.
	Of course this happens all the time - even if we think of $\R^2$ as $\R_x \oplus \R_y$ we can still think about the two-form $y \wedge x$, but I'm still a little nervous about maybe having missed a sign somewhere.
	I'm also a little nervous about my trick of taking $a$ and $b$ to be even so that they won't contribute, but the earlier work says that this should be allowable.
	Presumably if I didn't do this there would be a bunch of extra signs that miraculous cancel out, but I'm not so excited about trying that out in detail to see.
\end{comment}

The following lemma provides a nice description of the Quillen co-orientation of a product of co-oriented maps.
Among other things, it will help us to next demonstrate a commutativity property for exterior products of co-oriented maps.
We assume for convenience that our Euclidean factors are even dimensional, which simplifies the computations and will be sufficient for what follows; of course if $V$ embeds in $M \times \R^n$, it also embeds in $M \times \R^{n+1}$, and we have shown that our fiber product co-orientations do not depend on such choices. 

\begin{lemma}\label{L: Quillen product co-orientation}
	Let $f \colon V \to M$ and $g \colon W \to N$ be co-oriented maps from manifolds with corners to manifolds without boundary.
	Consider Quillen co-orientations representing $f$ and $g$ via embeddings $e_V \colon V \into M \times \R^a$ and $e_W \colon W \into N \times \R^b$ with $a$ and $b$ even.
	Denote the normal bundles of $V$ and $W$ in $M \times \R^a$ and $N \times \R^b$ by $\nu V$ and $\nu W$.
	Let $T \colon M \times \R^a \times N \times \R^b \to M \times N \times \R^{a+b}$ be the diffeomorphism that interchanges the middle two factors.
	Then
	$T(e_V \times e_W)$ gives an embedding $V \times W \to M \times N \times \R^{a+b}$ with normal bundle isomorphic to the sum of the pullbacks of $\nu V$ and $\nu W$ by the projections of $V \times W \to M \times N \times \R^a \times \R^b$ to either the first and third factor or the second and fourth factors.
	For simplicity, we simply write $\nu V \oplus \nu W$.

	Then the Quillen normal orientation of the normal bundle of $f \times g \colon V \times W \to M \times N$ is given by $$\beta_{\nu V \oplus \nu W} = \beta_{\nu V} \wedge \beta_{\nu W},$$
	suitably interpreting the relevant coordinates in $M \times N \times \R^a \times \R^b$.
\end{lemma}

The last line simply means that if an element of $\nu V$ has coordinates $(x,y)$ in $M \times \R^a$, then this corresponds to a normal vector with coordinates $(x,0,y,0)$ in $M \times N \times \R^a \times \R^b$ for which we do not create a new notation, and similarly for $\nu_W$. 

\begin{proof}
	Let $\beta_a$ and $\beta_b$ denote the standard orientations for $\R^a$ and $\R^b$.
	By definition, $\nu V$ and $\nu W$ are oriented so that $\beta_V \wedge \beta_{\nu V} = \beta_M \wedge \beta_a$ and $\beta_W \wedge \beta_{\nu W} = \beta_N \wedge \beta_b$.

	By definition, the Quillen orientation of $\nu V \oplus \nu W$ corresponding to the product co-orientation of $V \times W$ is the local orientation $\beta_{\nu V \oplus \nu W}$ such that
	$$(\beta_{V \times W}, \beta_{V \times W} \wedge \beta_{\nu V \oplus \nu W})*(\beta_{M \times N} \wedge \beta_{a+b},\beta_{M \times N}) = (-1)^{(m-v)w}(\beta_V \wedge \beta_W,\beta_M \wedge \beta_N).$$
	Taking $\beta_{M \times N} = \beta_M \wedge \beta_N$ and $\beta_{V \times W} = \beta_V \wedge \beta_W$ and noting $\beta_{a+b} = \beta_a \wedge \beta_b$, this formula becomes
	$$(\beta_V \wedge \beta_W, \beta_V \wedge \beta_W \wedge \beta_{\nu V \oplus \nu W})*(\beta_M \wedge \beta_N \wedge \beta_a \wedge \beta_b,\beta_M \wedge \beta_N) = (-1)^{(m-v)w}(\beta_V \wedge \beta_W,\beta_M \wedge \beta_N).$$
	We also have $$\beta_M \wedge \beta_N \wedge \beta_a \wedge \beta_b = \beta_M \wedge \beta_a \wedge \beta_N \wedge \beta_b,$$ as $a$ is even, so using $\beta_V \wedge \beta_{\nu V} = \beta_M \wedge \beta_a$ and $\beta_W \wedge \beta_{\nu W} = \beta_N \wedge \beta_b$, we require
	$$(\beta_V \wedge \beta_W, \beta_V \wedge \beta_W \wedge \beta_{\nu V \oplus \nu W})*(\beta_V \wedge \beta_{\nu V}\wedge\beta_W \wedge \beta_{\nu W} ,\beta_M \wedge \beta_N) = (-1)^{(m-v)w}(\beta_V \wedge \beta_W,\beta_M \wedge \beta_N).$$
	But now $$\beta_V \wedge \beta_{\nu V}\wedge\beta_W \wedge \beta_{\nu W} = (-1)^{(m-v)w} \beta_V \wedge \beta_{W}\wedge\beta_{\nu V} \wedge \beta_{\nu W},$$
	so, after all that, we see that the Quillen orientation of the normal bundle to $V \times W$ is simply $$\beta_{\nu V \oplus \nu W} = \beta_{\nu V} \wedge \beta_{\nu W}.$$
\end{proof}

\begin{proposition}\label{P: exterior commutativity}
	Let $f \colon V \to M$ and $g \colon W \to N$ be co-oriented maps from manifolds with corners to manifolds without boundary and suppose $f \times g \colon V \times W \to M \times N$ is given the product co-orientation.
	Let $\tau \colon N \times M \to M \times N$ be the diffeomorphism that interchanges coordinates.
	Denote the pullback of $f \times g$ by $\tau$ as $\tau^*(V \times W) \to N \times M$. Then this pullback is diffeomorphic, as co-oriented maps, to $(-1)^{(m-v)(n-w)}W \times V \to N \times M$. In other words,
	$$\tau^*(V \times W) = (-1)^{(m-v)(n-w)}W \times V.$$
\end{proposition}
We assume $M$ and $N$ to be without corners so that we can properly use the pullback construction, which requires transversality, in the proposition and its proof.
However, the pullback is by a diffeomorphism, so this result should extend without problem to more general settings.
\begin{proof}
	This is clear at the level of spaces, so we focus on co-orientations. 
	Let $(\beta_V,\beta_M)$ and $(\beta_W,\beta_N)$ be local representations of the co-orientations at some points.
	The product co-orientation of $V \times W \to M \times N$ is $(-1)^{(m-v)w}(\beta_V \wedge \beta_W,\beta_M \wedge \beta_N)$.

	As in \cref{L: Quillen product co-orientation}, we consider Quillen co-orientations representing $f$ and $g$ via embeddings $e_V \colon V \into M \times \R^a$ and $e_W \colon W \into N \times \R^b \to N$ with $a$ and $b$ even.
	This is sufficient as we know that the pullback construction is independent of $a$ and $b$ for sufficiently large dimensions by \cref{L: pullback co well defined}.
	Assuming the other notation from \cref{L: Quillen product co-orientation}, that lemma tells us that the normal co-orientation of $V \times W$ in $M \times N \times \R^a \times \R^b$ is $$\beta_{\nu V \oplus \nu W} = \beta_{\nu V} \wedge \beta_{\nu W}.$$

	Now using this Quillen co-orientation for $f \times g$, we pull back by the diffeomorphism $\tau \colon N \times M \to M \times N$, obtaining the composition we can write $W \times V \into N \times M \times \R^a \times \R^b \to N \times M$.
	The pulled back normal bundle is still oriented in each fiber as $\beta_{\nu V} \wedge \beta_{\nu W}$ (though of course the order of actual local coordinates have now been jumbled around).
	By definition, the pullback co-orientation is $(\beta_W \wedge \beta_V,\beta_N \wedge \beta_M)$ if and only if $$\beta_W \wedge \beta_V \wedge \beta_{\nu V} \wedge \beta_{\nu W} = \beta_N \wedge \beta_M \wedge \beta_{a+b},$$
	and as $a$ and $b$ are even this last expression is equal to
	$\beta_N \wedge \beta_b \wedge \beta_M \wedge \beta_{a}.$ But by the previous choices, $\beta_V \wedge \beta_{\nu V} = \beta_M \wedge \beta_a$ and $\beta_W \wedge \beta_{\nu W} = \beta_N \wedge \beta_b$.
	So
	\begin{align*}
		\beta_N \wedge \beta_b \wedge \beta_M \wedge \beta_{a}
		& = \beta_W \wedge \beta_{\nu W} \wedge \beta_V \wedge \beta_{\nu V} \\
		& = (-1)^{v(n+b-w)}\beta_W \wedge \beta_V \wedge \beta_{\nu W} \wedge \beta_{\nu V} \\
		& = (-1)^{v(n+b-w)+(m+a-v)(n+b-w)}\beta_W \wedge \beta_V \wedge \beta_{\nu V} \wedge \beta_{\nu W} \\
		& = (-1)^{v(n-w)+(m-v)(n-w)}\beta_W \wedge \beta_V \wedge \beta_{\nu V} \wedge \beta_{\nu W}, \\
	\end{align*}
	where again we use that $a$ and $b$ are even.

	Therefore, the pullback co-orientation is $(-1)^{v(n-w)+(m-v)(n-w)}(\beta_W \wedge \beta_V,\beta_N \wedge \beta_M)$, which is $(-1)^{(m-v)(n-w)}$ times the product co-orientation of $W \times V$, as claimed.
\end{proof}

The next result concerns co-oriented products in which one map is the identity.
We show that such products are simply pullbacks by projections.

\begin{proposition}\label{P: projection pullbacks}
	Let $f \colon V \to M$ be a co-oriented map from a manifolds with corners to a manifold without boundary, and let $\id_N \colon N \to N$ be the identity map of a manifold with corners with the tautological co-orientation.
	\begin{enumerate}
		\item The co-oriented pullback of $V$ by the projection $\pi_1 \colon M \times N \to M$ is $f \times \id_N \colon V \times N \to M \times N$ with its product co-orientation, i.e.\ $\pi_1^*V = V \times N$.
		\item The co-oriented pullback of $V$ by the projection $\pi_2 \colon N \times M \to M$ is $\id_N \times f \colon N \times V \to N \times M$ with its product co-orientation, i.e.\ $\pi_2^*V = N \times V$.
	\end{enumerate}
\end{proposition}

\begin{proof}
	As the projections are submersions, the required transversality conditions to ensure the existence of the pullbacks are met.
	These claims are then clear concerning maps of topological spaces, so we need only verify the co-orientations.

	As in the preceding argument, we start again with an embedding $e \colon V \into M \times \R^a$ to establish a Quillen co-orientation for $f$.
	We again may assume $a$ to be even for simplicity.
	We write the co-orientation of $f$ as $(\beta_V,\beta_M)$, and we let $\nu V$ denote the normal to $e(V)$ and orient $\nu V$ so that $\beta_V \wedge \beta_{\nu V} = \beta_M \wedge \beta_a$, writing $\beta_a$ for the standard orientation of $\R^a$.

	For the second statement, the product co-orientation of $\id_N \times f \colon N \times V \to N \times M$ is $(\beta_N \wedge \beta_V,\beta_N \wedge \beta_M)$, as the domain and codomain of $\id_N$ have the same dimension.
	The pullback by the projection $N \times M \to M$ gives us the embedding/projection sequence $N \times V\xhookrightarrow{\id_N \times e} N \times M \times \R^a \to N \times M$, and the orientations of the pullback of the normal bundle $\nu V$ by $\pi_2 \times \id_{\R^a}$ is again $\beta_{\nu V}$ at each point of $N \times e(V)$.
	So now from \cref{D: pullback coorient}, the pullback has the product co-orientation if and only if $\beta_N \wedge \beta_V \wedge \beta_{\nu V} = \beta_N \wedge \beta_M \wedge \beta_a$.
	But $ \beta_V \wedge \beta_{\nu V} = \beta_M \wedge \beta_a$ by assumption, so this holds.

	For the first statement, the product co-orientation of $f \times \id_N \colon V \times N \to M \times N$ is $(-1)^{(m-v)n}(\beta_V \wedge \beta_N,\beta_M \wedge \beta_N)$.
	The pullback by the projection $M \times N \to M$ gives us an embedding/projection sequence $V \times N \into M \times N \times \R^a \to M \times N$ (where the first arrow is the composition of $e \times \id_N$ with a permutation of coordinates), and the orientation of the pullback of the normal bundle $\nu V$ by $\pi_1 \times \id_{\R^a}$ is again $\beta_{\nu V}$.
	So now from the definition, the pullback has the product co-orientation if and only if $\beta_V \wedge \beta_N \wedge \beta_{\nu V} = (-1)^{(m-v)n}\beta_M \wedge \beta_N \wedge \beta_a$.
	But $ \beta_V \wedge \beta_{\nu V} = \beta_M \wedge \beta_a$ by assumption, so
	\begin{align*}
		\beta_V \wedge \beta_N \wedge \beta_{\nu V}& = (-1)^{(m+a-v)n}\beta_V \wedge \beta_{\nu V} \wedge \beta_N\\
		& = (-1)^{(m+a-v)n}\beta_M \wedge \beta_a \wedge \beta_N\\
		& = (-1)^{(m-v)n}\beta_M \wedge \beta_N \wedge \beta_a.\qedhere
	\end{align*}
\end{proof}

The next proposition shows that the exterior product construction is natural.

\begin{proposition}\label{P: natural exterior}
	Let $f \colon V \to M$ and $g \colon W \to N$ be co-oriented maps of manifolds with corners with $M$ and $N$ having no boundaries.
	Let $h \colon X \to M$ and $k \colon Y \to N$ be maps of manifolds with corners that are transverse to $f$ and $g$ respectively.
	Then $(h \times k)^*(V \times W) = h^*V \times k^*W$ as spaces with co-oriented maps to $X \times Y$.
\end{proposition}

\begin{proof}
	It is easy to show that $h \times k$ is transverse to $f \times g$, so we focus on co-orientation.
	As in the preceding proofs, we write the Quillen orientation of the normal bunle to the embedded image of $V \times W \into M \times N \times \R^a \times \R^b$ as $\beta_{\nu V \oplus \nu W} = \beta_{\nu V} \wedge \beta_{\nu W}$.
	Then the pullback $P = (h \times k)^*(V \times W)$ is co-oriented by $(\beta_P,\beta_{X \times Y})$ if and only if we choose $\beta_P$ and $\beta_{X \times Y}$ so that
	$$\beta_{P} \wedge \beta_{\nu V} \wedge \beta_{\nu W} = \beta_{X \times Y} \wedge \beta_{a+b}.$$

	On the other hand, we know $h^*V$ is co-oriented by $(\beta_{h^*V},\beta_X)$ if an only if $\beta_{h^*V} \wedge \beta_{\nu V} = \beta_X \wedge \beta_a$, and $k^*W$ is co-oriented by $(\beta_{k^*W},\beta_Y)$ if an only if $\beta_{k^*W} \wedge \beta_{\nu W} = \beta_Y \wedge \beta_b$.
	Assuming these hold, then $h^*V \times k^*W$ is co-oriented by $$(-1)^{(x-(v+x-m))(w+y-n)}(\beta_{h^*V} \wedge \beta_{k^*W},\beta_X \wedge \beta_Y) = (-1)^{(m-v)(w+y-n)}(\beta_{h^*V} \wedge \beta_{k^*W},\beta_X \wedge \beta_Y).$$

	Now, continuing to assume the equalities of the last paragraph and taking $a$ and $b$ even as usual, we have
	\begin{align*}
		\beta_{h^*V} \wedge \beta_{k^*W} \wedge \beta_{\nu V} \wedge \beta_{\nu W}
		& = (-1)^{(w+y-n)(m-v)}\beta_{h^*V} \wedge \beta_{\nu V} \wedge \beta_{k^*W} \wedge \beta_{\nu W}\\
		& = (-1)^{(w+y-n)(m-v)}\beta_X \wedge \beta_a \wedge \beta_Y \wedge \beta_b \\
		& = (-1)^{(w+y-n)(m-v)}\beta_X \wedge \beta_Y \wedge \beta_a \wedge \beta_b.
	\end{align*}
	So if we take $\beta_P = (-1)^{(w+y-n)(m-v)}\beta_{h^*V} \wedge \beta_{k^*W}$ and $\beta_{X \times Y} = \beta_X \times \beta_Y$, then this also gives us $\beta_{P} \wedge \beta_{\nu V} \wedge \beta_{\nu W} = \beta_{X \times Y} \wedge \beta_{a+b}$.
	Therefore,
	$(h \times k)^*(V \times W)$ is also co-oriented by
	$$(\beta_P,\beta_X \wedge \beta_Y) = ((-1)^{(w+y-n)(m-v)}\beta_{h^*V} \wedge \beta_{k^*W},\beta_X \wedge \beta_Y).$$ We conclude $(h \times k)^*(V \times W) = h^*V \times k^*W$.
\end{proof}

\subsubsection{Applications of co-oriented exterior products to co-oriented fiber products}\label{S: product relations}

Having established some elementary properties for our exterior product, we can now relate co-oriented exterior products to co-oriented fiber products.
These relationships correspond to those in singular cohomology between the exterior and cup products of cochains, though one very nice feature is that in our context these relationships all hold ``on the nose'' at the cochain level and can be proven without any need for Alexander-Whitney maps or any other approximations to the diagonal.
This will also be useful for proving some properties of the co-oriented fiber product that we have deferred so far, inclusing associativity and graded commutativity.

We start with the following version of a well-known fact. 


\begin{lemma}\label{L: alternative transversality}
	Suppose $f \colon V \to M$ and $g \colon W \to M$ are co-oriented maps from manifolds with corners to a manifold without boundary.
	Let $\diag \colon M \to M \times M$ be the diagonal map $\diag(x) = (x,x)$.
	Then $f$ and $g$ are transverse if and only if $f \times g$ is transverse to $\diag$.
\end{lemma}
\begin{proof}
	As transversality is determined stratum by stratum, it suffices to suppose $V$ and $W$ are manifolds without boundary. 
	We briefly recall the argument in this case.
	
	First suppose $f$ and $g$ are transverse and that $f(x) = g(y) = z \in M$.
	Then $Df(T_xV)+Dg(T_yW) = T_zM$.
	Now suppose $(a,b) \in T_{(z,z)}(M \times M) \cong T_zM \oplus T_zM$.
	Write $a = v_a+w_a$ with $v_a \in Df(T_xV)$ and $w_a \in Dg(T_yW)$.
	Similarly, write $v = v_b+w_b$.
	Then
	\begin{align*}
		(a,b)& = (v_a+w_a,v_b+w_b)\\
		& = (v_a-v_b+v_b+w_a, v_b+w_a-w_a+w_b)\\
		& = (v_a-v_b,-w_a+w_b)+(v_b+w_a, v_b+w_a),
	\end{align*}
	which is in $D(f \times g)(T_xV \times T_yW)+D\diag(T_zM)$.
	So $f \times g$ is transverse to $\diag$.

	Conversely, suppose $f \times g$ is transverse to $\diag$, and continue to assume that $f(x) = g(y) = z \in M$ so that $(f \times g)(x,y) = \diag(z)$. 
	Let $v \in T_zM$.
	Then there are $a\in T_x V$, $b \in T_y W$, and $c \in T_zM$ such that $$(v,0) = D(f \times g)(a,b) + D\diag(c) = (Df(a), Dg(b)) + (c,c).$$
	Then $Df(a) + c = v$ and $Dg(b) + c = 0$, so $Df(a) - Dg(b) = Df(a) + Dg(-b) = v$.
	So $f$ and $g$ are transverse.
\end{proof}

\begin{proposition}\label{P: cross to cup}
	Suppose $f \colon V \to M$ and $g \colon W \to M$ are transverse co-oriented maps from manifolds with corners to a manifold without boundary.
	Then the pullback of $V \times W \to M \times M$ by $\diag$ is the co-oriented fiber product $V \times_M W \to M$, i.e.\ $$V \times_M W = \diag^*(V \times W).$$
\end{proposition}

\begin{proof}
	By \cref{L: alternative transversality}, we know $f \times g$ is transverse to $\diag$, so the pullback is defined, and it is a manifold with corners by \cref{pullback}.
	This pullback by $\diag$ is $$P' = \{(v,w,z) \in V \times W \times M \mid (f(v),g(w)) = \diag(z) = (z,z)\},$$ which is diffeomorphic to $$P = V \times_M W = \{(v,w) \in V \times W \mid f(v) = g(w)\}$$ via the projection $(v,w,z) \mapsto (v,w)$ with inverse $(v,w) \mapsto (v,w,f(v))$.
	So we consider the co-orientations, for which we may assume as usual that all manifolds are without boundary by \cref{pullback,P: interior co-orientation}.

	By \cref{L: Quillen product co-orientation}, now with $M = N$, if $f$ and $g$ are co-oriented (at appropriate points) by $(\beta_V,\beta_M)$ and $(\beta_W,\beta_M)$ and if we we take Quillen co-orientations coming from $V \xhookrightarrow{e_V} M \times \R^a \to M$ and $W \xhookrightarrow{e_W} M \times \R^b \to M$ (with $a$ and $b$ assumed even) by orienting $\nu V$ and $\nu W$ in $M \times \R^a$ and $M \times \R^b$, then the co-orientation of the product $f \times g$ has Quillen co-orientation with the normal bundle to $V \times W$ in $M \times M \times \R^{a+b}$ oriented by $\beta_{\nu V} \wedge \beta_{\nu W}$.
	Recall that we interpret this expression so that $\nu V$ is our standard normal bundle to $V$ in $M \times \R^a$ embedded into the first and third factors of $M \times M \times \R^a \times \R^b$ and analogous for $\nu W$.

	Pulling back by the diagonal, we thus obtain from \cref{D: pullback coorient} that the pullback co-orientation is $(\beta_{P'},\beta_M)$ if and only if $\beta_{P'} \wedge \beta_{\nu V} \wedge \beta_{\nu W} = \beta_M \wedge \beta_{a+b}$.
	On the other hand, using the same Quillen co-orientation for $V$, the co-orientation of the fiber product $V \times_M W \to W \to M$ is $(\beta_P,\beta_M)$ if and only if $\beta_P \wedge \beta_{\nu V} = \beta_W \wedge \beta_a$.

	Consider now the following computation, where we use that $\beta_W \wedge \beta_{\nu W} = \beta_{M\times \R^b} = \beta_M \wedge \beta_b$ from the definition of the Quillen orientation of the normal bundle:
	\begin{align*}
		\beta_P \wedge \beta_{\nu V} \wedge \beta_{\nu W}& = \beta_W \wedge \beta_a \wedge \beta_{\nu W}\\
		& = \beta_W \wedge \beta_{\nu W} \wedge \beta_a\\
		& = \beta_M \wedge \beta_b \wedge \beta_a \\
		& = \beta_M \wedge \beta_{a+b}\\
		& = \beta_{P'} \wedge \beta_{\nu V} \wedge \beta_{\nu W}.
	\end{align*}
	This appears to demonstrate that, if we fix $\beta_M$, we get corresponding $\beta_P$ and $\beta_P'$. 
	The trouble with this argument, however, is that we've been very free about what spaces exactly all these various local orientations live over.
	Even with our given identification of $P$ and $P'$, the symbol $\nu V$ here represents a normal bundle in at least two or three different spaces. 
	To solidify the argument, we need a bit more care.

	First, we recall that our model of $P = V \times_M W$ when computing pullback co-orientations is technically $V \times_{M \times \R^a} (W \times_M \R^a)$, identified with $V \times_M W$ in the obvious way, and similarly for $P'$; see \cref{R: pullback representative 2}. 
	It will be convenient here to use these representations, so, relabeling for convenience and letting $e_V(v) = (f(v),e_a(v))$ and $e_W(w) = (g(w),e_b(w))$, we let
	\begin{align*}
		P &= \{(v,w,s)\in V\times W\times \R^a\mid (g(w),s)=e_V(v)\}\\
		P' &= \{(v,w,z,s,t)\in V\times W\times M \times \R^a \times \R^b \mid (z,z,s,t)=(f(v),g(w),e_a(v),e_b(w))\}.
	\end{align*}
	Then $P$ is diffeomorphic to our standard $V \times_M W$ via $(v,w) \leftrightarrow (v,w,e_a(v))$, and $P'$ is diffeomorphic to $(V \times W) \times_{M \times M} M$ via $(v,w,z) \leftrightarrow (v,w,z,e_a(v),e_b(w))$. Furthermore, $P \cong P'$ via $(v,w,s)\leftrightarrow (v,w,g(w),s,e_b(w))$. 

	We now consider the following diagram, in which the righthand horizontal maps are those occuring in the pullback co-orientation construction:
	\begin{diagram}
		P&\rInto^{\pi_{W\times \R^a}}& W \times \R^a &\rTo^{g \times \id_{\R^a}}& M\times \R^a\\
		\dTo^\cong && \dInto^{h} &&\uTo^{\Pi}\\
		P'&\rInto^{\pi_{M\times \R^a \times \R^b}}& M \times \R^a \times \R^b &\rInto^{\diag \times \id_{\R^a}\times \id_{\R^b}}& M \times M\times \R^a \times \R^b.
	\end{diagram}	
	The lefthand vertical map is our diffeomorphism $P \cong P'$. We let $h$ be the map $h(w,s) = (g(w),s,e_b(w))$, and we let $\Pi$ be the projection onto the first and third factors. 
	One readily checks that this diagram commutes and that the maps with hooks are embeddings. 
	
	Let $p = (v,w,s)\in P$, let $p' = (v,w,z,s,t)$ be the corresponding point in $P'$, so in particular  $z = f(v) = g(w)$. 
	Then taking derivatives at these points and their images, we obtain the diagram

	\begin{diagram}
		T_pP&\rInto^{D\pi_{W\times \R^a}}& T_wW \oplus T_s\R^a &\rTo^{D(g \times \id_{\R^a})}& T_zM \oplus T_s\R^a\\
		\dTo^\cong && \dInto^{Dh} &&\uTo^{\Pi}\\
		T_{p'}P'&\rInto^{D\pi_{M\times \R^a \times \R^b}}& T_zM \oplus T_s\R^a \oplus T_t\R^b &\rInto^{D(\diag \times \id_{\R^a}\times \id_{\R^b})}& T_zM \oplus T_zM\oplus T_s\R^a \oplus T_t\R^b.\\
	\end{diagram}

	Now the normal bundle $\nu V$ to $e_V(V) \subset M \times \R^a$ is our standard normal bundle for the construction of a co-orientation of $V \times_M W$, and we know it pulls back to the normal bundle of $P$, identified with $(g \times \id_{\R^a})^{-1}(e_V(V)) \subset W \times \R^a$. 
	
	By construction, we typically think of choosing a splitting so that we can identify a normal space $\nu V$ of $P$ in $W \times \R^a$ at $p$ with a subspace $N$ of $T_{w,s}(W \times \R^a)=T_wW \oplus T_s\R^a$ such that the restriction to $N$ of the composition of $D(g \times \id_{\R_a})$ with the quotient map to $T_{(g(w),s)}(M \times \R^a)/ T_{(g(w),s)}V$ is an isomorphism. 
	With such a choice, it follows that the composition the other way around the righthand square, followed by the quotient map, is also an isomorphism onto $T_{(g(w),s)}(M \times \R^a)/ T_{(g(w),s)}V$, and so we can identify the image of $N$ under $D(\diag \times \id_{\R^a}\times \id_{\R^b}) Dh$ with the fiber of the pullback of $\nu V$ by $\Pi$. But now we observe that if $(\xi,\eta) \in T_wW \oplus T_s\R^a$, then
	$$D(\diag \times \id_{\R^a}\times \id_{\R^b}) Dh(\xi,\eta) = (Dg(\xi),Dg(\xi), \eta, De_b(\xi)).$$
	But $(Dg(\xi),De_b(\xi)) = De_W(\xi)$, so $(0, Dg(\xi),0, De_b(\xi))$ is in the tangent space of our chosen embedding of $V \times W$ into $M \times M \times \R^a \times \R^b$. 
	So, the image $D(\diag \times \id_{\R^a}\times \id_{\R^b})Dh(N)$ represents our standard choice of a $\nu V$ summand in the normal bundle to $V \times W$, it simply corresponds to a different choice of splitting. 
	In particular, this image and the $\nu V$ summand from \cref{L: Quillen product co-orientation} project to isomorphic images in $T(M \times M \times \R^a \times \R^b)/T(V \times W)$. 

	The upshot is that we can thus identify our versions of $\nu V$ in $W \times \R^a$ and $M \times \R^a \times \R^b$ via $Dh$, and similarly identify $T_pP$ and $T_{p'}P'$ via the diagram. In fact, the lefthand square consist entirely of embeddings, we can now properly interpret the above computation as a computation entirely with elements of $T_zM \oplus T_s\R^a \oplus T_t\R^b$ with $\nu W$ being the normal from the embedding of $W$ into the first and third coordinates of $M \times \R^a \times \R^b$.
\end{proof}

\begin{corollary}\label{C: fiber natural pullback}
	Suppose $f \colon V \to M$ and $g \colon W \to M$ are transverse co-oriented maps of manifolds with corners to a manifold without boundary, that $N$ is a manifold with corners, and that $h \colon N \to M$ is transverse to $f$, $g$, and $f \times_M g \colon V \times_M W \to M$.
	Then
	$$h^*(V \times_M W) = h^*V \times_N h^*W$$
	as manifolds with co-oriented maps to $N$.
\end{corollary}

\begin{proof}
	Let $\diag_M \colon M \to M \times M$ and $\diag_N \colon N \to N \times N$ denote the diagonal maps.
	Using \cref{P: cross to cup,P: pullback functoriality,P: natural exterior}, and that $\diag_M h = (h \times h) \circ \diag_N$,
	we compute
	\begin{align*}
		h^*(V \times_M W)& = h^*\diag_M^*(V \times W)\\
		& = (\diag_M h)^*(V \times W)\\
		& = ((h \times h) \circ \diag_N)^*(V \times W)\\
		& = \diag_N^*(h \times h)^*(V \times W)\\
		& = \diag_N^*(h^*V \times h^*W)\\
		& = h^*V \times_N h^*W.
	\end{align*}
	To apply \cref{P: pullback functoriality} in the second line, we note that $h$ is transverse to $\diag_M^*(V \times W) = V \times_M W$ by assumption.
	For the fourth line we observe that $h \times h$ is transverse to $f \times g$ because $h$ is transverse to $f$ and $g$, and the composite $(h \times h) \circ \diag_N = \diag_M h$ is transverse to $f \times g$ by our assumptions and \cref{L: transverse to pullback}.
\end{proof}

\begin{corollary}[Associativity of co-oriented fiber products]\label{C: fiber assoc}
	Suppose $f \colon V \to M$, $g \colon W \to M$, and $h \colon X \to M$ are co-oriented maps from manifolds with corners to a manifold without boundary such that the following pairs are transverse (see \cref{R: multiproducts}): $(V,W)$, $(W,X)$, $(V \times_M W,X)$, and $(V,W \times_M X)$.
	Then $$(V \times_M W) \times_M X = V \times_M (W \times_M X)$$ as co-oriented fiber products mapping to $M$.
\end{corollary}

\begin{proof}
	We compute using \cref{P: cross to cup,P: pullback functoriality,P: exterior associativity,P: natural exterior} and that $(\id_M \times \diag)\diag = (\diag \times \id_M)\diag$:
	\begin{align*}
		(V \times_M W) \times_M X& = \diag^*(\diag^*(V \times W) \times X)\\
		& = \diag^*(\diag \times \id_M)^*((V \times W) \times X)\\
		& = ((\diag \times \id_M)\diag)^*((V \times W) \times X)\\
		& = ((\id_M \times \diag)\diag)^*(V \times (W \times X))\\
		& = \diag^*(\id_M \times \diag)^*(V \times (W \times X))\\
		& = \diag^*(V \times \diag^*(W \times X))\\
		& = V \times_M (W \times_M X).\qedhere
	\end{align*}
\end{proof}


\begin{proposition}[Graded commutativity of co-oriented fiber products]\label{P: graded comm}
	Suppose $f \colon V \to M$ and $g \colon W \to M$ are transverse co-oriented maps from manifolds with corners to a manifold without boundary.
	Then as co-oriented fiber products over $M$ we have $\omega_{g \times_M f} = (-1)^{(m-v)(m-w)} \omega_{f \times_M g}$, or, using Notation \ref{R: precise commutativity},
	$$V \times_M W = (-1)^{(m-v)(m-w)} W \times_M V.$$
\end{proposition}

\begin{proof}		
	By \cref{P: cross to cup}, the fiber products $V \times_M W \to M$ and $W \times_M V \to M$ are respectively the pullbacks of $f \times g \colon V \times W \to M \times M$ and $g \times f \colon W \times V \to M \times M$ by the diagonal map $\diag \colon M \to M \times M$. 
	Meanwhile, by \cref{P: exterior commutativity}, we have 
	$$\tau^*(V \times W) = (-1)^{(m-v)(m-w)}W \times V,$$
	where $\tau \colon M \times M \to M \times M$ is the map that interchanges the factors. 
	We observe that $\tau \diag = \diag$, so using the functoriality of pullbacks from \cref{P: pullback functoriality} we can compute
	\begin{align*}
	W \times_M V &= \diag^*(W \times V)\\
	&= (-1)^{(m-v)(m-w)} \diag^* \tau^*(V \times W)\\
	&= (-1)^{(m-v)(m-w)}(\tau \diag)^*(V \times W)\\
	&= (-1)^{(m-v)(m-w)}(\diag)^*(V \times W)\\
	&= (-1)^{(m-v)(m-w)} V \times_M W.\qedhere
	\end{align*} 
\end{proof}

\begin{example}\label{E: embedded}
	In \cref{E: V embedded}, we considered pullback co-orientations $V \times_M W \to W$ when $V \into M$ was embedded.
	In this example, we discuss the case where $W$ is embedded.

	Let $f \colon V \to M$ and $g \colon W \to M$ be transverse maps from manifolds with corners to a manifold without boundary.
	Suppose $f$ is co-oriented and $g \colon W \to M$ is an embedding, which we use throughout the example to identify $W$ with its image.
	Let $(x,y) \in V \times_M W$.
	For the remainder of the argument, we fix a local orientation $\beta_M$ at $f(x) \in M$, and we choose $\beta_V$ at $x$ so that $(\beta_V,\beta_M)$ is the co-orientation of $V$ at $x$.
	Furthermore, even though $g$ might not be co-oriented, let us choose a Euclidean neighborhood $U$ of $y$ in $W$ and an arbitrary co-orientation $(\beta_U,\beta_M)$ on the restriction of $g$ to $U$.
	This can be done as $U$ is contractible and so $g|_U$ is co-orientable.


	Although we are interested in $V \times_M U$, the definition of the pullback co-orientation makes it easier to work with $U \times_M V$ when $U$ is embedded; see \cref{E: V embedded}.
	As we have chosen a co-orientation for $U \into M$ and as $V \to M$ comes with a co-orientation, we can consider the fiber product $P_U = U \times_M V \to M$.
	As $U$ is embedded in $M$, we have $P_U = f^{-1}(U) \subset V$.
	If we choose an orientation $\beta_{\nu U}$ of the normal bundle to $U$ in $M$ at $y$ so that $\beta_U \wedge \beta_{\nu U} = \beta_M$, then by \cref{E: V embedded} and the definition of fiber product co-orientation, the map $P_U \xr{f} M$ is co-oriented by $(\beta_P,\beta_M)$, where $\beta_P$ is chosen so that $\beta_P \wedge \beta_{\nu U} = \beta_V$, as usual letting $\nu U$ here also stand for its pullback as a normal bundle of $P_U$ in $V$.
	We note that if we had chosen the opposite co-orientation for $U \into M$ then, as we have fixed $\beta_V$ and $\beta_M$, the result would be to replace our current $\beta_U$ with $-\beta_U$, which would result in also reversing the signs of $\beta_{\nu U}$ and $\beta_P$.
	In particular, the fiber product would have the opposite co-orientation.

	Next, we will apply graded commutativity.
	By \cref{P: graded comm}, we have $U \times_M V = (-1)^{(m-v)(m-w)}V \times_M U$ as co-oriented fiber products over $M$.
	By \cref{R: precise commutativity}, this means that the fiber product $V \times_M U \to M$ with its fiber product co-orientation corresponds to the fiber product $U \times_M V = f^{-1}(U) \xr{f} M$ with co-orientation at $(x,y)$ given by $(-1)^{(m-v)(m-w)}(\beta_P, \beta_M)$.
	But decomposing the fiber product as the pullback $V \times_M U \to U$ and the inclusion $U \into M$, we write $(-1)^{(m-v)(m-w)}(\beta_P, \beta_M)$ as the composite co-orientation
	$$(-1)^{(m-v)(m-w)}(\beta_P, \beta_M) = (-1)^{(m-v)(m-w)}(\beta_P, \beta_U)*(\beta_U, \beta_M).$$
	As $(\beta_U, \beta_M)$ is our chosen co-orientation for $g|_U$, the pullback co-orientation of $V \times_M U \to U$ must be $(-1)^{(m-v)(m-w)}(\beta_P, \beta_U)$.
	But we have already observed that if we had chosen the opposite co-orientation for $g|_U$, that would reverse the signs of both $\beta_U$ and $\beta_P$, so in either case we obtain the same pullback co-orientation for $V \times_M U \to U$.
	In other words, this description of the co-oriented pullback $V \times_M U \to U$ is independent of our choice of co-orientation for $g|_U$, and so it extends globally to give our pullback co-orientation of $V \times_M W \to W$.

	Summarizing then, as a space we have $P = V \times_M W = f^{-1}(W)$, and the pullback and fiber product are the first map and composite of $f^{-1}(W) \xr{f} W \into M$ (analogously to the case where $f$ was an embedding in \cref{E: V embedded}).
	Furthermore, fixing the co-orientation of $f$ as $(\beta_V, \beta_M)$, the co-orientation of the pullback $V \times_M W \to W$ is by $(-1)^{(m-v)(m-w)}(\beta_P, \beta_W)$, where, if we choose any local orientation $\beta_{\nu W}$ for the normal bundle of $W$ in $M$, then $\beta_W \wedge \beta_{\nu W} = \beta_M$ in $M$ and $\beta_P \wedge \beta_{\nu W} = \beta_V$ after pulling back to $V$.

	It is a nice exercise to confirm that this agrees with the computation of \cref{P: normal pullback} when $V$ and $W$ are both embedded.
\end{example}


\begin{corollary}\label{C: criss cross}
	Suppose $f \colon V \to M$ and $g \colon W \to M$ are transverse co-oriented maps from manifolds with corners to a manifold without boundary and similarly for $h \colon X \to N$ and $k \colon Y \to N$.
	Then$$(V \times X)\times_{M \times N} (W \times Y) = (-1)^{(m-w)(n-x)} (V \times_M W) \times (X \times_N Y) $$
	as co-oriented fiber products over $M \times N$.
%	Add a version for pullbacks (as opposed to fiber products)? Might have some extra signs to figure out.
%	Not really needed anywhere I do not think.}
\end{corollary}

\begin{proof}
	With our given transversality assumptions, $f \times h$ is transverse to $g \times k$, so the expression on the left is well defined.
	We then compute using \cref{P: cross to cup,P: pullback functoriality,P: exterior associativity,P: exterior commutativity,P: natural exterior} and letting $\tau$ here be the interchange of the interior $N$ and $M$ in the quadruple product:
	\begin{align*}
		(V \times X)\times_{M \times N} (W \times Y)& = \diag_{M \times N}^*(V \times X \times W \times Y)\\
		& = \diag_{M \times N}^*(\id \times \tau^* \times \id)^*(-1)^{(n-x)(m-w)}(V \times W \times X \times Y)\\
		& = (\diag_M \times \diag_N)^*(-1)^{(n-x)(m-w)}(V \times W \times X \times Y)\\
		& = (-1)^{(n-x)(m-w)}\diag_M^*(V \times W) \times \diag_N^*( X \times Y)\\
		& = (-1)^{(m-w)(n-x)} (V \times_M W) \times (X \times_N Y).
	\end{align*}
	For the third equality, we use that $\diag_M \times \diag_N = (\id_M \times \tau \times \id_N)\diag_{M \times N}$.
\end{proof}

\begin{corollary}\label{C: cross is cup}
	Let $V \to M$ and $W \to N$ be maps from manifolds with corners to manifolds without boundary.
	Let $\pi_M \colon M \times N \to M$ and $\pi_N \colon M \times N \to N$ be the projections.
	Then $$V \times W = \pi_M^*(V)\times_{M \times N}\pi_N^*(W)$$ as co-oriented manifolds mapping to $M \times N$.
\end{corollary}

\begin{proof}
	By \cref{P: projection pullbacks}, $\pi_M^*(V) = V \times N$ and $\pi_N^*(W) = M \times W$, so these are transverse as spaces mapping to $M \times N$.
	Then by \cref{C: criss cross,C: cup with identity}, we have
	\begin{align*}
		\pi_M^*(V)\times_{M \times N}\pi_N^*(W)& = (V \times N)\times_{M \times N} (M \times W)\\
		& = (V \times_M M) \times (N \times_N W)\\
		& = V \times W.\qedhere
	\end{align*}
\end{proof}

\subsection{Properties mixing orientations and co-orientations}

In this section we study properties that involve both orientations and co-orientations.
In particular, we are mostly interested in the pullback of a co-oriented map $V \to M$ by a map $W \to M$ with $W$ oriented, in which case the co-orientation of the pullback $V \times_M W \to W$ together with the orientation of $W$ produces an induced orientation on $V \times_M W$ as described in \cref{S: co-orientations}.
As $V \times_M W \to M$ with this orientation will eventually correspond to the cap product when we get to geometric homology and cohomology, we will here refer to this orientation as the \textbf{cap orientation}.

The following results all concern cap orientations on $V \times_M W$.
We note that, by construction, this oriented manifold comes equipped with a map to $W$ and, by composing with the given map $W \to M$, a map to $M$.

We start with the next result, which is yet another Leibniz formula. 
This will lead us eventually to a boundary formula for the cap product of geometric chains and cochains that agrees with that for the boundary of cap products of singular chains and cochains in Spanier \cite[Section 5.6.15]{Span81} and Munkres \cite[Section 66]{Mun84}.
It will also be used in \cref{S: intersection map} to demonstrate that our intersection map $\mc I$, relating geometric cochains to cubical cochains of a cubulation, is a chain map.
This map is a critical component in relating geometric cohomology to other cohomology theories and is also central to the main result about cup products in \cite{FMS-flows}.

\begin{proposition}\label{P: Leibniz cap}
	Let $f \colon V \to M$ and $g \colon W \to M$ be transverse maps of manifolds with corners to a manifold without boundary.
	Suppose $f$ is co-oriented and $W$ is oriented.
	Then $$\bd(V \times_M W) = \left[(-1)^{v+w-m} (\bd V) \times_M W\right] \bigsqcup (V \times_M \bd W)$$
	as oriented manifolds, giving $V \times_M W$, $(\bd V) \times_M W$, and $V \times_M \bd W$ each their cap orientations.
	In the last case, this is the cap orientation of the pullback of $V$ by $\bd W \xr{i_{\bd}} W \xr{g} M$, with $\bd W$ having its boundary orientation as the boundary of $W$.
\end{proposition}

\begin{proof}
	We compute and compare these orientations by first considering the pullback co-orientations as defined in \cref{D: pullback coorient}.
	We proceed by analogy to the proof of the Leibniz rule for the pullback of co-oriented maps in \cref{leibniz}, utilizing the computations already performed there. 
	Recall that, as needed, we can assume by working locally that $V$ and $W$ are manifolds without boundary or manifolds without strata of greater depth.

	Recall, in brief, from \cref{D: pullback coorient} that to co-orient the pullback $P = V \times_M W \to W$ we first construct a composition $V \xhookrightarrow{e} M \times \R^N \to M$ and find a Quillen orientation for the normal bundle $\nu V$ of $e(V) \subset M \times \R^N$ as determined by the co-orientation of $V \to M$.
	Then we pull back via $W \times \R^N \to M \times \R^N$ to obtain a normal bundle, also labeled $\nu V$, of $P \subset W \times \R^N$.
	Then we co-orient $P \to W$ locally by $(\beta_P,\beta_W)$ so that $\beta_P \wedge \beta_{\nu V} = \beta_W \wedge \beta_E$, where $\beta_E$ represents the standard orientation of $\R^N$.
	In the case at hand, we can assume $\beta_W$ to represent the global orientation of $W$, and then $\beta_P$ becomes the global cap orientation for $P = V \times_M W$.

	Let $\nu\bd P$ denote an outward pointing normal vector in the tangent bundle to $P$ at a boundary point of $P$, and let $\beta_{\nu\bd P}$ denote the corresponding orientation.
	Then, by definition, $\bd P$ is oriented at that point by $\beta_{\bd P}$ so that $\beta_{\nu\bd P} \wedge \beta_{\bd P} = \beta_P$.
	In other words, with $\beta_P$, $\beta_W$, $\beta_{\nu V}$, and $\beta_E$ given as above, $\bd P$ is oriented by $\beta_{\bd P}$ such that $\beta_{\nu\bd P} \wedge \beta_{\bd P} \wedge \beta_{\nu V} = \beta_W \wedge \beta_E$.

	Now, recall that $\bd(V \times_M W) = (\bd V) \times_M W \bigsqcup V \times_M \bd W$ as spaces and consider a point in $(\bd V) \times_M W$.
	By \cref{leibniz}, at such a point the pullback co-orientation of $(\bd V) \times_M W \to W$ (as the pullback of $\bd V \to M$ by $g$) agrees with boundary co-orientation of the pullback $P = V \times_M W \to W$.
	So continuing to let $(\beta_P,\beta_W)$ denote the pullback co-orientation of $P \to W$ and recalling that the boundary co-orientation utilizes the \textit{inward} normal, the boundary co-orientation of $(\bd V) \times_M W \to W$ is the composite $(\beta_{\bd P}, \beta_{\bd P} \wedge -\beta_{\nu\bd P})*(\beta_P,\beta_W)$ for any $\beta_{\bd P}$.
	But if we choose $\beta_{\bd P}$ to represent the orientation of $\bd P$ found above by orienting $P$ and then taking its boundary orientation, we have $\beta_P = \beta_{\nu\bd P} \wedge \beta_{\bd P} = (-1)^{\dim(\bd P)}\beta_{\bd P} \wedge \beta_{\nu\bd P}$.
	So the boundary co-orientation of $(\bd V) \times_M W \to W$ is the composite
	$$(\beta_{\bd P}, \beta_{\bd P} \wedge -\beta_{\nu\bd P})*((-1)^{\dim(\bd P)}\beta_{\bd P} \wedge \beta_{\nu\bd P},\beta_W) = (-1)^{\dim(\bd P)+1}(\beta_{\bd P},\beta_W).$$
	Thus the resulting cap orientation of $(\bd V) \times_M W$ is $(-1)^{\dim(P)}\beta_{\bd P}$, which is $(-1)^{\dim(P)} = (-1)^{v+w-m}$ times the orientation of $\bd P$ obtained by taking the oriented boundary of $V \times_M W$.

	Next we consider a point in $V \times_M \bd W$.
	Note that by \cref{L: normal pullback} we can consider our outward pointing normal vector $\nu\bd P$ at a point of $\bd P$ to also be an outward pointing normal of $\bd W$; below we write $\nu \bd P = \nu \bd W$.
	Again from the definition of pullback co-orientations, the co-orientation of the pullback $V \times_M \bd W \to \bd W$ is $(\beta_{\bd P},\beta_{\bd W})$ when $\beta_{\bd P} \wedge \beta_{\nu V} = \beta_{\bd W} \wedge \beta_E$. 
	If we here give $\bd W$ its boundary orientation, this determines the cap orientation as $\beta_{\bd P}$.
	Wedging with $\beta_{\nu\bd P}$ and using the definition of boundary orientation of $W$, we thus have 
	$$\beta_{\nu\bd P} \wedge \beta_{\bd P} \wedge \beta_{\nu V} = \beta_{\nu\bd P} \wedge \beta_{\bd W} \wedge \beta_E =  \beta_{\nu\bd W} \wedge \beta_{\bd W} \wedge \beta_E = \beta_W \wedge \beta_E.$$
	But this was exactly our condition above for $\beta_{\bd P}$ to be the boundary orientation of $P$ when $P$ is given its cap orientation. 
\end{proof}

Next we describe the cap orientation when $V \to M$ and $W \to M$ are embeddings.
As we've observed in the cases where either both maps are oriented or both maps are co-oriented, this is often an instructive and important example.

\begin{proposition}\label{P: cap of immersions}
	Let $f \colon V \to M$ and $g \colon W \to M$ be transverse embeddings from manifolds with corners to a manifold without boundary.
	Suppose $f$ is co-oriented and $W$ is oriented.
	Then $P = V \times_M W$ is just the intersection of $V$ and $W$ in $M$.
	If $\beta_W$ is the orientation of $W$ and $\beta_{\nu V}$ is the Quillen orientation of the normal bundle to $V$ in $M$, which at points of $P$ we can identify\footnote{See \cref{L: normal pullback}.} with the normal bundle to $P$ in $W$, then the cap orientation $\beta_P$ of $P$ satisfies $\beta_P \wedge \beta_{\nu V} = \beta_W$.
	If $f$ and $g$ are immersions, then this description holds locally.
\end{proposition}

\begin{proof}
	As $f$ is an embedding, we can take $N = 0$ in the definition of the pullback co-orientation, \cref{D: pullback coorient}.
	Then the pullback is just the inclusion of $P = g^{-1}(V) = V \cap W$ into $W$, and by definition the pullback co-orientation has the form $(\beta_P,\beta_W)$, where $\beta_P \wedge \beta_{\nu V} = \beta_W$ and $\nu V$ here is the pullback of the normal bundle of $V$ in $M$ to be the normal bundle of $V \cap W$ in $W$.
	Furthermore, if we take $\beta_W$ to be the given orientation of $W$, then $\beta_P$ is the cap orientation on the intersection by definition.
	The last statement about immersions follows as we can compute the co-orientations locally.
\end{proof}

The following corollary is particularly important and follows immediately from \cref{P: cap of immersions}.

\begin{corollary}\label{C: complementary cap}
	Let $f \colon V \to M$ and $g \colon W \to M$ be transverse embeddings from manifolds with corners to a manifold without boundary.
	Suppose $f$ is co-oriented, $W$ is oriented, and $\dim(V) + \dim(W) = \dim(M)$.
	Then $V \times_M W$ is the union of intersection points of $V$ and $W$.
	Such a point $x \in V \cap W$ is positively oriented if and only if the Quillen orientation of the normal bundle $\nu V$ of $V$ at $x$ agrees with the orientation of $W$ at $x$, identifying the fiber of $\nu V$ at $x$ with $T_xW$.
	If $f$ and $g$ are immersions, then this description holds locally.
\end{corollary}

The next two propositions will eventually correspond to the unital identities for the cap product for geometric chains and cochains.
The analogues for singular chains and cochains are the cap product with the cochain $1$ and the cap product with a chain representing the fundamental class, though in this case our underlying spaces do not need to be compact.

\begin{proposition}\label{P: cap with 1}
	Let $g \colon W \to M$ be a map from an oriented manifold with corners to a manifold without boundary, and consider $M \to M$ as the identity with the tautological co-orientation.
	Then $M \times_M W = W$ as oriented manifolds.
\end{proposition}

\begin{proof}
	By definition, there is a Quillen co-orientation for $M$ consisting of the sequence of identity maps $M \into M \to M$ with the normal bundle to $M$ in itself being the $0$-dimensional vector bundle, which we consider to have positive orientation at each point.
	It follows from the definition of the pullback that the corresponding Quillen co-orientation for $M \times_M W$ comes from the sequence $g^{-1}(M) = W \into W \to W$ with $W$ also having a $0$-dimensional positively-oriented normal bundle in itself.
	Consequently, the pullback co-orientation for $W \to W$ is the tautological one, and so the induced orientation on $W$ is the given one.
\end{proof}

\begin{proposition}\label{P: cap with identity M}
	Let $f \colon V \to M$ be a co-oriented map from a manifold with corners to an oriented manifold without boundary, and consider $M$ equipped with its identity map $M \to M$.
	Then $V \times_M M$ is $V$ with its induced orientation.
\end{proposition}

\begin{proof}
	This follows directly from \cref{C: cup with identity} and the definitions.
\end{proof}

The next property relates products of pullbacks with pullbacks of products. Again, our signs agree with the cap product formulas in Spanier, in this case \cite[Section 5.6.21]{Span81}.

\begin{proposition}\label{P: cap cross}
	Let $f \colon V \to M$ and $g:X \to N$ be co-oriented maps from manifolds with corners to manifolds without boundary, and let $h \colon W \to M$ and $k \colon Y \to N$ be maps with $W$ and $Y$ oriented manifolds with corners.
	Suppose that $V$ is transverse to $W$ and that $X$ is transverse to $Y$.
	Then,
	$$(V \times X)\times_{M \times N} (W \times Y) = (-1)^{(x+y-n)(m-v)} (V \times_M W) \times (X \times_N Y),$$
	as oriented manifolds with the pullbacks given their cap orientations.
\end{proposition}

\begin{proof}
	Let $\beta_W$ and $\beta_Y$ denote the orientations of $W$ and $Y$.
	Then $W \times Y$ is oriented by $\beta_W \wedge \beta_Y$.

	Now let $P = V \times_M W$ and $P' = X \times_N Y$.
	By definition, $P$ and $P'$ are oriented by the orientations $\beta_P$ and $\beta_{P'}$ such that $(\beta_P,\beta_W)$ and $(\beta_{P'},\beta_Y)$ are the pullback co-orientations for $P \to W$ and $P' \to Y$.
	Then $P \times P'$ is oriented by $\beta_P \wedge \beta_{P'}$.

	Furthermore, using our construction of pullback co-orientations, $\beta_P$ and $\beta_{P'}$ are such that $\beta_P \wedge \beta_{\nu V} = \beta_W \wedge \beta_a$ and $\beta_{P'} \wedge \beta_{\nu X} = \beta_Y \wedge \beta_b$, where $\beta_a$ and $\beta_b$ are the standard orientations of the Euclidean spaces $\R^a$ and $\R^b$ and we are free to take $a$ and $b$ to be even integers.

	By \cref{L: Quillen product co-orientation}, we have that the Quillen co-orientation of $V \times X \to M \times N$ is represented by an embedding $V \times X \into M \times N \times \R^a \times \R^b$ with normal bundle $\nu V \oplus \nu X$ suitably interpreted.
	So letting $Q = (V \times X)\times_{M \times N} (W \times Y)$, the orientation $\beta_Q$ is the one such that $(\beta_Q,\beta_W \wedge \beta_Y)$ is the pullback co-orientation, i.e.\ the one such that $\beta_Q \wedge \beta_{\nu V} \wedge \beta_{\nu X} = \beta_W \wedge \beta_Y \wedge \beta_a \wedge \beta_b$.
	But then we compute, using $a$ and $b$ even,
	\begin{align*}
		\beta_W \wedge \beta_Y \wedge \beta_a \wedge \beta_b& = \beta_W \wedge \beta_a \wedge \beta_Y \wedge \beta_b\\
		& = \beta_P \wedge \beta_{\nu V} \wedge \beta_{P'} \wedge \beta_{\nu X}\\
		& = (-1)^{|P'||\nu V|}\beta_P \wedge \beta_{P'} \wedge \beta_{\nu V} \wedge \beta_{\nu X}\\
		& = (-1)^{(x+y-n)(m-v)}\beta_P \wedge \beta_{P'} \wedge \beta_{\nu V} \wedge \beta_{\nu X}.
	\end{align*}
	So $\beta_Q = (-1)^{(x+y-n)(m-v)}\beta_P \wedge \beta_{P'} = (-1)^{(x+y-n)(m-v)}\beta_{P \times P'}$.
\end{proof}

The following technical lemma will be used to prove \cref{P: OC mixed associativity}, which will eventually become the associativity relation among cup and cap products, i.e.\ $(a \smile b) \frown x = a \frown (b \frown x)$.

\begin{lemma}\label{L: same induced}
	Let $f \colon V \to M$ and $g \colon W \to M$ be transverse maps from manifolds with corners to a manifold without boundary.
	Suppose that $f$ is co-oriented and that $W$ and $M$ are oriented, with respective (global) orientations $\beta_W$ and $\beta_M$.
	Suppose we co-orient $g$ by $(\beta_W,\beta_M)$.
	Then the cap orientation of $V \times_M W$ (i.e.\ that induced from the the pullback co-orientation of $V \times_M W \to W$ and the orientation of $W$) is the same as the orientation induced on $V \times_M W$ by the fiber product co-orientation of $V \times_M W \to M$ and the orientation of $M$.
	In particular, this orientation does not depend on the orientation of $M$.
\end{lemma}

\begin{proof}
	By definition, the orientation of $V \times_M W$ induced from the orientation of $W$ and the pullback co-orientation of $V \times_M W \to W$ is the orientation $\beta_P$ such that $(\beta_P,\beta_W)$ is the pullback co-orientation.
	But then the fiber product co-orientation is the composite $(\beta_P,\beta_W)*(\beta_W,\beta_M) = (\beta_P,\beta_M)$.
	So the orientation induced by the orientation of $M$ and the composite co-orientation is again $\beta_P$.
\end{proof}

\begin{proposition}[Mixed associativity]\label{P: OC mixed associativity}
	Let $f \colon V \to M$ and $g \colon W \to M$ be co-oriented maps from manifolds with corners to a manifold without boundary.
	Let $h \colon Z \to M$ be a map with $Z$ an oriented manifold with corners.
	Then, assuming sufficient transversality for all terms to be defined (see \cref{R: multiproducts}),
	$$(V \times_M W) \times_M Z = V \times_M (W \times_M Z),$$
	as oriented manifolds.
	Here, on the left, $V \times_M W$ has its fiber product co-orientation, so we can form the cap orientation of the pullback over $Z$.
	On the right we first give $W \times_M Z$ its cap orientation as a pullback over $Z$ and then use that to form the cap orientation of $V \times_M (W \times_M Z)$.
\end{proposition}


\begin{proof}
	First suppose $M$ is orientable and that we have given it an arbitrary, but fixed, orientation.
	Then applying \cref{L: same induced}, the cap orientation of $(V \times_M W) \times_M Z$ is the same as the orientation induced by the orientation of $M$ and the fiber product co-orientation $(V \times_M W) \times_M Z \to M$, after co-orienting $Z \to M$ with the co-orientation induced by the orientations of $Z$ and $M$.
	Similarly, applying \cref{L: same induced} twice, the cap orientation of $V \times_M (W \times_M Z)$ is the same as that induced by the orientation of $M$ and the iterated fiber product co-orientation $V \times_M (W \times_M Z) \to M$ again coming from the canonical co-orientation of $Z \to M$.
	But now these co-oriented fiber products are the same by \cref{C: fiber assoc}.

	Next, suppose $M$ is not necessarily orientable.
	We know from their constructions that $(V \times_M W) \times_M Z$ and $V \times_M (W \times_M Z)$ are oriented manifolds, and it is not difficult to see that they are diffeomorphic, both being diffeomorphic to $\{(v,w,z) \in V \times W \times Z \mid f(v) = g(w) = h(z)\}$.
	So it suffices to consider these as identical spaces and to show that their induced orientations agree at any arbitrary point.
	If $(v,w,z)$ is such a point, consider its image $a = f(v) = g(w) = h(z) \in M$.
	Let $U$ be a Euclidean neighborhood of $a$, and consider the restrictions of $f$, $g$, and $h$ to $f^{-1}(U)$, $g^{-1}(U)$, and $h^{-1}(U)$.
	The resulting products over $U$ give us the pieces of $(V \times_M W) \times_M Z$ and $V \times_M (W \times_M Z)$ over $U$, and the resulting orientations will be compatible with those of the full manifolds $(V \times_M W) \times_M Z$ and $V \times_M (W \times_M Z)$, as orientations and co-orientations of fiber products are determined locally (see \cref{R: local pullback co-orientations} and the construction of fiber product orientations).
	But as $U$ is orientable, the preceding argument shows that these orientations must agree with each other.
\end{proof}

The following property will eventually manifest itself in geometric (co)homology as the familiar naturality formula for cap products $f_*(f^*(\alpha)\frown x)) = \alpha\frown f_*(x)$.

\begin{proposition}\label{P: natural cap}
	Let $f \colon V \to M$ and $h \colon N \to M$ be transverse maps with $f$ co-oriented, $V$ a manifold with corners and $M$ and $N$ manifolds without boundary.
	Furthermore, let $g \colon W \to N$ be a map from an oriented manifold with corners that is transverse to the co-oriented pullback $V \times_M N \to N$.
	Then the cap orientation induced on $(V \times_M N) \times_N W$ by pulling back the co-oriented map $V \times_M N \to N$ over $W \to N$
	is the same as the cap orientation obtained by pulling back $V \to M$ by the composite $hg \colon W \to M$.
	In other words, $(V \times_M N) \times_N W = V \times_M W$ as oriented manifolds.
\end{proposition}

\begin{proof}
	Note that $V$ is transverse to $hg \colon W \to M$ by \cref{L: transverse to pullback}, so both expressions are defined.
	It follows directly from \cref{P: pullback functoriality} that the two pullback co-orientations we have described for $(V \times_M N) \times_N W \to W$ agree.
	Therefore, the induced cap orientations agree.
\end{proof}

\subsubsection{Comparing the oriented and co-oriented fiber products}

Suppose $f \colon V \to M$ and $g \colon W \to M$ are two transverse co-oriented maps from manifolds with corners to a manifold without boundary.
Further, suppose $M$ oriented.
Then we know from the discussion in \cref{S: co-orientations} that there is a bijection between co-orientations of $f$ and orientations of $V$; an orientation of $V$ induces a co-orientation of $f$ and vice versa.
Of course the same is true of $W$ and $g$.
In this scenario, we have two different ways to orient $V \times_M W$, depending on whether we start by thinking of $V$ and $W$ as oriented or by thinking of $f$ and $g$ as co-oriented.
If we think of $V$ and $W $as oriented, we have the fiber product orientation of $V \times_M W$
discussed in \cref{S: orientations}.
Alternatively, if we think of $f$ and $g$ as co-oriented, we can form the fiber product co-orientation of $V \times_M W \to M$ as in \cref{S: co-orientation of pullbacks} and then consider the induced orientation given the orientation of $M$.

Our goal in this section is to compare these two orientations on $V \times_M W$.
To attempt to avoid confusion, we will write $V \times_M ^oW$ for the fiber product orientation of \cref{S: orientations} and $V \times_M ^cW$ for the co-oriented fiber product or, equivalently, the resulting induced orientation.

The reader might have noticed that a third way to orient $V \times_M W$ is to consider $f$ to be co-oriented and $W$ to be oriented and then form the cap orientation that we studied in detail in the preceding section.
However, we already know this to be identical to $V \times_M ^cW$ by \cref{L: same induced}.
By contrast, these are not always the same as $V \times_M ^oW$.

When we move on to geometric homology, $V \times_M ^oW$ will correspond to the classical intersection product of homology classes, as described for example in \cite[Section VI.11]{Bred97}, while $V \times_M ^cW$ will correspond to the cup product of cohomology classes.
When $M$ is closed and oriented, switching between thinking of $V$ and $W$ as oriented vs. co-oriented will be precisely the Poincar\'e duality isomorphism.
So this proposition will ultimately demonstrate that the intersection product is Poincar\'e dual to the cup product, up to a sign; see \cref{S: PD}.

\begin{proposition}\label{P: compare cup and intersection orientations}
	Let $f \colon V \to M$ and $g \colon W \to M$ be transverse co-oriented maps from manifolds with corners to an oriented manifold without boundary or, equivalently, suppose $V$, $W$, and $M$ all oriented.
	Then $$V \times_M ^oW = (-1)^{(m-v)(m-w)} V \times_M ^cW$$ as oriented manifolds with corners.
\end{proposition}

The proof will take a bit of work.
Our strategy will be as follows. 
We recall by \cref{pullback,P: interior co-orientation} that co-orientations are determined entirely by what happens on the pullbacks of the interiors, and this is also a standard fact for orientations of topological manifolds with boundary. 
So it suffices in what follows to consider only manifolds without boundary.	

First, we will prove in \cref{L: compare cup and intersection for immersions} that the result holds when $f$ and $g$ are immersions.
Then we will show, first for co-orientations and then for orientations, that we can replace the fiber product of
$$V \xr{f} M \xleftarrow{g} W$$
with the fiber product
$$V \times \R^b \xhookrightarrow{e \times \id_{\R^b }} M \times \R^a  \times \R^b  \hookleftarrow W \times \R^a ,$$
where $a$ and $b$ are even, the map $e$ is the embedding $V \into M \times \R^a $ of a Quillen co-orientation of $f$, and the leftward arrow is the identity between the $\R^a $ factors and takes the $W$ factor into $M \times \R^b $ by the embedding map of a Quillen co-orientation of $g$.
By ``replace,'' we mean in the oriented case that the two fiber products are canonically oriented diffeomorphic.
In the co-oriented case we mean that we have a canonical oriented diffeomorphism
between the domains of the two co-oriented fiber products, oriented with their induced orientations coming respectively from the orientation of $M$ and from the concatenation orientation of $M \times \R^a  \times \R^b $ using the standard orientations of the Euclidean terms.
The maps of this second fiber product are embeddings for which the proposition holds by \cref{L: compare cup and intersection for immersions}, and so the general case will follow.
The even dimensions of the Euclidean factors are chosen to avoid some extraneous signs in the arguments below.

Before proceeding, let us explain in more detail what we mean by ``canonical'' here and below.
Recall that, as a space, $P = V \times_M W$ can be identified with $\{(v,w) \in V \times W \mid f(v) = g(w)\}$.
Below we will see various fancier embeddings of $P$ in spaces of the form $V \times X \times W \times Y$, with $X$ and $Y$ Euclidean or $I$.
For each such embedding, the projection to $V \times W$ will take the embedding of $P$ back to $P$.
In this way, all versions of $P$ can be canonically identified, and it is these identifications that will yield our orientation preserving diffeomorphisms.
Such identifications have already been discussed in \cref{R: pullback representative,R: pullback representative 2}.
In the latter remark, we provide exactly such a canonical identification between our standard realization of $V \times_M W$ as a subset of $V \times W$ and the version used for co-orienting pullbacks and fiber products.

\begin{comment}
	is already contained in the construction of the co-oriented fiber product, where $V\times^c_MW$ can be considered to be contained in $V \times W \times \R^N$.
	Explicitly we constructed $P = (g \times \id_{\R^N})^{-1}(e(V))$, but as $e$ is an embedding, the $V$ factor of points in $P$ is implicitly determined by $(w,z) \in P \subset W \times \R^N$ as $e^{-1}((g(w),z))$.
	So $P = (g \times \id_{\R^N})^{-1}(e(V))$ is canonically identified with $\{(v,w,z) \in V \times W \times \R^N \mid e(v) = (g(w),z)\}$.
	And as $e$ is part of a Quillen co-orientation, by projecting $M \times \R^N$ to $M$, we have of course $g(w) = f(v)$, so there is a canonical map $\{(v,w,z) \in V \times W \times \R^N \mid e(v) \to \{(v,w) \in V \times W \mid f(v) = g(w)\}$ given by projection to the first two factors.
	This is a diffeomorphism, whose inverse takes $(v,w)$ to $(v,w,z)$ such that $e(v) = (g(w),z)$.

	\red{Put some of this as a remark in the section where pullback of co-orientation is defined.}
\end{comment}

\medskip

We begin with the case where $V$ and $W$ are immersions and then work toward the general case.

\begin{lemma}\label{L: compare cup and intersection for immersions}
	If $f$ and $g$ are transverse immersions of oriented manifolds without boundary into an oriented manifold without boundary, then $V \times_M ^oW = (-1)^{(m-v)(m-w)} V \times_M ^cW$.
\end{lemma}

\begin{proof}
	It suffices to consider small neighborhoods of interior points on which $f$ and $g$ are embeddings.
	Let $\beta_V$, $\beta_W$, and $\beta_M$ denote the local orientations of $V$, $W$, and $M$, respectively, at such a point.
	Assuming $f$ and $g$ to be co-oriented with the compatible co-orientations $(\beta_V,\beta_M)$ and $(\beta_W,\beta_M)$, we have the resulting Quillen orientations $\beta_{\nu V}$ and $\beta_{\nu W}$ of the normal bundles of $V$ and $W$.
	Recall that these are defined so that $(\beta_V,\beta_V \wedge \beta_{\nu V})$ and $(\beta_W,\beta_W \wedge \beta_{\nu W})$ are the co-orientations of $f$ and $g$, respectively.
	In this scenario, with $\beta_V$ and $\beta_W$ fixed as the orientations of $V$ and $W$, this is equivalent to requiring $\beta_V \wedge \beta_{\nu V} = \beta_M$ and $\beta_W \wedge \beta_{\nu W} = \beta_M$.
	Again, to keep the contexts clear, for the remainder of the argument we will write $\beta^c_{\nu V}$ and $\beta^c_{\nu W}$ for the Quillen orientations of $\nu V$ and $\nu W$.

	By \cref{P: normal pullback}, the co-orientation of the fiber product $V \times_M^c W$ is $(\beta_P,\beta_P \wedge \beta^c_{\nu V} \wedge \beta^c_{\nu W})$.
	In particular, the induced orientation of $V\times_m^c W$ is the orientation $\beta_P^c$ such that $\beta_P^c \wedge \beta^c_{\nu V} \wedge \beta^c_{\nu W} = \beta_M$.

	On the other hand, in \cref{P: orient intersection}, $\beta^o_P$ is such that if $\beta^o_P \wedge \beta^o_{\nu W} = \beta_V$ and $\beta^o_P \wedge \beta^o_{\nu V} = \beta_W$ then $\beta^o_P \wedge \beta^o_{\nu V} \wedge \beta^o_{\nu W} = \beta_M.$ A priori these may be different orientations of $\nu V$ and $\nu W$ than those of the preceding paragraph, so we use these alternate labels.
	In fact, let us suppose $\beta^o_P$, $\beta^o_{\nu V}$, and $\beta^o_{\nu W}$ chosen so that these expressions all hold.
	Then we have
	$$\beta_M = \beta^o_P \wedge \beta^o_{\nu V} \wedge \beta^o_{\nu W} = \beta_{W} \wedge \beta^o_{\nu W},$$
	so
	$$\beta_{\nu W}^o = \beta_{\nu W}^c.$$
	Similarly,
	$$\beta_M = \beta^o_P \wedge \beta^o_{\nu V} \wedge \beta^o_{\nu W} = (-1)^{(m-v)(m-w)}\beta^o_P \wedge \beta^o_{\nu W} \wedge \beta^o_{\nu V} = (-1)^{(m-v)(m-w)}\beta^o_V \wedge \beta^o_{\nu V},$$
	so
	$$\beta^0_{\nu V} = (-1)^{(m-v)(m-w)}\beta^c_{\nu V}.$$

	Thus
	$$\beta_M = \beta^o_P \wedge \beta^o_{\nu V} \wedge \beta^o_{\nu W} = (-1)^{(m-v)(m-w)}\beta^o_P \wedge \beta^c_{\nu V} \wedge \beta^c_{\nu W}.$$

	We conclude that $\beta^c_P = (-1)^{(m-v)(m-w)}\beta^o_P$.
\end{proof}

Now we show how to replace a general co-oriented fiber product with a co-oriented fiber product whose maps are embeddings.
In our remaining constructions in this section we take all introduced Euclidean spaces to be even-dimensional to simplify the signs in our computations.

\begin{lemma}
	Let $f \colon V \to M$ and $g \colon W \to M$ be transverse co-oriented maps from manifolds without boundary to an oriented manifold without boundary.
	Let $V\xhookrightarrow{e}M \times \R^a  \to M$ be a Quillen co-orientation for $f$ with $a$ even.

	Then $V \times_M W$ (with its orientation induced by the fiber product co-orientation and the orientation of $M$) is canonically oriented diffeomorphic to $V\times_{M \times \R^a }(W \times \R^a )$ (with its orientation induced by the fiber product co-orientation and the orientation of $M \times \R^a $).
	Here the maps for the second fiber product are $e \colon V \to M \times \R^a $ and $g \times \id_{\R^a } \colon W \times \R^a  \to M \times \R^a $.
	As in the construction of the Quillen co-orientation (\cref{D: Quillen normal or}), we assume $e \colon V \into M \times \R^a $ to be co-oriented so that its composition with the canonical co-orientation $(\beta_{M}\wedge\beta_a,\beta_M)$ is the co-orientation of $f$.
	We also take $g \times \id_{\R^a }$ to be co-oriented by the product co-orientation $(\beta_W \wedge \beta_a,\beta_M \wedge \beta_a)$ if $(\beta_W,\beta_M)$ is the co-orientation of $g$.
	Finally, $M \times \R^a $ is given the product orientation with $\R^a $ having the standard orientation.
\end{lemma}

\begin{proof}
	By the definitions of the induced orientation and the fiber product co-orientation, the co-orientation of the fiber product is obtained by identifying $V \times_M W$ with $(g\times \id_{\R^a})^{-1}(e(V)) \subset W \times \R^a$, and then induced orientation is $\beta_P$, where $\beta_P \wedge \beta_{\nu V} = \beta_W \wedge \beta_a$.
	We recall that the $\nu V$ in this formula is actually the pullback of the normal bundle of $e(V) \subset M \times \R^a $ via the map $g \times \id_{\R^a }: W \times \R^a  \to M \times \R^a $.
	But this is also exactly the description of the induced fiber product orientation from the co-oriented fiber product $V\times_{M \times \R^a }(W \times \R^a )$, treating $e \colon V \into M \times \R^a $ as its own Quillen co-orientation with $N = 0$ in \cref{D: pullback coorient}.
	In fact, the co-orientation of \cref{D: pullback coorient} is obtained precisely by identifying these two forms of the pullback.
\end{proof}

\begin{corollary}\label{C: co-oriented full transition to embedded}
	Let $f \colon V \to M$ and $g \colon W \to M$ be transverse co-oriented maps from manifolds without boundary to an oriented manifold without boundary.
	Let $V \xhookrightarrow{r} M \times \R^a  \to M$ and $W\xhookrightarrow{s} M \times \R^b  \to M$ be Quillen co-orientations compatible with $f$ and $g$.
	Then the fiber product $V \times_M W$ (with its orientation induced from the co-oriented fiber product) is canonically oriented diffeomorphic to the fiber product $(V \times \R^b ) \times_{M \times \R^a  \times \R^b }(W \times \R^a )$ (with its orientation induced from the co-oriented fiber product), in which the first map is $r \times \id_{\R^b }$ and the second map takes $(w,z) \in W \times \R^a $ to $s(w)$ in the first and third coordinates and $z$ in the second coordinate.
\end{corollary}

\begin{proof}
	By the preceding lemma we have $V \times_M W$ canonically oriented diffeomorphic to $V\times_{M \times \R^a }(W \times \R^a )$ with $V \to M \times \R^a $ an embedding.
	By \cref{P: graded comm}, the transposition map from this space to $(W \times \R^a ) \times_{M \times \R^a }V$ is $(-1)^{(m-v)(m-w)}$-orientation preserving, using that all our Euclidean spaces are taken even-dimensional.
	We next observe the map described for $W \times \R^a  \to M \times \R^a  \times \R^b $ is an embedding whose composition with the projection to $M \times \R^a $ gives a Quillen co-orientation for $g \times \id_{\R^a }$.
	Now we can apply the lemma again and then transpose again with the same sign, so that the signs cancel out.
\end{proof}

The preceding lemma and corollary concerned orientations obtained from co-orientations. 
Next we consider oriented manifolds and maps that are not necessarily co-oriented and show how to replace the oriented fiber product with an oriented fiber product whose maps are embeddings.
Again, we take all introduced Euclidean spaces to be even-dimensional to simplify the signs.

\begin{lemma}
	Let $f \colon V \to M$ and $g \colon W \to M$ be transverse maps from oriented manifolds without boundary to an oriented manifold without boundary.
	Let $V \xhookrightarrow{e}M \times \R^a  \to M$ be a factorization of $f$ with $e$ an embedding.
	Then $V \times_M W$ is canonically oriented diffeomorphic to the oriented fiber product $V\times_{M \times \R^a } (W \times \R^a )$ of $e \colon V \to M \times \R^a $ and $g \times \id_{\R^a } \colon W \times \R^a  \to M \times \R^a $.
\end{lemma}

\begin{proof}
	We will first show that $V \times_M W$ is canonically oriented diffeomorphic to the fiber product $V\times_{M \times \R^a } (W \times \R^a )$ with the map $V \to M \times \R^a $ being the composition of $f$ with the inclusion $M = M \times \{0\} \into M \times \R^a $.
	We will write this composite as $f_0$.
	The maps $f_0$ and $g \times \id_{\R^a }$ are transverse as $f$ and $g$ are transverse in $M$ and the $\id_{\R^a }$ factor takes care of the $\R^a $ factor of the tangent spaces.
	We also observe that the two fiber products are canonically the same as spaces, as $V \times_M W = \{(v,w) \in V \times W \mid f(v) = g(w)\}$, while the other fiber product is $\{(v,w,0) \in V \times W \times \R^a \mid f(v) = g(w)\}$.

	Now we consider the orientations. 
	Let us choose a point $p = (v,w) \in P = V \times_M W$ and let $z=f(v)=g(w)\in M$.
	As the tangent space of the pullback is the pullback of the tangent spaces by \cref{L: tangent of pullbacks}, we have $T_pP = T_vV \times_{T_z(M)} T_wW \subset T_vV \oplus T_wW$.
	By the definition of the fiber product orientation in \cref{S: orientation of fiber products}, we consider the map
	\begin{equation*}
		\Phi \colon T_pP \oplus T_zM \to T_vV \oplus T_wW
	\end{equation*}
	given by $\Phi((a,b),c) =(a,b)+s(c)$, where $s$ is a splitting of the map $T_vV \oplus T_wW \to T_zM$ that takes $(a,b)$ to $Df(a)-Dg(b)$.
	We recall from \cref{S: orientation of fiber products} that the orientation of $P$ is chosen so that $\Phi$ is an orientation preserving isomorphism up to a sign of $(-1)^{wm}$.

	In the case of $V\times_{M \times \R^a } (W \times \R^a )$, if we write $P'$ for the fiber product, 
	we have $T_{(p,0)}P' = T_vV \times_{T_z(M)} T_{(w,0)}(W \oplus \R^a) \subset T_vV \oplus T_{(w,0)}(W \oplus \R^a)$.
	As $Df_0 = (Df,0)$, we have $T_{(p,0)}P' = \{(a,b,0) \in T_vV \oplus T_{(w,0)}(W \oplus \R^a) \mid Df(a)=Dg(b)\}$, so $T_{(p,0)}P'$ is canonically isomorphic to $T_pP =  \{(a,b) \in T_vV \oplus T_wW  \mid Df(a)=Dg(b)\}$.
	In this case, we consider the map 
	\begin{equation}\label{E: fiber plus euclidean}
		\Psi: T_{(p,0)}P' \oplus T_zM \oplus T_0\R^a  \to T_vV \oplus T_wW \oplus T_0\R^a ,
	\end{equation}
	with the restriction of $\Psi$ to $T_{(p,0)}P'$ again being the projection maps, while the restriction to $T_zM \oplus T_0\R^a$ must be a splitting of the map $\Upsilon: T_vV \oplus T_{(w,0)}(W \oplus \R^a)  \to T_{(z,0)}(M \oplus \R^a)$ that is $Df_0$ on the first factor and $-D(g \oplus \id_{\R^a })$ on the last two factors.
	We claim that we can take $\Psi((a,b,0),c,u) = (a,b,0)+(s(c),0)-(0,0,u)$, with the splitting map $s$ as above.
	This is certainly correct on the $P$ factor.
	For the $M \oplus \R^a $ factor, we must show $\Upsilon \Psi(0,c,u) = (c,u)$.
	We have $\Psi(0,c,u) = (s(c),0)-(0,0,u)$, noting that $s(c) \in T_vV \oplus T_wW$.
	If we write $s(c) = (s_V(c),s_W(c))$, then by definition $Df(s_V(c))-Dg(s_W(c)) = c$.
	So we have
	\begin{align*}
		\Upsilon \Psi(0,c,u) & =
		\Upsilon((s(c),0)-(0,0,u))\\& =
		\Upsilon(s_V(c),s_W(c),-u)\\& =
		Df_0(s_V(c))-(Dg(s_W(c)),-u)\\& =
		(Df(s_V(c)),0)-(Dg(s_W(c)),-u)\\& =
		(Df(s_V(c))-Dg(s_W(c)),u)\\& =
		(c,u).
	\end{align*}
	So our definition of $\Psi$ suffices for determining the orientation of the fiber product.

	As $\Phi$ and $\Psi$ agree in the first two factors (identifying $T_pP$ and $T_{(p,0)}P'$ in the obvious way) and the dimension of $\R^a $ is even, we see that $\Psi$ is orientation-preserving if and only if $\Phi$ is.
	Furthermore, we have $(-1)^{w(m+a)} = (-1)^{wm}$, so the two fiber product orientations agree in this case.

	Next we must generalize from $f_0 \colon V \to M \times \R^a $ to the general case of $e \colon V \to M \times \R^a $.
	By assumption, $f \colon V \to M$ is the composition of $e$ with the projection $M \times \R^a  \to M$, so we may write $e(v) = (f(v), e_{\R}(v))$, and there is a fiberwise homotopy $H \colon V \times I \to M \times \R^a $ from $e$ to $f_0$ given by $H(v,t) = (f(v), te_{\R}(v))$.
	We note that $H$ and $e$ are each transverse to $g \times \id_{\R^a }$.
	Indeed, if $e(v) = (g \times \id_{\R^a })(w,u)$, then $(f(v),e_{\R}(v)) = (g(w),u)$.
	The image of the derivative of $g \times \id_{\R^a }$ at such a point will span $Dg(T_wW) \oplus T(\R^a )$, while the derivative of $e$ will have the form $(Df,De_{\R})$.
	But the image of $D(g \times \id_{\R^a })$ already spans $0\oplus \R^a $, so $De(T_vV)+D(g \times \id_{\R^a })T_{(w,u)} = (Df,0)T_vV+(Dg,0)T_wW+(0,\id_{\R^a })T_u\R^a = T_{(z,u)}(M \times \R^a )$.
	The same argument holds for $H(-,t)$ for any fixed $t$, replacing $De_{\R}$ with $tDe_{\R}$.
	But if each $H(-,t)$ is transverse to $g \times \id_{\R^a }$ then so is $H$.

	It follows that we can form the oriented fiber product of $H$ and $g \times \id_{\R^a }$ over $M \times \R^a $.
	In fact, this fiber product is diffeomorphic to $P \times I$: Noting that we have $H(v,t) = (f(v),te_{\R}(v)) = (g(w),u)$ if and only if $f(v) = g(w)$ and $te_{\R}(v) = u$, we obtain a diffeomorphism $P \times I \to (V \times I)\times_{M \times \R^a }(W \times \R^a )$ given by $((v,w),t) \mapsto ((v,t),(w, te_{\R}(v))$ with inverse $((v,t),(w,u)) \mapsto ((v,w),t)$.
	So this space is a cylinder and the two ends correspond to our two versions of $V\times_{M \times \R^a } (W \times \R^a )$, one mapping $V$ by $f_0$ and the other by $e$.
	Since we have a cylinder, these two end spaces are oriented diffeomorphic, and canonically so by our construction.

	Putting this oriented diffeomorphism together with the one constructed above gives the desired oriented canonical diffeomorphism with the original $V \times_M W$.
\end{proof}

\begin{corollary}\label{C: oriented full transition to embedded}
	Let $f \colon V \to M$ and $g \colon W \to M$ be transverse maps from oriented manifolds without boundary to an oriented manifold without boundary.
	Let $V\xhookrightarrow{r} M \times \R^a  \to M$ and $W\xhookrightarrow{s} M \times \R^b  \to M$ be factorizations of $f$ and $g$ with $r$ and $s$ embeddings.
	Then the oriented fiber product $V \times_M W$ is canonically oriented diffeomorphic to the fiber product $(V \times \R^b )\times_{M \times \R^a  \times \R^b }(W \times \R^a )$, in which the first map is $r \times \id_{\R^b }$ and the second map takes $(w,z) \in W \times \R^a $ to $s(w)$ in the first and third coordinates and $z$ in the second coordinate.
\end{corollary}

\begin{proof}
	As in the proof of \cref{C: co-oriented full transition to embedded},
	we apply the preceding lemma to get $V \times_M W$ canonically oriented diffeomorphic to $V\times_{M \times \R^a }(W \times \R^a )$.
	Then we use the graded commutativity rule for oriented fiber product, as given by \cref{P: commute oriented fiber},
	by which
	the transposition map to $(W \times \R^a )\times_{M \times \R^a }V$ is $(-1)^{(m-v)(m-w)}$-orientation preserving, using that all our Euclidean spaces are taken even-dimensional.
	Then we observe the map described for $W \times \R^a  \to M \times \R^a  \times \R^b $ is an embedding whose composition with the projection to $M \times \R^a $ is $g \times \id_{\R^b }$.
	Now we apply the lemma again and then transpose again.
\end{proof}

\begin{proof}[Proof of \cref{P: compare cup and intersection orientations}]
	By \cref{C: co-oriented full transition to embedded,C: oriented full transition to embedded}, the proposition reduces to \cref{L: compare cup and intersection for immersions}.
\end{proof}

\subsection{Appendix: Lipyanskiy's co-orientations}\label{S: Lipyanskiy co-orientations}

In \cite{Lipy14}, Lipyanskiy uses a different notion of co-orientation from the one we have used to define geometric cochains.
We here discuss Lipyanskiy's co-orientations, which he initially refers to as \textit{orientations of maps}, and show that for a smooth map $f \colon M \to N$, his definition is equivalent to our definition, up to possible sign conventions.
In other words, we show that a smooth map is co-orientable in our sense if and only if it is co-orientable in Lipyanskiy's sense.
We will not explore the precise differences between the specific co-orientation conventions.
We will also see that this alternative framework is in some sense dual to Quillen's approach to co-orientations that we presented in \cref{S: Quillen}: while Quillen's formulation involves replacing arbitrary maps with embeddings, the formulation here involves replacing arbitrary bundle maps with surjective bundle maps.

To define co-orientations, Lipyanskiy utilizes the determinant line bundles of Donaldson and Kronheimer in \cite[Section 5.2.1]{DoKr90}.
A key point throughout our discussion will be the following lemma, which is \cite[Lemma 5.2.2]{DoKr90}.
Donaldson and Kronheimer actually state (without proof) a stronger version of the lemma---that the isomorphism is canonical---but we will not need that for our purposes.
For the statement of the lemma, recall our definition of $\Or(V)$ in \cref{D: det bundle}.

\begin{lemma}\label{L: det sequence}
	Given an exact sequence of vector bundles
	\[
	0 \to V_1 \xr{d_1} \cdots \xr{d_{m-1}} V_m \to 0,
	\]
	there is an isomorphism
	\[
	\bigotimes_{i\ \text{odd}} \Or(V_i) \ \cong
	\bigotimes_{i\ \text{even}} \Or(V_i).
	\]
\end{lemma}

\begin{proof}
	It is implicit in the hypothesis of exactness that the kernels and image of the maps in the sequence are well-defined vector bundles so that it makes sense to say $\im(d_{i-1}) = \ker(d_{i})$ as objects in the category of vector bundles.
	We thus have for each $i$ a short exact sequence
	\[
	0 \to \ker(d_i) \to V_i \to \im(d_i) \to 0,
	\]
	and since short exact sequences of vector bundles split \cite[Theorem 3.9.6]{Hus75}, we have $V_i \cong \ker(d_i) \oplus \im(d_i) = \im(d_{i-1}) \oplus \im(d_i)$.
	Consequently,
	\[
	\bigotimes_{i\ \text{odd}} \Or(V_i)\, \cong
	\bigotimes_{i\ \text{odd}} \Or(\im(d_{i-1}) \oplus \im(d_i))\, \cong
	\bigotimes_{i\ \text{odd}} \Or(\im(d_{i-1})) \otimes \Or(\im(d_i))\, \cong
	\bigotimes_{\text{all}\ i} \Or(\im(d_{i})),
	\]
	and similarly for the other tensor product.
\end{proof}

We can now define the Donaldson-Kronheimer determinant line bundles as in \cite[Section 5.2.1]{DoKr90}.
Donaldson and Kronheimer work in a more general setting, but we will confine ourselves to considering a map of vector bundles $F \colon E \to E'$ over $M$.
At first, we also assume that $\ker(F)$ and $\cok(F)$ are well-defined vector bundles.
Then the Donaldson-Kronheimer determinant line bundle is defined to be
$$\Or(\ker(F)) \otimes \Or(\cok(F))^*,$$
where the $*$ over $\Or(\cok(F))$ denotes the dual line bundle.
Below we will consider that $\ker(F)$ and $\cok(F)$ are not always vector bundles, but for now we see that the determinant bundle is morally related to the index of an operator.
We refer to \cite[Section 5.2.1]{DoKr90} for a more precise statement of the relationship.

To relate the Donaldson-Kronheimer determinant line bundle to our notion of co-orientation, consider the exact sequence of vector bundles
\begin{equation*}
	0 \to \ker(F) \to E \to E' \to \cok(F) \to 0.
\end{equation*}
Applying \cref{L: det sequence}, we have $\Or(\ker(F)) \otimes \Or(E') \cong \Or(E) \otimes \Or(\cok(F))$.
Next we use that for a line bundle $L$ we have $L \otimes L^* \cong \underline{\R}$, the trivial line bundle.
So multiplying both sides by $\Or(\cok(F))^*$ and $\Or(E')^*$, we get
$$\Or(\ker(F)) \otimes \Or(\cok(F))^* \cong \Or(E) \otimes \Or(E')^*.$$
The latter is isomorphic to $\Hom(\Or(E'), \Or(E))$, which is dual to $\Hom(\Or(E), \Or(E'))$.
In particular, $\Hom(\Or(E), \Or(E'))$ is trivial, and so admits a non-zero section, if and only if the Donaldson-Kronheimer determinant bundle $\Or(\ker(F)) \otimes \Or(\cok(F))^*$ is trivial.

In the setting of a smooth map $f \colon M \to N$, we can think of the derivative $Df$ as a map $Df \colon TM \to f^*(TN)$, and then the above demonstrates that $\Hom(\Or(TM), \Or(f^*(TN)))$ is trivial if and only if the determinant bundle $\Or(\ker(Df)) \otimes \Or(\cok(Df))^*$ is trivial.
We recall that the triviality of
\[
\Hom(\Or(TM), \Or(f^*(TN)))
\]
is the condition for co-orientability of $f$ in the sense of \cref{D: co-orientations}.
Our co-orientations in this setting are equivalence classes of non-zero sections of $\Hom(\Or(TM), \Or(f^*(TN)))$ up to positive scalars or, equivalently, orientations of this line bundle.
Lipyanskiy's co-orientations are orientations of $\Or(\ker(Df)) \otimes \Or(\cok(Df))^*$.
As orientations of line bundles exist if and only if the line bundle is trivial, the two notions of co-orientability coincide.
We leave it to the reader to define the isomorphisms in sufficient detail to carry a particular co-orientation as defined in \cref{S: co-orientations} to one of Lipyanskiy's co-orientations.

The problem with the preceding analysis is that in general $\ker(Df)$ and $\cok(Df)$ do not necessarily have the same dimensions from fiber to fiber, and so $\ker(Df)$ and $\cok(Df)$ are not necessarily well defined as vector bundles.
The solution is to reframe the definition of the determinant line bundle as in \cite{DoKr90} so that it is always well defined and such that it is isomorphic to $\Or(\ker(F)) \otimes \Or(\cok(F))^*$ when it is also well defined.

For this, let $\underline{\R}^n$ be the trivial $\R^n$ bundle over $M$, and suppose we have a map $\psi \colon \underline{\R}^n \to E'$ such that $F \oplus \psi \colon E \oplus \underline{\R}^n \to E'$ is surjective\footnote{Donaldson and Kronheimer work with complex vector bundles, so \cite{DoKr90} features $\underline{\C}^n$ rather than $\underline{\R}^n$.}; here we write $F \oplus \psi$ for the map $(x,y) \to F(x) + \psi(y)$. 
Such a map will always exist in our setting, as we defined manifolds with corners to be embedded in finite dimensional Euclidean space.
Hence tangent bundles are subbundles of trivial bundles and so also the images of projections of trivial bundles (or, up isomorphism, quotients of the trivial bundle by their orthogonal complements after endowing the trivial bundle with a Riemannian structure).
The gain is that $F \oplus \psi$ then has trivial cokernel and a kernel that is a vector bundle, as now the fibers of the kernel have a fixed dimension.
We then define the determinant line bundle to be
$$\mathscr L = \Or(\ker(F \oplus \psi)) \otimes \Or(\underline{\R}^n)^* \cong \Or(\ker(F \oplus \psi)).$$

In the case where $\ker(F)$ and $\cok(F)$ were already vector bundles, $\mathscr L$ is isomorphic to the earlier Donaldson-Kronheimer determinant line bundle using \cref{L: det sequence} and the following lemma:

\begin{lemma}
	If $F \colon E \to E'$ and $\psi \colon \underline{\R}^n \to E'$ are bundle maps with $F \oplus \psi \colon E \oplus \underline{\R}^n \to E'$ surjective and $\ker(F)$ and $\cok(F)$ well-defined vector bundles, then the following sequence is exact\footnote{This exact sequence appears incorrectly in \cite{DoKr90} with the $\psi$ in place of $F$ in the first and last terms.}:
	\[
	\begin{tikzcd}[column sep=small]
		0 \arrow[r] & \ker(F) \arrow[r] & \ker(F \oplus \psi) \arrow[r] & \underline{\R}^n \arrow[r] & \cok(F) \arrow[r] & 0.
	\end{tikzcd}
	\]
\end{lemma}

\begin{proof}
	This exact sequence is simply the snake lemma exact sequence obtained from the commutative diagram of exact sequences
	\[
	\begin{tikzcd}
		0 \arrow[r] & E  \arrow[r] \arrow[d, "F"] & E \oplus \underline{\R}^n \arrow[r] \arrow[d, "F \otimes \psi"] & \underline{\R}^n \arrow[r] \arrow[d] & 0 \\
		0 \arrow[r] & E' \arrow[r, "="] & E' \arrow[r] & 0 \arrow[r] & 0.
	\end{tikzcd}
	\]
	The category of vector bundles over a space is not technically an abelian category, but one can check by hand for this diagram that, with our assumptions, all the maps of the exact sequence are well defined and the exactness then holds fiberwise by the classical snake lemma.
	In particular, the map $\underline{\R}^n \to \cok(F)$ is the composition of the splitting map $\underline{\R}^n \to E \oplus \underline{\R}^n$, the map $F \oplus \psi$, and the projection $E'$ to $\cok(F)$.
\end{proof}

Combining this lemma with \cref{L: det sequence} gives us an isomorphism
$$\Or(\ker(F)) \otimes \Or(\underline{\R}^n) \cong \Or(\ker(F \oplus \psi)) \otimes \Or(\cok(F)).$$
Multiplying both sides by $\Or(\underline{\R}^n)^* \otimes \Or(\cok(F))^*$ and using again that for a line bundle $L$ we have $L \otimes L^* \cong \underline{\R}$, we obtain
$$\Or(\ker(F)) \otimes \Or(\cok(F))^* \cong \Or(\ker(F \oplus \psi)) \otimes \Or(\underline{\R}^n)^*.$$
So, as promised, the two definitions of the Donaldson-Kronheimer determinant line bundle agree (up to canonical isomorphisms) when $\ker(F)$ and $\cok(F)$ are defined.

Finally, we should observe that the construction of $\mathscr L$ is independent, at least up to isomorphism, of the choice of $\psi$ and $n$.
Clearly $\Or(\underline{\R}^n) \cong \Or(\underline{\R}^n)^* \cong \underline{\R}$ for all $n$, so we must only show that if $\psi_1 \colon \underline{\R}^n \to E'$ and $\psi_2 \colon \underline{\R}^m \to E'$ are two maps satisfying the requirement of the definition then $\Or(\ker(F \oplus \psi_1)) \cong \Or(\ker(F \oplus \psi_2))$.
Adapting an argument in \cite[Section 5.1.3]{DoKr90}, we note that the bundle maps
\begin{align*}
	F \oplus \psi_1 \oplus 0 \colon &E \oplus \underline{\R}^{n+m} \to E'\\
	F \oplus 0 \oplus \psi_2 \colon &E \oplus \underline{\R}^{n+m} \to E'
\end{align*}
are each homotopic through fiberwise linear homotopies to $F \oplus \psi_1 \oplus \psi_2$, and so they are homotopic to each other.
Furthermore, these are homotopies through surjective bundle maps, so we can write the homotopy between the two maps as a surjective bundle map $(E \oplus \underline{\R}^{n+m}) \times I \to E' \times I$ over $M \times I$.
Thus we have a well-defined kernel bundle over $M \times I$, which implies that the kernel bundles over $M \times \{0\}$ and $M \times \{1\}$ are isomorphic.
But, up to reordering the summands, these are, respectively, $\ker(F \oplus \psi_1) \oplus \underline{\R}^m$ and $\ker(F \oplus \psi_2) \oplus \underline{\R}^n$.
Therefore,
$$\Or(\ker(F \oplus \psi_1) \oplus \underline{\R}^m) \cong \Or(\ker(F \oplus \psi_2) \oplus \underline{\R}^n).$$
But
$$\Or(\ker(F \oplus \psi_1) \oplus \underline{\R}^m) \cong \Or(\ker(F \oplus \psi_1)) \otimes \Or(\underline{\R}^m) \cong \Or(\ker(F \oplus \psi_1)),$$
and similarly for the other bundle.
So $\Or(\ker(F \oplus \psi_1)) \cong \Or(\ker(F \oplus \psi_2))$.