\documentclass{amsart}
\usepackage{amssymb, amsmath, amsfonts, verbatim, mathtools, stmaryrd, tabularx}
\usepackage{bm}
\usepackage{mathbbol}
\usepackage{ulem} % Used in the To-Do list
\usepackage[all]{xy}
\usepackage{tikz-cd}
\usepackage{caption}
\usepackage{subcaption}
\usepackage{mathrsfs}
\usepackage{babel}
\usepackage{standalone}
\usepackage{tikz}
\usetikzlibrary{decorations.pathmorphing}
\tikzset{snake it/.style={decorate, decoration=snake}}

\usepackage[bookmarks=true, linktocpage=true,
	bookmarksnumbered=true, breaklinks=true,
	pdfstartview=FitH, hyperfigures=false,
	plainpages=false, naturalnames=true,
	colorlinks=true, pagebackref=true,
	pdfpagelabels]{hyperref}
\hypersetup{
	linkcolor=blue, citecolor=blue,
	urlcolor=blue, colorlinks=true,
}
\usepackage[capitalise,noabbrev,nosort]{cleveref}
\newcommand{\creflastconjunction}{, and\nobreakspace} %makes cleveref use serial commas



%\topmargin0.0cm
%\headheight0.0cm
%\headsep0.0cm
%\oddsidemargin0.0cm
%\textheight23.0cm
%\textwidth16.5cm
%\footskip1.0cm

\input{auxy/commands}

\begin{document}

 NOTE: CLARIFY $K_*(X)$ vs $K_*(M)$ IN PREVIOUS STUFF


SEE IF FLOWS GIVES THE COMPACT CASE IN GENERAL

\subsubsection{S: intersection map cup}


In \cref{T: intersection is cup product} we showed that singular cohomology and geometric cohomology on a manifold without boundary are isomorphic as algebras with the cup products providing the multiplications. Ideally, we would like to have this isomorphism realized by an explicit map. Given \cref{T: equivalent cap} concerning the cap product, it is natural to conjecture as follows:

\begin{conjecture}\label{cup conjecture}
Let $M$ be a manifold without boundary given the smooth cubulation $X$. Then the intersection map  $\mc I \colon C^*_{\Gamma \pf X}(M) \to K^*(X)$ induces on cohomology with cup products an isomorphism of algebras. In particular, we have algebra isomorphisms $H^*_{\Gamma\pf X}(M) \xleftarrow{\cong} H^*_{\Gamma\pf X}(M)\xr{\mc I} H^*(K^*(X))$. Using the extended definition of $\mc I$ from \cref{R: intersection map extension}, we can write the conjecture as 
$$\mc I(\uV \uplus \uW) = \mc I(\uV) \smile \mc I(\uW).$$
\end{conjecture}

We will show just below that the map to the left, which is induced by inclusion and is an isomorphism by \cref{T: transverse complex}, is an algebra isomorphism, which includes showing that the cup product is well defined in $H^*_{\Gamma\pf X}(M)$. We know that the map $\mc I$ is an isomorphism when $H^*(X)$ is finitely generated in each degree by \cite{T: intersection qi}. 

Unfortunately, we have not been able to show that $\mc I$ is a map of algebras, even when $H^*(X)$ is finitely generated. However, the main result of \cite{FMS-flows} implies the conjecture is true when $M$ is compact. We also have some partial results, which we state below, that imply the conjecture in other cases, including if $H^i(M)$  either is all torsion or is torsion-free in each degree. These results are presented in the remainder of \cref{S: intersection map cup}.



\begin{proposition}
Let $M$ be a manifold without boundary, and suppose $M$ has smooth cubulation $X$. The isomorphism $H^*_{\Gamma\pf X}(M)\to H^*_{\Gamma\pf X}(M)$ is a map of algebras. In particular, the cup product on $H^*_{\Gamma\pf X}(M)$ can be defined using only cochains in $C^*_{\Gamma \pf X}(M)$.
\end{proposition}
\begin{proof}
It suffices to prove the last statement, i.e.\ that for any cohomology classes $\uV,\uW\in H^*_\Gamma(M)$ there exist representatives $f \colon V \to M$ and $g \colon W \to M$ in $PC^*_{\Gamma \pf X}(M)$ such that the fiber product $V \times_M W$ is also in $PC^*_{\Gamma \pf X}(M)$. Then we can define the cup product $\uV \uplus \uW \in H^*_{\Gamma\pf X}(M)$ as the class represented by $V \times_M W$.  Indeed, if $V'$ and $W'$ are any other such classes in $PC^*_{\Gamma \pf X}(M)$ representing $\uV$ and $\uW$, then we know from the well-definedness of the cup product in $H^*_\Gamma(M)$ that $V \times_M W$ and $V' \times_M W'$ represent the same element of $H^*_\Gamma(M)$ and so the same element of $H^*_{\Gamma\pf X}(M)$.

So suppose $f \colon V \to M$ and $g \colon W \to M$ represent $\uV,\uW\in H^*_{\Gamma\pf X}(M)$. 
Let $h$ be the map representing the cubulation, thought of as a disjoint union of top-dimensional cubes mapping to $M$. We can let $X$ denote this disjoint union of cubes mapping to $M$ and note that this contains the same information as the cubulation. By \cref{T: transverse complex}, we can assume that $g:W \to M$ is transverse to the cubulation. 
As we have assumed $W$ is transfer to the cubulation, $W \times_M X$ is well defined as a manifold with corners mapping to $M$ (ignoring (co)-orientation considerations for the moment). 
Next, let us consider the union $W\sqcup X\sqcup (W\times_M X)$ as a single manifold with corners over $M$. By \cref{P: perturb transverse to map}, there is a proper universal homotopy from $f$ to a map $f':V\to M$ that is transverse to this union; $f'$ represents the same cohomology class as $f$ (in $H^*_{\Gamma}(M)$ and so also in $H^*_{\Gamma\pf X}(M)$ as $f'$ is transverse to $h$) by an application of \cref{P: universal homotopy}. By \cref{P: 3 out of 4 trans}, since $W$ is transverse to $X$ and our new $f' \colon V \to M$ is transverse to both $W$ and $W\times_MX$, we also have that $X$ is transverse to $f'\times g \colon V\times_M W \to M$. 
\end{proof}


\begin{theorem}
Let $M$ be a \emph{compact} manifold without boundary given the smooth cubulation $X$. Then the intersection map  $\mc I \colon C^*_{\Gamma \pf X}(M) \to K^*(X)$ induces on cohomology an isomorphism of algebras. In particular, we have algebra isomorphisms $H^*_{\Gamma\pf X}(M) \xleftarrow{\cong} H^*_{\Gamma\pf X}(M)\xr{\mc I} H^*(K^*(X)).$
\end{theorem}
\begin{proof}
Suppose $V,W\in PC^*_{\Gamma\pf X}(M)$ represent $\uV,\uW\in H^*_{\Gamma\pf X}(M)$. By \cite[Theorem 1.1]{FMS-flows}, there is a flow $\mathbf{f}_t$ and a time $t$ such that $\mathbf{f}_t(V)$ and $\mathbf{f}_{-t}(W)$ are transverse and $\mc I(\mathbf{f}_t(V)\times_M \mathbf{f}_{-t}(W))=\mc I(\mathbf{f}_t(V)) \smile \mc I(\mathbf{f}_{-t}(W)).$
The flows provide universal universal homotopies, and so $\mathbf{f}_t(V)$ and $\mathbf{f}_{-t}(W)$ represent the same cohomology classes as $V$ and $W$, respectively. Thus $\mathbf{f}_t(V)\times_M \mathbf{f}_{-t}(W)$ represents $\uV \uplus \uW$, and the theorem follows. 
\end{proof}


We next remove the compactness assumption. In this case, we cannot prove \cref{cup conjecture} in generality, but we can show that  
$\mc I(\uV \uplus \uW)$ and $\mc I(\uV) \smile \mc I(\uW)$ have the same image under the evaluation map to $\Hom(H_*(K_*(X)),\Z)$. We can also show they agree if $H^*(M)$ is finitely generated and in each degree and these expressions are torsion elements. We first need the following transversality lemma.


\begin{lemma}\label{L: trans diag cube}
Let $M$ be a manifold without boundary and let $V$, $W$, and $Z$ be  manifolds with corners. Suppose $f:V\to M$ and $g:W\to M$ are transverse and that $f\times_Mg:V\times_MW\to M$ is transverse to $h:Z\to M$. Then $f\times g:V\times W\to M\times M$ is transverse to the composition $Z\xr{h}M\xr{\diag}M\times M$, where $\diag:M\to M\times M$ is the diagonal map. 
\end{lemma}
\begin{proof}
We will apply \cref{L: transverse to pullback}. Consider the pullback diagram
	\[
	\begin{tikzcd}
		& (V \times W)\times_{M\times M} M \arrow[r, "\pi_{V\times W}"] \arrow[d, "\pi_M"] & V\times W \arrow[d, "f\times g"] \\
		Z \arrow[r, "h"] & M \arrow[r, "\diag"]&  M\times M.
	\end{tikzcd}
	\]
As $V$ and $W$ are transverse, we know that $f\times g:V\times W\to M\times M$ and $\diag:M\to M\times M$ are transverse by \cref{P: cross to cup}, and so by \cref{L: transverse to pullback}, the conclusion of the lemma holds if and only if $h$ is transverse to the projection $\diag^*(V\times W)=(V \times W)\times_{M\times M} M \to M$. But now by \cref{P: cross to cup} again, this pullback projection is precisely $f\times_Mg:V\times_MW\to M$. So the needed transversality holds by hypothesis. 
\end{proof}



\begin{proposition}
Let $M$ be a smoothly cubulated manifold without boundary with cubulation $X$. Let $\uV,\uW\in H^*_\Gamma(M)$. Then the cohomology classes $\mc I(\uV\uplus\uW)\in H^*(K_X^*(M))$ and $\mc I(\uV) \smile \mc I(\uW)\in H^*(K_X^*(M))$ have the same image under the evaluation map $$H^*(K_X^*(M))\to \Hom(H_*(K_*^X(M)),\Z).$$ 
\end{proposition}

\begin{proof}
Let $Z$ be a cubical cycle representing an element of $H_*(K_*^X(M))$. As in \cref{S: cubical products}, we can consider $Z$ to also represent a smooth normalized singular cubical chain in $NK_*(M)$. We also have from that section a smooth chain homotopy of normalized singular cubes  in $M\times M$ between $\diag(Z)$ and $\zeta\xi\diag(Z)$. Let $Y$ be a smooth singular cubical chain representing this homotopy. Since $Z$ is a cycle, we have (up to choice of orientation) $\bd Y=\diag(Z)-\zeta\xi\diag(Z)+Q$, where $Q$ is a degenerate singular cubical chain. Recall that we can also think of $\diag(Z)$, $\zeta\xi\diag(Z)$, and $Q$ as representing elements of $PC^\Gamma_*(M\times M)$. For simplicity of notation, we write $\diag(Z)$, $\zeta\xi\diag(Z)$ to represent these manifolds with corners, each of which is a union of signed cubes mapping to $M\times M$. 

In order to proceed from here, we need to establish chain and cochain representatives with sufficient transversality to begin computing intersections. 

First, choose $f:V\to M$ and $g:W\to M$ representing $\uV$ and $\uW$. Let $h$ be the map representing the cubulation, thought of as a disjoint union of top-dimensional cubes mapping to $M$. We can let $X$ denote this disjoint union of cubes mapping to $M$ and note that this contains the same information as the cubulation. By \cref{T: transverse complex}, we can assume that $g:W\to M$ is transverse to the cubulation. So $W\times_MX$ is well defined as a manifold with corners mapping to $M$ (ignoring (co)-orientation considerations for the moment). 
Next, let us consider the union $W\sqcup X\sqcup (W\times_M X)$ as a single manifold with corners over $M$. By \cref{P: perturb transverse to map} there is a proper universal homotopy from $f$ to a map $f':V\to M$ that is transverse to this union; $f'$ represents the same cohomology class as $f$ by an application of \cref{P: universal homotopy}. Abusing notation, let us rechristen this new transverse map $f:V\to M$.  By \cref{P: 3 out of 4 trans}, since $W$ is transverse to $X$ and $V$ is transverse to both $W$ and $W\times_MX$, we also have that $X$ is transverse to $V\times_M W$. 

Next, consider $V\times W$ in $M\times M$. As $V$ and $W$ are each transverse to the cubulation $X$, we have $V\times W$ transverse to the product cubulation $X\times X$ by the proof of \cref{P: oriented interchange}. 
Also, as $V$ and $W$ are transverse and as $V\times_MW$ is transverse to the cubulation $X$, \cref{L: trans diag cube} shows that $V\times W$ is transverse to the cubulation of the embedded diagonal  $\diag(X)$. So, as $Z$ is a cubical chain with respect to the cubulation $X$ and $\zeta\xi\diag(Z)$ is composed of cubes of the product cubulation $X\times X$, we see that the singular cubical chains $\diag(Z)$ and  $\zeta\xi\diag(Z)$ are transverse to $V\times W$. So now by \cref{P: perturb transverse to map}, there is a universal homotopy $H$ that takes $Y$ (now considered as an element of $PC^\Gamma_*(M\times M)$) to a $Y'$ that is transverse to $V\times W$ and such that the traces of the restrictions of the homotopy to $\diag(Z)$ and  $\zeta\xi\diag(Z)$
are also transverse to  $V\times W$. 

We construct an element $A\in PC^\Gamma_*(M\times M)$ from the end of the homotopy and the traces of $\diag(Z)$ and $\zeta\xi\diag(Z)$. To simplify notation, recall from \cref{S: covariant functoriality} that if we have $r_U:U\to M$ representing an element that we call $U\in PC^\Gamma_*(M)$ and if we have a map $F:M\to N$, then we write $F(U)$ for the corresponding element of $PC^\Gamma_*(M)$, represented by the composition $U\xr{r_U}M\xr{F}M$.
Utilizing this notation, and also letting $H_1=H(-,1):M\times M\to M\times M$ and noting that $H(-,0)=\id$, we define $A\in PC^\Gamma_*(M\times M)$ to be the union of the following:
\begin{enumerate}
\item $Y'=H_1(Y)$, i.e.\ if $r_Y:Y\to M\times M$ represents $Y$ as an element of $PC^\Gamma_*(M)$, then $Y'$ is represented by  the composition $Y\xr{r_Y} M\times M\xr{H_1}M\times M$, 

\item $\pm H(\diag(Z)\times I)$, i.e.\ the homotopy $\diag(Z)\times I\xr{r_{\diag(Z)}\times \id_I} M\times M\times I\xr{H}M\times M$, with the sign chosen so that its boundary will include $\diag(Z)-H_1(\diag(Z))$,

\item $\pm H(\zeta\xi\diag(Z)\times I)$, i.e.\ the homotopy $\zeta\xi\diag(Z)\times I\xr{r_{\zeta\xi\diag(Z)}\times \id_I} M\times M\times I\xr{H}M\times M$, with the sign chosen so that its boundary will include $H_1(\zeta\xi\diag(Z))-\zeta\xi\diag(Z)$.
\end{enumerate}
Then, as observed above, $A$ is transverse to $V\times W$. Furthermore, as elements in $C_*^\Gamma(M\times M)$, we have $\bd Y=\bd A$, applying \cref{P: universal homotopy} and using that $\bd Z=0\in C_*^\Gamma(M\times M)$.



Now, at last we can compute. To fix our indices, we assume as usual that $\dim(M)=m$, $\dim(V)=v$, and $\dim(W)=w$, so $\dim(V\times_MW)= v+w-m$, which is the dimension of an $m-(v+w-m)=2m-v-w$ cochain. So we take $\dim(Z)=2m-v-w$, which implies $\dim(A)=\dim(Y)=2m-v-w+1$. So $\dim((V\times W)\times_{M\times M}A)=(v+w)+(2m-v-w+1)-2m=1$, and its boundary is $0$-dimensional and augments to $0$ by \cref{D: aug}. But, as $V$ and $W$ represent geometric cocycles, 
this implies  $$\aug((V\times W)\times_{M\times M}\diag(Z))=\aug((V\times W)\times_{M\times M}\zeta\xi\diag(Z)).$$
We claim the former represents $(\mc I(\uV\uplus\uW))(Z)$ and the latter represents $(\mc I(\uV) \smile \mc I(\uW))(Z)$.

We first consider  $(V\times W)\times_{M\times M}\diag(Z)$, which is a cap product. By \cref{P: natural cap}, this is the same oriented manifold as $\diag^*(V\times W)\times_M Z$, which is $(V\times_MW)\times_M Z$ by \cref{P: cross to cup}. 
So it follows from \cref{D: intersection homomorphism} and from the fact that $V\times_MW$ represents $\uV\uplus \uW$, that $$\aug((V\times W)\times_{M\times M}\diag(Z))=\aug((V\times_MW)\times_M Z)=\mc I(\uV\uplus \uW)(Z).$$

Next, consider $(\mc I(\uV) \smile \mc I(\uW))(Z)$. If $Z=\sum_i a_iE_i$, then by the discussion in \cref{S: cubical products}, we have  
\begin{align*}
(\mc I(\uV) \smile \mc I(\uW))(Z)
&=\sum a_i (\mc I(\uV) \smile \mc I(\uW))(E_i)\\
&=\sum a_i\sum (\mc I(\uV) \otimes \mc I(\uW))  \rho_{H,K}A_H(E_i) \otimes B_K(E_i)\\
&=\sum a_i\sum \rho_{H,K}\mc I(\uV)(A_H(E_i))\cdot \mc I(\uW)(B_K(E))\\
&=\sum a_i\sum \rho_{H,K}\aug(V\times_M A_H(E_i))\aug(W\times_M B_K(E))\\
&=\sum a_i\sum \rho_{H,K}\aug((V\times W)\times_{M\times M}( A_H(E_i)\times B_K(E)))\\
&=\aug((V\times W)\times_{M\times M}\sum a_i\sum \rho_{H,K}( A_H(E_i)\times B_K(E)))\\
&=\aug((V\times W)\times_{M\times M}\zeta\xi\diag(Z)).\\
\end{align*}
Here the third equality is from the definition of the map $\mc I$ and the fourth utilizes \cref{P: cross product comparison}.
\end{proof}




We next recall that when $H^i(X)$ is finitely generated, there is an isomorphism $\lambda:T(H^i(X))\to \Hom(T(H_{i-1}(X));\Q/\Z)$, where $T(G)$ is the torsion subgroup of the abelian group $G$. A construction and proof can be found in \cite[Section 8.4.3]{Frie20}. The discussion there is in the context of intersection homology of singular spaces, but the relevant homological algebra applies in general for any cohomology groups coming from a cochain complex $C^*=\Hom(C_*,R)$, where $R$ is a Dedekind domain, $C_*$ is projective in each degree, and the homology and cohomology groups are all finitely generated. In this case, the map $\lambda$ can be described as follows. Let $\alpha$ be a cocycle representing an element of $T(H^i(X))$, and let $w$ be a cycle representing an element of $T(H_{i-1}(X))$. Since $w$ represents a torsion element of $H_{i-1}(X)$, there is a chain $z$ such that $\bd z=rw$ for some integer $r\neq 0$. Then $\lambda(\alpha)(w)=\frac{\alpha(z)}{r}$. It is shown in \cite{Frie20} that this construction is well defined, independent of the choices involved. 

In the current setting we will apply this to cubical cohomology with integer coefficients, in which case the homological conditions are satisfied so long as each cohomology group --- or equivalently, each homology group --- is finitely generated.  


\begin{proposition}
Let $M$ be a smoothly cubulated manifold without boundary with cubulation $X$, and suppose $H^i(X)$ is finitely generated for each $i$. Let $\uV,\uW\in H^*_\Gamma(M)$. Suppose the cohomology classes $\mc I(\uV\uplus\uW)$ and $\mc I(\uV) \smile \mc I(\uW)$ lie in $T(H^*(K_X^*(M)))$. Then they agree after composition with the isomorphism $$\lambda:T(H^*(K_X^*(M)))\to \Hom(H_{*-1}(K_*^X(M)),\Q/\Z)$$
and so they are equal in $H^*(K_X^*(M)$.
\end{proposition}

\begin{proof}

\end{proof}


\end{document}
