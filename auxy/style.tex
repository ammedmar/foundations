% !TEX root = ../foundations.tex

% ------------------------------------------------------------------------------
% Core math packages
% ------------------------------------------------------------------------------
\usepackage{amsmath, amssymb, amsfonts, mathtools} % Core AMS math tools
\usepackage{bm} % Bold math symbols
\usepackage{mathbbol} % Blackboard bold, including digits
\usepackage{mathrsfs} % Script fonts
\usepackage{stmaryrd} % Additional symbols (e.g., semantic brackets)
\usepackage{verbatim} % Block comments
\usepackage{tabularx} % Table environment with fixed width columns

% ------------------------------------------------------------------------------
% Diagrams and graphics
% ------------------------------------------------------------------------------
\usepackage[all]{xy} % Xy-pic for commutative diagrams
\usepackage{tikz} % TikZ for general purpose drawings
\usetikzlibrary{decorations.pathmorphing} % TikZ library for decorations
\tikzset{snake it/.style={decorate, decoration=snake}}

\usepackage{tikz-cd} % TikZ-based commutative diagrams
\usepackage{diagrams} % Legacy diagram package
\usepackage{standalone} % Standalone graphics compilation

% ------------------------------------------------------------------------------
% Figures and captions
% ------------------------------------------------------------------------------
\usepackage{caption}
\usepackage{subcaption}

% ------------------------------------------------------------------------------
% Indexing
% ------------------------------------------------------------------------------
\usepackage{imakeidx}
%\makeindex

% ------------------------------------------------------------------------------
% Localization and language
% ------------------------------------------------------------------------------
\usepackage{babel}

% ------------------------------------------------------------------------------
% Hyperlinks and cross-referencing
% ------------------------------------------------------------------------------
\usepackage[
	bookmarks=true,
	linktocpage=true,
	bookmarksnumbered=true,
	breaklinks=true,
	pdfstartview=FitH,
	hyperfigures=false,
	plainpages=false,
	naturalnames=true,
	colorlinks=true,
	pagebackref=true,
	pdfpagelabels
	]{hyperref}

\hypersetup{
	linkcolor=blue,
	citecolor=blue,
	urlcolor=blue,
	colorlinks=true
}

\usepackage[capitalise,noabbrev,nosort]{cleveref}
\newcommand{\creflastconjunction}{, and\nobreakspace} % Serial comma in cleveref

% ------------------------------------------------------------------------------
% Table of contents formatting
% ------------------------------------------------------------------------------
\setcounter{tocdepth}{4} % Include subsubsections in TOC
\let\oldtocsection=\tocsection
\let\oldtocsubsection=\tocsubsection
\let\oldtocsubsubsection=\tocsubsubsection
\renewcommand{\tocsection}[2]{\hspace{0em}\oldtocsection{#1}{#2}}
\renewcommand{\tocsubsection}[2]{\hspace{1em}\oldtocsubsection{#1}{#2}}
\renewcommand{\tocsubsubsection}[2]{\hspace{2em}\oldtocsubsubsection{#1}{#2}}

% ------------------------------------------------------------------------------
% Paper layout and spacing
% ------------------------------------------------------------------------------
\renewcommand{\arraystretch}{1.5}
\setlength{\tabcolsep}{15pt}

\addtolength{\textwidth}{1.4in}
\oddsidemargin=0in
\evensidemargin=0in

% ------------------------------------------------------------------------------
% Miscellaneous
% ------------------------------------------------------------------------------
\usepackage{todo} % To-do notes
\usepackage{ulem} % Underlining and strikeout (used in to-do list)
\def\todoname{Comments, remarks and to-do's}

% Contributor-specific todo commands (alphabetical)
\newcommand{\anibal}[1]{\todo[A.\!]{#1}}
\newcommand{\dev}[1]{\todo[D.\!]{#1}}
\newcommand{\greg}[1]{\todo[G.\!]{#1}}


\begin{comment}
%diagrams.sty fix
\makeatletter
\def\foo#1\endgraf\unskip#2\foo{\def\row@to@buffer{#1\endgraf\unskip\unskip#2}}
\expandafter\foo\row@to@buffer\foo
\makeatother
\end{comment}